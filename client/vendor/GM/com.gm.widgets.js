function GloveBox(a){this.addGettersAndSetters(),this.disabled=!1,this.formElements=null,this.state="ready",this.isScaling=this._scalable=!1,this._rotation=0,this.canRotate=!0,this.startScale=this._scale=1,this.startAngle=this._angle=0,this.maxScale=4,this.minScale=.1,this.isDragging=!1,this.element=a,this.startTime=this._y=this._x=0,this.snap=null,this.lastY=this.lastX=0,this.clampY=this.clampX=!0,this.yVel=this.xVel=0,this.scrollY=!0,this.scrollX=!1,this._bounceT=this._afterT=this._dragT=null,this._dragThreshold=20;var b=a.parentNode;"createTouch"in document?b.addEventListener("touchstart",this,!1):b.addEventListener("mousedown",this,!1),b.addEventListener("click",this,!0),a.addEventListener("webkitTransitionEnd",this,!0),a.style.webkitTransformOrigin="0% 0%"}(function(){function a(a,b){var c;if(typeof a==l){var d=a,e=null===b.firstChild?{UL:"LI",DL:"DT",TR:"TD"}[b.tagName]||b.tagName:b.firstChild.tagName;c={};var f=/^<([A-Z][A-Z0-9]*)([^>]*)>([\s\S]*)<\/\1>/i,g,h;h=0;var i;if(f.test(d)){f=f.exec(d),e=f[1];if(""!==f[2])for(d=f[2].split(/([A-Z]*\s*=\s*['|"][A-Z0-9:;#\s]*['|"])/i);h<d.length;h++)i=d[h].replace(/^\s*|\s*$/g,""),""!==i&&" "!==i&&(i=i.split("="),c[i[0]]=i[1].replace(/(["']?)/g,""));d=f[3]}e=j.createElement(e);for(g in c)h=j.createAttribute(g),h.nodeValue=c[g],e.setAttributeNode(h);e.innerHTML=d,c=e}else c=a;return c}function b(a){var b=/\S/;a.each(function(a){for(var c=a.firstChild,d=-1,e;c;)e=c.nextSibling,3==c.nodeType&&!b.test(c.nodeValue)?a.removeChild(c):c.nodeIndex=++d,c=e})}function c(a){return a._xuiEventID?a._xuiEventID:a._xuiEventID=++c.id}function d(a,b){var c=q[a]=q[a]||{};return c[b]=c[b]||[]}function e(a,b,e,f,g){var h=c(a),h=d(h,b),i=function(a,b){for(var c=!1;null!=b;){if(b==a){c=!0;break}b=b.parentNode}return c},j=function(c){"mouseenter"==b&&i(a,c.fromElement)||"mouseleave"==b&&i(a,c.toElement)||(!1===e.call(a,c)&&(c.preventDefault(),c.stopPropagation()),g&&x$(a).un(b,e,f))};return j.guid=e.guid=e.guid||++c.id,j.handler=e,h.push(j),j}var f,g=this,l=new String("string"),j=g.document,m=/^#?([\w-]+)$/,n=/^#/,k=/<([\w:]+)/,h=function(a){return[].slice.call(a,0)};try{h(j.documentElement.childNodes)}catch(i){h=function(a){for(var b=[],c=0;a[c];c++)b.push(a[c]);return b}}g.x$=g.xui=f=function(a,b){return new f.fn.find(a,b)},[].forEach||(Array.prototype.forEach=function(a,b){var c=this.length||0,d=0;if("function"==typeof a)for(;d<c;d++)a.call(b,this[d],d,this)}),f.fn=f.prototype={extend:function(a){for(var b in a)f.fn[b]=a[b]},find:function(a,b){var c=[],d;if(!a)return this;if(typeof b=="undefined"&&this.length)c=this.each(function(b){c=c.concat(h(f(a,b)))}).reduce(c);else{b=b||j;if(typeof a==l)m.test(a)&&b.getElementById&&b.getElementsByTagName?(c=n.test(a)?[b.getElementById(a.substr(1))]:b.getElementsByTagName(a),c[0]==null&&(c=[])):k.test(a)?(d=j.createElement("i"),d.innerHTML=a,h(d.childNodes).forEach(function(a){c.push(a)})):c=typeof g.Sizzle!="undefined"?Sizzle(a,b):b.querySelectorAll(a),c=h(c);else if(a instanceof Array)c=a;else if(a.toString()=="[object NodeList]")c=h(a);else if(a.nodeName||a===g)c=[a]}return this.set(c)},set:function(a){var b=f();return b.cache=h(this.length?this:[]),b.length=0,[].push.apply(b,a),b},reduce:function(a,b){var c=[],a=a||h(this);return a.forEach(function(a){c.indexOf(a,0,b)<0&&c.push(a)}),c},has:function(a){var b=f(a);return this.filter(function(){var a=this,c=null;return b.each(function(b){c=c||b==a}),c})},filter:function(a){var b=[];return this.each(function(c,d){a.call(c,d)&&b.push(c)}).set(b)},not:function(a){var b=h(this);return this.filter(function(c){var d;return f(a).each(function(a){return d=b[c]!=a}),d})},each:function(a){for(var b=0,c=this.length;b<c;++b)if(a.call(this[b],this[b],b,this)===!1)break;return this}},f.fn.find.prototype=f.fn,f.extend=f.fn.extend,f.extend({html:function(c,d){b(this);if(arguments.length==0)return this[0].innerHTML;arguments.length==1&&arguments[0]!="remove"&&(d=c,c="inner");if(typeof d.each!="undefined"){var e=this;return d.each(function(a){e.html(c,a)}),this}return this.each(function(b){var e,k=0;if(c=="inner")if(typeof d==l||typeof d=="number"){b.innerHTML=d,b=b.getElementsByTagName("SCRIPT");for(e=b.length;k<e;k++)eval(b[k].text)}else b.innerHTML="",b.appendChild(d);else c=="outer"?b.parentNode.replaceChild(a(d,b),b):c=="top"?b.insertBefore(a(d,b),b.firstChild):c=="bottom"?b.insertBefore(a(d,b),null):c=="remove"?b.parentNode.removeChild(b):c=="before"?b.parentNode.insertBefore(a(d,b.parentNode),b):c=="after"&&b.parentNode.insertBefore(a(d,b.parentNode),b.nextSibling)})},attr:function(a,b){if(arguments.length==2)return this.each(function(c){a!="checked"||b!=""&&b!=0&&typeof b!="undefined"?c.setAttribute(a,b):c.removeAttribute(a)});var c=[];return this.each(function(b){b=b.getAttribute(a),b!=null&&c.push(b)}),c}}),"inner,outer,top,bottom,remove,before,after".split(",").forEach(function(a){f.fn[a]=function(a){return function(b){return this.html(a,b)}}(a)}),f.events={};var q={};f.extend({on:function(a,b,g,h){return this.each(function(i){h=h||{};if(f.events[a]){var j=c(i),j=d(j,a);h.handler=function(b,c){f.fn.fire.call(f(this),a,c)},j.length||f.events[a].call(i,h)}i.addEventListener({mouseenter:"mouseover",mouseleave:"mouseout"}[a]||a,e(i,a,b,g,h.un),g)})},un:function(a,b,e){return this.each(function(f){for(var g=c(f),h=d(g,a),i=h.length;i--;)if(typeof b=="undefined"||b.guid===h[i].guid){f.removeEventListener(a,h[i],e);var j=q[g][a],k=i,l=j.slice(2);j.length=k<0?j.length+k:k,j.push.apply(j,l)}q[g][a].length===0&&delete q[g][a];for(var m in q[g])return;delete q[g]})},fire:function(a,b){return this.each(function(c){c==j&&!c.dispatchEvent&&(c=j.documentElement);var d=j.createEvent("HTMLEvents");d.initEvent(a,!0,!0),d.data=b||{},d.eventName=a,c.dispatchEvent(d)})}}),"click,load,submit,touchstart,touchmove,touchend,touchcancel,gesturestart,gesturechange,gestureend,orientationchange".split(",").forEach(function(a){f.fn[a]=function(a){return function(b){return b?this.on(a,b):this.fire(a)}}(a)}),f(g).on("load",function(){"onorientationchange"in j.body||function(){var a=g.innerWidth,b=g.innerHeight;f(g).on("resize",function(){var c=g.innerWidth<a&&g.innerHeight>b&&g.innerWidth<g.innerHeight,d=g.innerWidth>a&&g.innerHeight<b&&g.innerWidth>g.innerHeight;if(c||d)g.orientation=c?0:90,x$("body").fire("orientationchange"),a=g.innerWidth,b=g.innerHeight})}()});var r;try{r=!!j.createEvent("TouchEvent").initTouchEvent}catch(p){r=!1}f.touch=r,c.id=1,f.extend({tween:function(a,b){a instanceof Array&&a.forEach(function(){});var c=function(){var b={};return["duration","after","easing"].forEach(function(c){a[c]&&(b[c]=a[c],delete a[c])}),b}(a),d=function(a){var b=[],c;if(typeof a!=l){for(c in a)b.push(c+":"+a[c]);b=b.join(";")}else b=a;return b}(a);return this.each(function(a){emile(a,d,c,b)})}});var t=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;f.extend({setStyle:function(a,b){return a=a.replace(/\-[a-z]/g,function(a){return a[1].toUpperCase()}),this.each(function(c){c.style[a]=b})},getStyle:function(a,b){var c=function(a,b){return j.defaultView.getComputedStyle(a,"").getPropertyValue(b.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}))};return typeof b=="undefined"?c(this[0],a):this.each(function(d){b(c(d,a))})},addClass:function(a){return this.each(function(b){s(a).test(b.className)===!1&&(b.className=(b.className+" "+a||"").replace(t,""))})},hasClass:function(a,b){var c=this;return this.length&&function(){var d=!1;return c.each(function(c){s(a).test(c.className)&&(d=!0,b&&b(c))}),d}()},removeClass:function(a){if(typeof a=="undefined")this.each(function(a){a.className=""});else{var b=s(a);this.each(function(a){var c;c=(a.className.replace(b,"$1")||"").replace(t,""),a.className=c})}return this},css:function(a){for(var b in a)this.setStyle(b,a[b]);return this}});var u={},s=function(a){var b=u[a];return b||(b=RegExp("(^|\\s+)"+a+"(?:\\s+|$)"),u[a]=b),b};f.extend({xhr:function(a,b,c){function d(){g.readyState==4&&(delete f.xmlHttpRequest,(g.status===0||g.status==200)&&g.handleResp(),/^[45]/.test(g.status)&&g.handleError())}/^(inner|outer|top|bottom|before|after)$/.test(a)||(c=b,b=a,a="inner");var e=c?c:{};typeof c=="function"&&(e={},e.callback=c);var f=this,g=new XMLHttpRequest,c=e.method||"get",h=e.async||!1,i=e.data||null,j=0;g.queryString=i,g.open(c,b,h);if(e.headers)for(;j<e.headers.length;j++)g.setRequestHeader(e.headers[j].name,e.headers[j].value);return g.handleResp=e.callback!=null?e.callback:function(){f.html(a,this.responseText)},g.handleError=e.error&&typeof e.error=="function"?e.error:function(){},h&&(g.onreadystatechange=d,this.xmlHttpRequest=g),g.send(i),h||d(),this}})})();var USE_TOUCH=!1;GloveBox.DraggingTransition="-webkit-transform 0ms none",GloveBox.AfterTouchTransition="-webkit-transform 300ms ease",GloveBox.BounceBackTransition="-webkit-transform 200ms ease-out",GloveBox.prototype.addGettersAndSetters=function(){this.__defineGetter__("x",function(){return this._x}),this.__defineSetter__("x",function(a){this.setPos(a,this._y)}),this.__defineGetter__("y",function(){return this._y}),this.__defineSetter__("y",function(a){this.setPos(this._x,a)}),this.__defineSetter__("scale",function(a){this._scale=Math.max(Math.min(a,this.maxScale),this.minScale),this._updateTransform()}),this.__defineGetter__("scale",function(){return this._scale}),this.__defineGetter__("dragTrans",function(){return this._dragT?this._dragT:GloveBox.DraggingTransition}),this.__defineSetter__("dragTrans",function(a){this._dragT=a}),this.__defineGetter__("afterTrans",function(){return this._afterT?this._afterT:GloveBox.AfterTouchTransition}),this.__defineSetter__("afterTrans",function(a){this._dragT=a}),this.__defineGetter__("bounceTrans",function(){return this._bounceT?this._bounceT:GloveBox.BounceBackTransition}),this.__defineSetter__("bounceTrans",function(a){this._bounceT=a}),this.__defineSetter__("canScale",function(a){(this._scalable=1==a)?this.element.parentNode.addEventListener("gesturestart",this,!0):this.element.parentNode.removeEventListener("gesturestart",this,!0)}),this.__defineGetter__("canScale",function(){return this._scalable})},GloveBox.prototype.handleEvent=function(a){if("function"==typeof this[a.type])return this[a.type](a);console.log("event handler is not a function :: "+a.type)},GloveBox.prototype.setPos=function(a,b){this._x==a&&this._y==b?this.fireFinishedEvent():(this._x=a,this._y=b,this._updateTransform())},GloveBox.prototype.scrollToBottom=function(){var a=this.element.parentNode;this.setPos(this._x,a.offsetHeight-a.scrollHeight)},GloveBox.prototype._updateTransform=function(){var a="translate3d(XXXpx,YYYpx,ZZZpx) scale3D(SCALE,SCALE,1.0)".replace(/XXX/,this._x),a=a.replace(/YYY/,this._y),a=a.replace(/ZZZ/,0),a=a.replace(/SCALE/g,this.scale);this.element.style.webkitTransform=a},GloveBox.prototype.addTouchListeners=function(){var a=this.element.parentNode;"createTouch"in document?(a.addEventListener("touchmove",this,!1),a.addEventListener("touchend",this,!1),a.addEventListener("touchcancel",this,!1)):(a.addEventListener("mousemove",this,!1),a.addEventListener("mouseup",this,!1),a.addEventListener("mousewheel",this,!1))},GloveBox.prototype.removeTouchListeners=function(){var a=this.element.parentNode;"createTouch"in document?(a.removeEventListener("touchmove",this,!1),a.removeEventListener("touchend",this,!1),a.removeEventListener("touchcancel",this,!1)):(a.removeEventListener("mousemove",this,!1),a.removeEventListener("mouseup",this,!1),a.removeEventListener("mousewheel",this,!1))},GloveBox.prototype.disableInputs=function(){var a=document;"getElementsByTagName"in this.element.parentNode&&(a=this.element.parentNode);var b=a.getElementsByTagName("select"),c=a.getElementsByTagName("input"),a=a.getElementsByTagName("textarea");this.formElements=[];if(null!=b)for(var d=0;d<b.length;d++){var e=b[d];e.disabled||(e.disabled=!0,this.formElements.push(e))}if(null!=c)for(d=0;d<c.length;d++)e=c[d],e.disabled||(e.disabled=!0,this.formElements.push(e));if(null!=a)for(d=0;d<a.length;d++)e=a[d],e.disabled||(e.disabled=!0,this.formElements.push(e))},GloveBox.prototype.reenableInputs=function(){if(this.formElements){for(var a=0,b=this.formElements.length;a<b;a++)this.formElements[a].disabled=!1;this.formElements=null}},GloveBox.prototype.click=function(a){this.isDragging&&(a.preventDefault(),a.stopPropagation())},GloveBox.prototype.touchstart=function(a){return this.isDragging=!0,1!=a.targetTouches.length||this.isScaling||this.disabled?!1:(this.state="starting",a.stopPropagation(),this.startX=a.targetTouches[0].clientX,this.startY=a.targetTouches[0].clientY,this.lastX=this.startX,this.lastY=this.startY,this.yVel=this.xVel=0,this.startTime=a.timeStamp,this.addTouchListeners(),!1)},GloveBox.prototype.touchmove=function(a){if(1!=a.targetTouches.length||this.isScaling)return!1;null==this.formElements&&this.disableInputs(),this.state="moving",a.preventDefault();var b=a.targetTouches[0].clientX,a=a.targetTouches[0].clientY,c=b-this.lastX,d=a-this.lastY;!this.isDragging&&(Math.abs(c)>this._dragThreshold||Math.abs(d)>this._dragThreshold)&&(this.element.style.webkitTransition=this.dragTrans);if(this.isDragging){this.xVel=(c+10*this.xVel)/10,this.yVel=(d+10*this.yVel)/10;var e=this.x,f=this.y;this.scrollX&&(e=this.getClampedX(this.x+c)),this.scrollY&&(f=this.getClampedY(this.y+d)),this.setPos(e,f),c=document.createEvent("MouseEvents"),c.initEvent("scrollchange",!0,!0),c.newX=e,c.newY=f,this.element.dispatchEvent(c),this.lastX=b,this.lastY=a}},GloveBox.prototype.getClampedX=function(a){if(!this.clampX)return a;var b=(this.element.parentNode.offsetWidth-this.element.scrollWidth)*this.scale;return 0<a?this.xVel=a=0:a<b&&(a=b,this.xVel=0),a},GloveBox.prototype.getClampedY=function(a){if(!this.clampY)return a;var b=this.element.parentNode,c=this.element.scrollHeight*this.scale-b.scrollHeight*this.scale,b=(b.offsetHeight-b.scrollHeight)*this.scale;return a>c?(a=c,this.yVel=0):a<b&&(a=b,this.yVel=0),a},GloveBox.prototype.touchend=function(){if(this.isDragging){var a=this;setTimeout(function(){a.reenableInputs()},1500),this.removeTouchListeners(),this.state="ending",this.element.style.webkitTransition=this.afterTrans,this.finishScrolling()}return!1},GloveBox.prototype.touchcancel=function(a){this.touchend(a)},GloveBox.prototype.finishScrolling=function(){this.state="done",this.element.style.webkitTransition=this.bounceTrans,this.isDragging=!1;var a=this.element.parentNode,b=(a.offsetWidth-this.element.scrollWidth)*this.scale,c=0<this.x?0:this.x;this.x<b&&(c=b),a=(a.scrollHeight-a.scrollHeight)*this.scale,b=0<this.y?0:this.y,b<a&&(b=a),null!=this.snap&&(c=this.snap.x?Math.round(c/this.snap.x)*this.snap.x:c,b=this.snap.y?Math.round(b/this.snap.y)*this.snap.y:b),this.setPos(c,b)},GloveBox.prototype.webkitTransitionEnd=function(){switch(this.state){case"done":this.fireFinishedEvent();break;case"ending":this.finishScrolling()}},GloveBox.prototype.fireFinishedEvent=function(){this.fireEvent("finished",this.element,{x:this._x,y:this._y,startX:this.startX,startY:this.startY,endX:this.endX,endY:this.endY})},GloveBox.prototype.fireEvent=function(a,b,c){var d=document.createEvent("UIEvents");d.initEvent(a,!0,!0),d.params=c,b.dispatchEvent(d)},GloveBox.prototype.enable=function(){this.disabled=!1},GloveBox.prototype.disable=function(){this.disabled=!0},GloveBox.prototype.addGestureListeners=function(){var a=this.element.parentNode;a.addEventListener("gesturechange",this,!0),a.addEventListener("gestureend",this,!0)},GloveBox.prototype.removeGestureListeners=function(){var a=this.element.parentNode;a.removeEventListener("gesturechange",this,!0),a.removeEventListener("gestureend",this,!0)},GloveBox.prototype.gesturestart=function(){return this.addGestureListeners(),this.isDragging=!1,this.isScaling=!0,this.startScale=this._scale,this.startAngle=this._angle,this.element.style.webkitTransition=this.dragTrans,!1},GloveBox.prototype.gesturechange=function(a){return this.isScaling=!0,this.scale=this.startScale*a.scale,!1},GloveBox.prototype.gestureend=function(){return this.removeGestureListeners(),this.isScaling=!1,this.finishScrolling(),!1},GloveBox.prototype.mousedown=function(a){var b={timestamp:a.timestamp,preventDefault:function(){a.preventDefault()},stopPropagation:function(){a.stopPropagation()}};return b.targetTouches=[{clientX:a.x,clientY:a.y}],this.touchstart(b)},GloveBox.prototype.mousemove=function(a){var b={timestamp:a.timestamp,preventDefault:function(){a.preventDefault()},stopPropagation:function(){a.stopPropagation()}};return b.targetTouches=[{clientX:a.x,clientY:a.y}],this.touchmove(b)},GloveBox.prototype.mouseup=function(a){var b={timestamp:a.timestamp,preventDefault:function(){a.preventDefault()},stopPropagation:function(){a.stopPropagation()}};return this.endX=a.x,this.endY=a.y,this.touchend(b)},GloveBox.prototype.mousewheel=function(a){this.scale+=a.wheelDelta/10};var SimpleDateFormat;(function(){function a(a){return"undefined"==typeof a}var b=/('[^']*')|(G+|y+|M+|w+|W+|D+|d+|F+|E+|a+|H+|k+|K+|h+|m+|s+|S+|Z+)|([a-zA-Z]+)|([^a-zA-Z']+)/,c="January,February,March,April,May,June,July,August,September,October,November,December".split(","),d="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),e={G:0,y:3,M:4,w:2,W:2,D:2,d:2,F:2,E:1,a:0,H:2,k:2,K:2,h:2,m:2,s:2,S:2,Z:5},f=function(a,b,c){return a=new Date(a,b,c,0,0,0),a.setMilliseconds(0),a};Date.prototype.getDifference=function(a){return this.getTime()-a.getTime()},Date.prototype.isBefore=function(a){return this.getTime()<a.getTime()},Date.prototype.getUTCTime=function(){return Date.UTC(this.getFullYear(),this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())},Date.prototype.getTimeSince=function(a){return this.getUTCTime()-a.getUTCTime()},Date.prototype.getPreviousSunday=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),12,0,0),a=new Date(a.getTime()-864e5*this.getDay());return f(a.getFullYear(),a.getMonth(),a.getDate())},Date.prototype.getWeekInYear=function(b){a(this.minimalDaysInFirstWeek)&&(b=1);var c=this.getPreviousSunday(),d=f(this.getFullYear(),0,1),c=c.isBefore(d)?0:1+Math.floor(c.getTimeSince(d)/6048e5),d=7-d.getDay();return d<b&&c--,c},Date.prototype.getWeekInMonth=function(b){a(this.minimalDaysInFirstWeek)&&(b=1);var c=this.getPreviousSunday(),d=f(this.getFullYear(),this.getMonth(),1),c=c.isBefore(d)?0:1+Math.floor(c.getTimeSince(d)/6048e5),d=7-d.getDay();return d>=b&&c++,c},Date.prototype.getDayInYear=function(){var a=f(this.getFullYear(),0,1);return 1+Math.floor(this.getTimeSince(a)/864e5)},SimpleDateFormat=function(a){this.formatString=a},SimpleDateFormat.prototype.setMinimalDaysInFirstWeek=function(a){this.minimalDaysInFirstWeek=a},SimpleDateFormat.prototype.getMinimalDaysInFirstWeek=function(){return a(this.minimalDaysInFirstWeek)?1:this.minimalDaysInFirstWeek},SimpleDateFormat.prototype.format=function(a){for(var f="",g,h=function(a,b){for(;a.length<b;)a="0"+a;return a},i=this.formatString;g=b.exec(i);){var j=g[1],k=g[2],l=g[3],m=g[4];if(j)f="''"==j?f+"'":f+j.substring(1,j.length-1);else if(!l)if(m)f+=m;else if(k){j=k.charAt(0),k=k.length,l="";switch(j){case"G":l="AD";break;case"y":l=a.getFullYear();break;case"M":l=a.getMonth();break;case"w":l=a.getWeekInYear(this.getMinimalDaysInFirstWeek());break;case"W":l=a.getWeekInMonth(this.getMinimalDaysInFirstWeek());break;case"D":l=a.getDayInYear();break;case"d":l=a.getDate();break;case"F":l=1+Math.floor((a.getDate()-1)/7);break;case"E":l=d[a.getDay()];break;case"a":l=12<=a.getHours()?"PM":"AM";break;case"H":l=a.getHours();break;case"k":l=a.getHours()||24;break;case"K":l=a.getHours()%12;break;case"h":l=a.getHours()%12||12;break;case"m":l=a.getMinutes();break;case"s":l=a.getSeconds();break;case"S":l=a.getMilliseconds();break;case"Z":l=a.getTimezoneOffset()}switch(e[j]){case 0:f+=4<=k?l:l.substr(0,Math.max(2,k));break;case 1:f+=4<=k?l:l.substr(0,Math.max(3,k));break;case 2:f+=h(""+l,k);break;case 3:f=3>=k?f+(""+l).substr(2,2):f+h(""+l,k);break;case 4:f=3<=k?f+(4<=k?c[l]:c[l].substr(0,Math.max(k,k))):f+h(""+(l+1),k);break;case 5:k=0<l?"-":"+",l=Math.abs(l),j=""+Math.floor(l/60),j=h(j,2),l=""+l%60,l=h(l,2),f+=k+j+l}}i=i.substr(g.index+g[0].length)}return f}})(),function(){function a(a,b){var k;this.element="object"==typeof a?a:document.getElementById(a),this.wrapper=this.element.parentNode,this.element.style.cssText="-webkit-transition-property:-webkit-transform;-webkit-transition-timing-function:cubic-bezier(0,0,0.25,1);-webkit-transition-duration:0;-webkit-transform:"+i+"0,0"+j,this.options={bounce:c,momentum:c,checkDOMChanges:!0,topOnDOMChanges:!1,hScrollbar:c,vScrollbar:c,fadeScrollbar:d||!e,shrinkScrollbar:d||!e,desktopCompatibility:!1,overflow:"auto",snap:!1,bounceLock:!1,scrollbarColor:"rgba(0,0,0,0.5)",onScrollEnd:function(){}};if("object"==typeof b)for(k in b)this.options[k]=b[k];this.options.desktopCompatibility&&(this.options.overflow="hidden"),this.onScrollEnd=this.options.onScrollEnd,delete this.options.onScrollEnd,this.wrapper.style.overflow=this.options.overflow,this.refresh(),window.addEventListener("onorientationchange"in window?"orientationchange":"resize",this,!1);if(e||this.options.desktopCompatibility)this.element.addEventListener(f,this,!1),this.element.addEventListener(g,this,!1),this.element.addEventListener(h,this,!1);this.options.checkDOMChanges&&this.element.addEventListener("DOMSubtreeModified",this,!1)}function b(a,b,c,d,e){var f=document;this.dir=a,this.fade=c,this.shrink=d,this.uid=++k,this.bar=f.createElement("div"),this.bar.style.cssText="position:absolute;top:0;left:0;-webkit-transition-timing-function:cubic-bezier(0,0,0.25,1);pointer-events:none;-webkit-transition-duration:0;-webkit-transition-delay:0;-webkit-transition-property:-webkit-transform;z-index:10;background:"+e+";-webkit-transform:"+i+"0,0"+j+";"+("horizontal"==a?"-webkit-border-radius:3px 2px;min-width:6px;min-height:5px":"-webkit-border-radius:2px 3px;min-width:5px;min-height:6px"),this.wrapper=f.createElement("div"),this.wrapper.style.cssText="-webkit-mask:-webkit-canvas(scrollbar"+this.uid+this.dir+");position:absolute;z-index:10;pointer-events:none;overflow:hidden;opacity:0;-webkit-transition-duration:"+(c?"300ms":"0")+";-webkit-transition-delay:0;-webkit-transition-property:opacity;"+("horizontal"==this.dir?"bottom:2px;left:2px;right:7px;height:5px":"top:2px;right:2px;bottom:7px;width:5px;"),this.wrapper.appendChild(this.bar),b.appendChild(this.wrapper)}a.prototype={x:0,y:0,enabled:!0,handleEvent:function(a){switch(a.type){case f:this.touchStart(a);break;case g:this.touchMove(a);break;case h:this.touchEnd(a);break;case"webkitTransitionEnd":this.transitionEnd();break;case"orientationchange":case"resize":this.refresh();break;case"DOMSubtreeModified":this.onDOMModified(a)}},onDOMModified:function(a){var b=this;a.target.parentNode==b.element&&(setTimeout(function(){b.refresh()},0),b.options.topOnDOMChanges&&(0!=b.x||0!=b.y)&&b.scrollTo(0,0,"0"))},refresh:function(){var a=this.x,c=this.y;this.scrollWidth=this.wrapper.clientWidth,this.scrollHeight=this.wrapper.clientHeight,this.scrollerWidth=this.element.offsetWidth,this.scrollerHeight=this.element.offsetHeight,this.maxScrollX=this.scrollWidth-this.scrollerWidth,this.maxScrollY=this.scrollHeight-this.scrollerHeight,this.directionY=this.directionX=0,this.scrollX&&(0<=this.maxScrollX?a=0:this.x<this.maxScrollX&&(a=this.maxScrollX)),this.scrollY&&(0<=this.maxScrollY?c=0:this.y<this.maxScrollY&&(c=this.maxScrollY)),this.options.snap&&(this.maxPageX=-Math.floor(this.maxScrollX/this.scrollWidth),this.maxPageY=-Math.floor(this.maxScrollY/this.scrollHeight),c=this.snap(a,c),a=c.x,c=c.y);if(a!=this.x||c!=this.y)this.setTransitionTime("0"),this.setPosition(a,c,!0);this.scrollX=this.scrollerWidth>this.scrollWidth,this.scrollY=!this.options.bounceLock&&!this.scrollX||this.scrollerHeight>this.scrollHeight,this.options.hScrollbar&&this.scrollX?(this.scrollBarX=this.scrollBarX||new b("horizontal",this.wrapper,this.options.fadeScrollbar,this.options.shrinkScrollbar,this.options.scrollbarColor),this.scrollBarX.init(this.scrollWidth,this.scrollerWidth)):this.scrollBarX&&(this.scrollBarX=this.scrollBarX.remove()),this.options.vScrollbar&&this.scrollY&&this.scrollerHeight>this.scrollHeight?(this.scrollBarY=this.scrollBarY||new b("vertical",this.wrapper,this.options.fadeScrollbar,this.options.shrinkScrollbar,this.options.scrollbarColor),this.scrollBarY.init(this.scrollHeight,this.scrollerHeight)):this.scrollBarY&&(this.scrollBarY=this.scrollBarY.remove())},setPosition:function(a,b,c){this.x=a,this.y=b,this.element.style.webkitTransform=i+this.x+"px,"+this.y+"px"+j,c||(this.scrollBarX&&this.scrollBarX.setPosition(this.x),this.scrollBarY&&this.scrollBarY.setPosition(this.y)),this.onPositionChanged&&this.onPositionChanged({x:this.x,y:this.y})},setTransitionTime:function(a){a=a||"0",this.element.style.webkitTransitionDuration=a,this.scrollBarX&&(this.scrollBarX.bar.style.webkitTransitionDuration=a,this.scrollBarX.wrapper.style.webkitTransitionDuration=c&&this.options.fadeScrollbar?"300ms":"0"),this.scrollBarY&&(this.scrollBarY.bar.style.webkitTransitionDuration=a,this.scrollBarY.wrapper.style.webkitTransitionDuration=c&&this.options.fadeScrollbar?"300ms":"0")},touchStart:function(a){var b;if(this.enabled){a.preventDefault(),a.stopPropagation(),this.scrolling=!0,this.moved=!1,this.distY=this.distX=0,this.setTransitionTime("0");if(this.options.momentum||this.options.snap)if(b=new WebKitCSSMatrix(window.getComputedStyle(this.element).webkitTransform),b.e!=this.x||b.f!=this.y)document.removeEventListener("webkitTransitionEnd",this,!1),this.setPosition(b.e,b.f),this.moved=!0;this.touchStartX=e?a.changedTouches[0].pageX:a.pageX,this.scrollStartX=this.x,this.touchStartY=e?a.changedTouches[0].pageY:a.pageY,this.scrollStartY=this.y,this.scrollStartTime=a.timeStamp,this.directionY=this.directionX=0}},touchMove:function(a){if(this.scrolling){var b=e?a.changedTouches[0].pageX:a.pageX,c=e?a.changedTouches[0].pageY:a.pageY,d=this.scrollX?b-this.touchStartX:0,f=this.scrollY?c-this.touchStartY:0,g=this.x+d,h=this.y+f;a.stopPropagation(),this.touchStartX=b,this.touchStartY=c;if(0<=g||g<this.maxScrollX)g=this.options.bounce?Math.round(this.x+d/3):0<=g||0<=this.maxScrollX?0:this.maxScrollX;if(0<=h||h<this.maxScrollY)h=this.options.bounce?Math.round(this.y+f/3):0<=h||0<=this.maxScrollY?0:this.maxScrollY;5<this.distX+this.distY?(this.distX-3>this.distY?(h=this.y,f=0):this.distY-3>this.distX&&(g=this.x,d=0),this.setPosition(g,h),this.moved=!0,this.directionX=0<d?-1:1,this.directionY=0<f?-1:1):(this.distX+=Math.abs(d),this.distY+=Math.abs(f))}},touchEnd:function(a){if(this.scrolling){var b=a.timeStamp-this.scrollStartTime,c=e?a.changedTouches[0]:a,d,f;d=0,f=this.x;var g=this.y;this.scrolling=!1;if(this.moved)!this.options.snap&&250<b?this.resetPosition():(this.options.momentum&&(a=!0===this.scrollX?this.momentum(this.x-this.scrollStartX,b,this.options.bounce?-this.x+this.scrollWidth/5:-this.x,this.options.bounce?this.x+this.scrollerWidth-this.scrollWidth+this.scrollWidth/5:this.x+this.scrollerWidth-this.scrollWidth):{dist:0,time:0},c=!0===this.scrollY?this.momentum(this.y-this.scrollStartY,b,this.options.bounce?-this.y+this.scrollHeight/5:-this.y,this.options.bounce?(0>this.maxScrollY?this.y+this.scrollerHeight-this.scrollHeight:0)+this.scrollHeight/5:this.y+this.scrollerHeight-this.scrollHeight):{dist:0,time:0},d=Math.max(Math.max(a.time,c.time),1),f=this.x+a.dist,g=this.y+c.dist),this.options.snap&&(a=this.snap(f,g),f=a.x,g=a.y,d=Math.max(a.time,d)),this.scrollTo(f,g,d+"ms"));else if(this.resetPosition(),e){for(d=c.target;1!=d.nodeType;)d=d.parentNode;f=document.createEvent("MouseEvents"),f.initMouseEvent("click",!0,!0,a.view,1,c.screenX,c.screenY,c.clientX,c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),f._fake=!0,d.dispatchEvent(f)}}},transitionEnd:function(){document.removeEventListener("webkitTransitionEnd",this,!1),this.resetPosition()},resetPosition:function(){var a=this.x,b=this.y;0<=this.x?a=0:this.x<this.maxScrollX&&(a=this.maxScrollX),0<=this.y||0<this.maxScrollY?b=0:this.y<this.maxScrollY&&(b=this.maxScrollY),a!=this.x||b!=this.y?this.scrollTo(a,b):(this.moved&&(this.onScrollEnd(),this.moved=!1),this.scrollBarX&&this.scrollBarX.hide(),this.scrollBarY&&this.scrollBarY.hide())},snap:function(a,b){var c,a=0<this.directionX?Math.floor(a/this.scrollWidth):0>this.directionX?Math.ceil(a/this.scrollWidth):Math.round(a/this.scrollWidth);return this.pageX=-a,a*=this.scrollWidth,0<a?a=this.pageX=0:a<this.maxScrollX&&(this.pageX=this.maxPageX,a=this.maxScrollX),b=0<this.directionY?Math.floor(b/this.scrollHeight):0>this.directionY?Math.ceil(b/this.scrollHeight):Math.round(b/this.scrollHeight),this.pageY=-b,b*=this.scrollHeight,0<b?b=this.pageY=0:b<this.maxScrollY&&(this.pageY=this.maxPageY,b=this.maxScrollY),c=Math.round(Math.max(500*(Math.abs(this.x-a)/this.scrollWidth),500*(Math.abs(this.y-b)/this.scrollHeight))),{x:a,y:b,time:c}},scrollTo:function(a,b,c){this.x==a&&this.y==b?this.resetPosition():(this.moved=!0,this.setTransitionTime(c||"350ms"),this.setPosition(a,b),"0"===c||"0s"==c||"0ms"==c?this.resetPosition():document.addEventListener("webkitTransitionEnd",this,!1))},scrollToPage:function(a,b,c){this.options.snap||(this.pageX=-Math.round(this.x/this.scrollWidth),this.pageY=-Math.round(this.y/this.scrollHeight)),"next"==a?a=++this.pageX:"prev"==a&&(a=--this.pageX),"next"==b?b=++this.pageY:"prev"==b&&(b=--this.pageY),a=-a*this.scrollWidth,b=-b*this.scrollHeight,b=this.snap(a,b),a=b.x,b=b.y,this.scrollTo(a,b,c||"500ms")},scrollToElement:function(a,b){if(a="object"==typeof a?a:this.element.querySelector(a)){var c=this.scrollX?-a.offsetLeft:0,d=this.scrollY?-a.offsetTop:0;0<=c?c=0:c<this.maxScrollX&&(c=this.maxScrollX),0<=d?d=0:d<this.maxScrollY&&(d=this.maxScrollY),this.scrollTo(c,d,b)}},momentum:function(a,b,c,d){var b=1e3*(Math.abs(a)/b),e=b*b/2.5/1e3,f=0;return 0<a&&e>c?(b=b*c/e/2.5,e=c):0>a&&e>d&&(b=b*d/e/2.5,e=d),f=b/1.2,{dist:Math.round(e*(0>a?-1:1)),time:Math.round(f)}},destroy:function(a){return window.removeEventListener("onorientationchange"in window?"orientationchange":"resize",this,!1),this.element.removeEventListener(f,this,!1),this.element.removeEventListener(g,this,!1),this.element.removeEventListener(h,this,!1),document.removeEventListener("webkitTransitionEnd",this,!1),this.options.checkDOMChanges&&this.element.removeEventListener("DOMSubtreeModified",this,!1),this.scrollBarX&&(this.scrollBarX=this.scrollBarX.remove()),this.scrollBarY&&(this.scrollBarY=this.scrollBarY.remove()),a&&this.wrapper.parentNode.removeChild(this.wrapper),null}},b.prototype={init:function(a,b){var c=document,d=Math.PI;"horizontal"==this.dir?this.maxSize!=this.wrapper.offsetWidth&&(this.maxSize=this.wrapper.offsetWidth,c=c.getCSSCanvasContext("2d","scrollbar"+this.uid+this.dir,this.maxSize,5),c.fillStyle="rgb(0,0,0)",c.beginPath(),c.arc(2.5,2.5,2.5,d/2,-d/2,!1),c.lineTo(this.maxSize-2.5,0),c.arc(this.maxSize-2.5,2.5,2.5,-d/2,d/2,!1),c.closePath(),c.fill()):this.maxSize!=this.wrapper.offsetHeight&&(this.maxSize=this.wrapper.offsetHeight,c=c.getCSSCanvasContext("2d","scrollbar"+this.uid+this.dir,5,this.maxSize),c.fillStyle="rgb(0,0,0)",c.beginPath(),c.arc(2.5,2.5,2.5,d,0,!1),c.lineTo(5,this.maxSize-2.5),c.arc(2.5,this.maxSize-2.5,2.5,0,d,!1),c.closePath(),c.fill()),this.size=Math.max(Math.round(this.maxSize*this.maxSize/b),6),this.maxScroll=this.maxSize-this.size,this.toWrapperProp=this.maxScroll/(a-b),this.bar.style["horizontal"==this.dir?"width":"height"]=this.size+"px"},setPosition:function(a){"1"!=this.wrapper.style.opacity&&this.show(),a=Math.round(this.toWrapperProp*a),0>a?(a=this.shrink?a+3*a:0,7>this.size+a&&(a=-this.size+6)):a>this.maxScroll&&(a=this.shrink?a+3*(a-this.maxScroll):this.maxScroll,7>this.size+this.maxScroll-a&&(a=this.size+this.maxScroll-6)),a="horizontal"==this.dir?i+a+"px,0"+j:i+"0,"+a+"px"+j,this.bar.style.webkitTransform=a},show:function(){c&&(this.wrapper.style.webkitTransitionDelay="0"),this.wrapper.style.opacity="1"},hide:function(){c&&(this.wrapper.style.webkitTransitionDelay="350ms"),this.wrapper.style.opacity="0"},remove:function(){return this.wrapper.parentNode.removeChild(this.wrapper),null}};var c="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,d=/iphone|ipad/gi.test(navigator.appVersion),e="ontouchstart"in window,f=e?"touchstart":"mousedown",g=e?"touchmove":"mousemove",h=e?"touchend":"mouseup",i="translate"+(c?"3d(":"("),j=c?",0)":")",k=0;window.iScroll=a}(),function(){var a={};this.tmpl=function b(c,d){var e=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):a[c]=a[c]||b(document.getElementById(c).innerHTML);return d?e(d):e}}(),xui.extend({swipe:function(a,b){var c={preventDefaultEvents:!0,swipeCapture:!0,swipeMinDistance:20,swipeMaxDistance:200,swipeMinDelay:50,swipeMaxDelay:1e3,doubleTapCapture:!1,doubleTapMinDelay:50,doubleTapMaxDelay:1e3,longTapCapture:!1,longTapDelay:1e3,simpleTapCapture:!1},d;for(d in c)"undefined"==typeof b[d]&&(b[d]=c[d]);return b.simpleTapCapture&&(b.doubleTapCapture=!1),this.each(function(){function g(g){b.longTapCapture&&(window.clearTimeout(l),m=!1,l=window.setTimeout(function(){m=!0,k=0,a(g,{type:"longtap"})},b.longTapDelay)),j=(new Date).getTime(),e=g.clientX,f=g.clientY,d=c=0}function h(a){b.preventDefaultEvents&&a.preventDefault(),b.longTapCapture&&window.clearTimeout(l),c=a.clientX,d=a.clientY}function i(g){b.preventDefaultEvents&&g.preventDefault();if(b.longTapCapture){window.clearTimeout(l);if(m)return!1}var h={},i=(new Date).getTime();if(b.doubleTapCapture){var n=i-k;k=i;if(n>b.doubleTapMinDelay&&n<b.doubleTapMaxDelay)return k=0,h.delay=n,h.type="doubletap",a(g,h)}if(b.swipeCapture){h.delay=i-j,h.deltaX=c-e,h.deltaY=f-d,absX=Math.abs(h.deltaX),absY=Math.abs(h.deltaY),h.distance=absX<absY?absY:absX,h.direction=absX<absY?h.deltaY<0?"down":"up":h.deltaX<0?"left":"right";if(c+c!=0&&h.distance>b.swipeMinDistance&&h.distance<b.swipeMaxDistance&&h.delay>b.swipeMinDelay&&h.delay<b.swipeMaxDelay)return k=0,h.type="direction",a(g,h)}b.simpleTapCapture&&(b.longTapCapture&&window.clearTimeout(l),a(g,{type:"simpletap"}))}var c,d,e,f,j=null,k=0,l=null,m=!1;d=c=f=e=0,this.addEventListener("mousedown",g,!1),b.swipeCapture&&this.addEventListener("mousemove",h,!1),this.addEventListener("mouseup",i,!1),this.unswipe=function(){this.removeEventListener("mousedown",g,!1),this.removeEventListener("mousemove",h,!1),this.removeEventListener("mouseup",i,!1)}})}}),"undefined"==typeof gm&&(gm={}),gm.widgets={},gm.widgets.Widget={templateId:"",enable:function(){},disable:function(){},destroy:function(){},set:function(){},get:function(){},addEventListener:function(){},removeEventListener:function(){},refresh:function(){},element:function(){},render:function(){}},gm.widgets.Channel=function(a){this.type=a,this.handlers={},this.guid=0,this.fired=!1,this.enabled=!0},gm.widgets.Channel.prototype.subscribe=function(a,b,c){if(null!=a){var d=a;return"object"==typeof b&&a instanceof Function&&(d=close(b,a)),c=c||d.observer_guid||a.observer_guid||this.guid++,d.observer_guid=c,a.observer_guid=c,this.handlers[c]=d,c}},gm.widgets.Channel.prototype.subscribeOnce=function(a,b,c){var d=null,e=this,f=function(){a.apply(b||null,arguments),e.unsubscribe(d)};return this.fired&&c?("object"==typeof b&&a instanceof Function&&(a=close(b,a)),a.apply(this,this.fireArgs)):d=this.subscribe(f),d},gm.widgets.Channel.prototype.unsubscribe=function(a){a instanceof Function&&(a=a.observer_guid),this.handlers[a]=null,delete this.handlers[a]},gm.widgets.Channel.prototype.fire=function(a){if(this.enabled){var b=!1,c;for(c in this.handlers){var d=this.handlers[c];d instanceof Function&&(d=0==d.apply(this,arguments),b=b||d)}return this.fired=!0,this.fireArgs=arguments,!b}return!0},gm.widgets.Channel.join=function(a,b){for(var c=b.length,d=function(){--c||a()},e=0;e<c;e++)b[e].fired?c--:b[e].subscribeOnce(d);c||a()},gm.widgets.EventTarget=function(){},gm.widgets.EventTarget.prototype={on:function(a,b){return this["on"+a.toLowerCase()].subscribe(b)},once:function(a,b){return this["on"+a.toLowerCase()].subscribeOnce(b)},un:function(){return this["on"+type.toLowerCase()].unSubscribe(func)}},gm.widgets.THEME="gmc",gm.widgets.LANG="en_US",gm.widgets.THEMES=["cadillac","buick","chevrolet","gmc","chevrolet-volt"],gm.widgets.LANGUAGE_CODES={0:"en_US",1:"de_DE",4:"fr_FR",13:"ar_WW",23:"ru_RU"},gm.widgets.setTheme=function(){"undefined"!=typeof gm&&"undefined"!=typeof gm.vehicle&&"function"==typeof gm.vehicle.getVehicleConfiguration?gm.vehicle.getVehicleConfiguration(function(a){a&&a.theme&&(gm.widgets.THEME=a.theme.toLowerCase()),a&&a.language&&(gm.widgets.LANG="undefined"==typeof gm.widgets.LANGUAGE_CODES[a.language]?gm.widgets.LANGUAGE_CODES[0]:gm.widgets.LANGUAGE_CODES[a.language]),"undefined"!=typeof gm.widgets.Keyboard&&"undefined"!=typeof gm.widgets.Keyboard.instance&&gm.widgets.Keyboard.instance.setLanguage(gm.widgets.LANG)},function(){console.log("ERROR: failed to get config info for widgets")}):10>gm.widgets._ATTEMPT_COUNT&&(gm.widgets._ATTEMPT_COUNT++,setTimeout(gm.widgets.setTheme,500))},gm.widgets._ATTEMPT_COUNT=0,gm.widgets.setTheme();var gm=gm||{};gm.widgets=gm.widgets||{},gm.widgets.About=function(a){var b=a&&a.callBack&&"function"==typeof a.callBack?a.callBack:null,c={title:"About",description:"",buttonsArray:[{label:"OK",callBack:gm.widgets.PopopOutsideClick}]},d="0",a=a||{},e=null,f=new gm.widgets.PopUp(c);f.render(),a.label="",a.callBack=function(){"function"==typeof b&&b.apply(null),gm.info&&gm.info.getMyVersion?(d=gm.info.getMyVersion(),c.description="App version is #.".replace("#",d)):c.description="Application version currently not available",f.setOptions(c),f.show()};var g=function(){"function"==typeof e.callBack&&e.callBack.apply(null)},e=new gm.widgets.Button(a);return e.render=function(a){gm.widgets.Button.prototype.render.apply(e),e.element.className=gm.widgets.util.modClassName(e.element.className,"gm_widget_aboutbutton","add"),e.uiEventManager=new gm.widgets.ElTapHandler({el:e.element,elementId:e.id,callBack:g,disabled:e.disabled}),"function"==typeof a&&a.apply(null)},e},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.Base=function(a){this.id=gm.widgets.IDGenerator.getId(),this.parentElement=a&&a.parentElement?a.parentElement:document.getElementsByTagName("body")[0],this.templateId="gm_widget_base_template",this.defaultLabel="",this.value=a&&a.hasOwnProperty("value")&&"function"!=typeof a.value?a.value:null,this.disabled=a&&a.hasOwnProperty("disabled")&&(!0===a.disabled||"true"===a.disabled)?!0:!1,this.label=a&&a.label?a.label:this.defaultLabel,this.element=null,this.callBack=a&&a.callBack&&"function"==typeof a.callBack?a.callBack:null,this.templateOptions=gm.widgets.TemplateParams.getTemplateData(this.templateId,this)},gm.widgets.Base.prototype.render=function(a){if(this.hasRendered())console.log("The item "+this.id+" has already been rendered");else{var b=this.templateOptions,c=document.createElement("div");c.innerHTML=tmpl(this.templateId,b),b=c.firstChild.cloneNode(!0),this.disabled&&0>b.className.indexOf("disabled")&&(b.className=""===b.className?"disabled":b.className+" disabled"),this.parentElement.appendChild(b),this.element=document.getElementById(this.id)}"function"==typeof a&&a.apply(null)},gm.widgets.Base.prototype.hasRendered=function(){return Boolean(document.getElementById(this.id))},gm.widgets.Base.prototype.attachEventHandles=function(){},gm.widgets.Base.prototype.detachEventHandles=function(){},gm.widgets.Base.prototype.setValue=function(a){"function"!=typeof a&&(this.value=a)},gm.widgets.Base.prototype.getValue=function(){return this.value},gm.widgets.Base.prototype.disable=function(){this.disabled=!0,this.hasRendered()&&(""===this.element.className?this.element.className="disabled":-1===this.element.className.indexOf("disabled")&&(this.element.className+=" disabled"),this.detachEventHandles())},gm.widgets.Base.prototype.enable=function(){this.disabled=!1;if(this.hasRendered()){var a="",a=this.element.className.replace("disabled",""),a=gm.widgets.util.trimString(a);this.element.className=a,this.attachEventHandles()}},gm.widgets.Base.prototype.destroy=function(){this.hasRendered()&&this.parentElement.removeChild(this.element),this.detachEventHandles()},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.Button=function(a){var b=this;this.id=gm.widgets.IDGenerator.getId(),this.parentElement=a&&a.parentElement?a.parentElement:document.getElementsByTagName("body")[0],this.templateId="gm_widget_button_template",this.defaultLabel="",this.value=a&&a.hasOwnProperty("value")&&"function"!=typeof a.value?a.value:null,this.disabled=a&&a.hasOwnProperty("disabled")&&(!0===a.disabled||"true"===a.disabled)?!0:!1,this.label=a&&a.hasOwnProperty("label")?a.label:" ",this.element=null,this.callBack=a&&a.callBack&&"function"==typeof a.callBack?a.callBack:null,this.templateOptions=gm.widgets.TemplateParams.getTemplateData(this.templateId,this),this.width=a&&a.width&&0<a.width?Number(a.width):"",this.height=a&&a.height&&0<a.height?Number(a.height):"",this.uiEventManager={};var c=function(){"function"==typeof b.callBack&&b.callBack.apply(null)};this.render=function(a){gm.widgets.Button.prototype.render.apply(b),this.uiEventManager=new gm.widgets.ElTapHandler({el:this.element,elementId:this.id,callBack:c,disabled:this.disabled}),""!==b.width&&(b.element.style.width=b.width+"px"),""!==b.height&&(b.element.style.height=b.height+"px"),"function"==typeof a&&a.apply(null)},this.disable=function(){gm.widgets.Button.prototype.disable.apply(b),this.hasRendered()&&this.element.setAttribute("disabled","disabled")},this.enable=function(){gm.widgets.Button.prototype.enable.apply(b),this.hasRendered()&&this.element.getAttribute("disabled")&&this.element.removeAttribute("disabled")}},gm.widgets.Button.prototype=Object.create(gm.widgets.Base.prototype),gm.widgets.Button.prototype.constructor=gm.widgets.Button,gm.widgets.Button.prototype.attachEventHandles=function(){this.hasRendered()&&this.uiEventManager.start()},gm.widgets.Button.prototype.detachEventHandles=function(){this.hasRendered()&&this.uiEventManager.stop()},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.Checkbox=function(a){var b=this;this.id=gm.widgets.IDGenerator.getId(),this.parentElement=a&&a.parentElement?a.parentElement:document.getElementsByTagName("body")[0],this.templateId="gm_widget_checkbox_template",this.defaultLabel="",this.value=a&&a.hasOwnProperty("value")&&"function"!=typeof a.value?a.value:"",this.disabled=a&&a.hasOwnProperty("disabled")&&(!0===a.disabled||"true"===a.disabled)?!0:!1,this.label=a&&a.label?a.label:this.defaultLabel,this.element=null,this.callBack=a&&a.callBack&&"function"==typeof a.callBack?a.callBack:null,this.uiEventManager={},this.inputEl=null,this.checked=a&&a.hasOwnProperty("checked")&&("checked"===a.checked||"true"===a.checked||!0===a.checked)?"checked":"",this.templateOptions=gm.widgets.TemplateParams.getTemplateData(this.templateId,this);var c=function(){"checked"===b.checked?(b.checked="",b.inputEl.removeAttribute("checked")):(b.checked="checked",b.inputEl.setAttribute("checked",b.checked));var a=b.element.className,c="remove";"checked"===b.checked&&(c="add"),b.element.className=gm.widgets.util.modClassName(a,"checked",c),"function"==typeof b.callBack&&b.callBack.apply(null)};this.render=function(a){gm.widgets.Checkbox.prototype.render.apply(b),this.inputEl=document.getElementById(""+this.id+"_input"),this.uiEventManager=new gm.widgets.ElTapHandler({el:this.element,elementId:this.id,callBack:c,disabled:this.disabled}),"function"==typeof a&&a.apply(null)},this.disable=function(){gm.widgets.Checkbox.prototype.disable.apply(b),this.hasRendered()&&this.inputEl.setAttribute("disabled","disabled")},this.enable=function(){gm.widgets.Checkbox.prototype.enable.apply(b),this.hasRendered()&&this.inputEl.getAttribute("disabled")&&this.inputEl.removeAttribute("disabled")}},gm.widgets.Checkbox.prototype=Object.create(gm.widgets.Base.prototype),gm.widgets.Checkbox.prototype.constructor=gm.widgets.Checkbox,gm.widgets.Checkbox.prototype.attachEventHandles=function(){this.hasRendered()&&this.uiEventManager.start()},gm.widgets.Checkbox.prototype.detachEventHandles=function(){this.hasRendered()&&this.uiEventManager.stop()},gm.widgets.Checkbox.prototype.setValue=function(a){"function"!=typeof a&&(this.value=a,this.hasRendered()&&(null===this.value||void 0===this.value||""===this.value?this.inputEl.setAttribute("value"," "):this.inputEl.setAttribute("value",this.value)))},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.CloseApp=function(a){var b=a&&a.callBack&&"function"==typeof a.callBack?a.callBack:null,c=null,a=a||{};a.label="",a.callBack=function(){"function"==typeof b&&b.apply(null),gm.system&&gm.system.closeApp&&gm.system.closeApp(function(){console.log("App could not be closed due to failures.")})};var d=function(){"function"==typeof c.callBack&&c.callBack.apply(null)},c=new gm.widgets.Button(a);return c.render=function(a){gm.widgets.Button.prototype.render.apply(c),c.element.className=gm.widgets.util.modClassName(c.element.className,"close_app_button","add"),c.uiEventManager=new gm.widgets.ElTapHandler({el:c.element,elementId:c.id,callBack:d,disabled:c.disabled}),"function"==typeof a&&a.apply(null)},c},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.DatePicker=function(a){var b=this,c=new Date,d=c.getMonth(),e=c.getDate(),c=c.getFullYear(),f="",g=function(){var a=b.dateString;b.dateString=b[b.datehelper.DateFormat[0]]+"/"+b[b.datehelper.DateFormat[1]]+"/"+b[b.datehelper.DateFormat[2]],a!==b.dateString&&"function"==typeof b.callBack&&b.callBack.apply(null),b.inputField.setValue(b.dateString)};this.parentElement=a&&a.parentElement?a.parentElement:document.getElementsByTagName("body")[0],this.disabled=a&&a.hasOwnProperty("disabled")&&(!0===a.disabled||"true"===a.disabled)?!0:!1,this.defaultLabel="",this.label=a&&a.label?a.label:this.defaultLabel,this.callBack=a&&a.callBack&&"function"==typeof a.callBack?a.callBack:null,this.width=a&&a.width&&0<a.width?Number(a.width):"",this.language=a&&a.language?a.language:"",this.yearRange=a&&a.yearRange&&0<a.yearRange?a.yearRange:100,this.datehelper=new gm.widgets.DateHelper({language:this.language}),a&&a.year&&a.month&&a.day&&this.validateDate(a)?(this.month=f=this.getMonthLabel(a),this.year=a.year,this.day=a.day):(this.month=f=this.datehelper.getMonthNames()[d],this.year=c,this.day=e),this.dateString=""+(this[this.datehelper.DateFormat[0]]+"/"+this[this.datehelper.DateFormat[1]]+"/"+this[this.datehelper.DateFormat[2]]),this.currentData=this.datehelper.getMonthsData(this.year),this.inputField=new gm.widgets.TextField({parentElement:this.parentElement,label:this.label,value:this.dateString,width:this.width}),this.modal=new gm.widgets.Modal,this.yearPicker=new gm.widgets.TextSpinner({label:"Year",callBack:function(){b.year=b.yearPicker.value,b.currentData=b.datehelper.getMonthsData(b.year),b.dayPicker.setSelections(b.datehelper.getDaysInMonth(b.month,b.currentData)),b.day=b.dayPicker.value,g()},selections:this.datehelper.getYears(this.year,this.yearRange)}),this.monthPicker=new gm.widgets.TextSpinner({label:"Month",callBack:function(){b.month=b.monthPicker.value,b.dayPicker.setSelections(b.datehelper.getDaysInMonth(b.month,b.currentData)),b.day=b.dayPicker.value,g()},selections:this.datehelper.getMonthNames()}),this.dayPicker=new gm.widgets.TextSpinner({label:"Day",callBack:function(){b.day=b.dayPicker.value,g()},selections:this.datehelper.getDaysInMonth(this.month,this.currentData)}),this.okBtn=new gm.widgets.Button({label:"Ok",callBack:function(){b.hideDatePicker()},width:120,height:90}),this.inputEventHandler=null},gm.widgets.DatePicker.prototype.render=function(a){if(!this.inputField.hasRendered()){var b=this,c=0,d=this.datehelper.DateFormat,e=d.length;this.inputField.render(),this.inputField.element.onkeypress=function(){return!1},this.modal.render();var f=this.modal.element.getElementsByClassName("firstRow")[0],g=this.modal.element.getElementsByClassName("secondRow")[0];this.monthPicker.parentElement=f,this.dayPicker.parentElement=f,this.yearPicker.parentElement=f;for(this.okBtn.parentElement=g;c<e;c++)this[d[c]+"Picker"].render();this.okBtn.render(),this.inputEventHandler=new gm.widgets.ElTapHandler({el:this.inputField.element,elementId:this.inputField.id,callBack:function(){b.showDatePicker()},disabled:this.disabled})}"function"==typeof a&&a.apply(null)},gm.widgets.DatePicker.YearAbsMin=2e3,gm.widgets.DatePicker.prototype.disable=function(){this.modal.hide(),this.inputField.disable(),this.inputEventHandler.stop()},gm.widgets.DatePicker.prototype.enable=function(){this.inputField.enable(),this.inputEventHandler.start()},gm.widgets.DatePicker.prototype.showDatePicker=function(){this.modal.show(),this.dayPicker.setValue(this.day),this.monthPicker.setValue(this.month),this.yearPicker.setValue(this.year)},gm.widgets.DatePicker.prototype.hideDatePicker=function(){this.modal.hide()},gm.widgets.DatePicker.prototype.validateDate=function(a){var b=a&&a.month&&this.datehelper.isValidMonth(a.month),c=a&&a.year&&!isNaN(Number(a.year))&&Number(a.year)>=gm.widgets.DatePicker.YearAbsMin,d=a&&a.day&&c&&b,e=!1,f=this.getMonthLabel(a);if(d)for(var d=this.datehelper.getMonthsData(a.year),g=0,h=d.length;g<h;g++)d[g].name===f&&(e=Number(a.day)<=d[g].lastDay);return c&&b&&e},gm.widgets.DatePicker.prototype.getMonthLabel=function(a){var b="";return b=isNaN(Number(a.month))?a.month:this.datehelper.getMonthNames()[Number(a.month-1)]},gm.widgets.DatePicker.prototype.setValue=function(a){if(this.validateDate(a)){var b=this.getMonthLabel(a);this.yearRange=a&&a.yearRange&&0<a.yearRange?a.yearRange:this.yearRange,this.month=b,this.year=Number(a.year),this.day=Number(a.day),this.dateString=""+(this[this.datehelper.DateFormat[0]]+"/"+this[this.datehelper.DateFormat[1]]+"/"+this[this.datehelper.DateFormat[2]]),this.currentData=this.datehelper.getMonthsData(this.year),this.yearPicker.setSelections(this.datehelper.getYears(this.year,this.yearRange)),this.dayPicker.setSelections(this.datehelper.getDaysInMonth(this.month,this.currentData)),this.dayPicker.setValue(this.day),this.monthPicker.setValue(this.month),this.yearPicker.setValue(this.year),this.inputField.setValue(this.dateString)}},gm.widgets.DatePicker.prototype.hasRendered=function(){return this.inputField.hasRendered()},gm.widgets.DatePicker.prototype.getValue=function(){return{month:this.month,day:this.day,year:this.year,datestring:this.dateString}},gm.widgets.DatePicker.prototype.destroy=function(){this.inputEventHandler.stop(),this.inputField.destroy(),this.dayPicker.destroy(),this.monthPicker.destroy(),this.yearPicker.destroy(),this.modal.destroy()},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.ElTapHandler=function(a){var b=this,c,d;this.el=a.el,this.elementId=a.elementId,this.callBack=a.callBack,this.disabled=a.disabled,this.events={};var e=function(){d=c=null},f=function(){b.events={}},g=function(){b.events.click||b.events.touchstart&&b.events.touchend?(f(),e(),"function"==typeof b.callBack&&b.callBack.apply(null)):(f(),e())},h=function(a){a.preventDefault(),a.stopPropagation(),b.events.click="click",g()},i=function(a){c=a.touches[0].clientX,d=a.touches[0].clientY,f(),b.events.touchstart="touchstart",a.preventDefault(),a.stopPropagation()},j=function(a){var h,i;h=!1,h=a.changedTouches[0].clientX,i=a.changedTouches[0].clientY,h=30>=Math.abs(h-c)&&30>=Math.abs(i-d),b.events.touchstart&&h?(b.events.touchend="touchend",g()):(f(),e()),a.preventDefault(),a.stopPropagation()},k=function(){b.el.removeEventListener("touchstart",i,!1),b.el.removeEventListener("touchend",j,!1),b.el.removeEventListener("click",h,!1)};this.start=function(){this.disabled=!1,f(),e(),k(),b.el.addEventListener("touchstart",i,!1),b.el.addEventListener("touchend",j,!1),b.el.addEventListener("click",h,!1)},this.stop=function(){f(),e(),this.disabled=!0,k()},this.disabled||this.start()},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.InputBlurHandler=function(a){var b=this;this.el=a.el,this.elementId=a.elementId,this.callBack=a.callBack,this.disabled=a.disabled;var c=function(){"function"==typeof b.callBack&&b.callBack.apply(null)},d=function(){b.el.removeEventListener("blur",c,!1)};this.start=function(){this.disabled=!1,d(),b.el.addEventListener("blur",c,!1)},this.stop=function(){this.disabled=!0,d()},this.disabled||this.start()},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.ModalInstances=gm.widgets.ModalInstances||{},gm.widgets.Modal=function(a){var b=this;this.id=gm.widgets.IDGenerator.getId(),this.parentElement=document.getElementsByTagName("body")[0],this.templateId="gm_widget_modal_template",this.bg=this.element=null,this.width=a&&a.hasOwnProperty("width")?a.width:"100%",this.height=a&&a.hasOwnProperty("height")?a.height:"auto",this.left=a&&a.hasOwnProperty("left")?a.left:"0",this.top=a&&a.hasOwnProperty("top")?a.top:"100px",this.origTopNum=parseInt(this.top),this.bgTopDif=0+parseInt(this.top),this.templateOptions=gm.widgets.TemplateParams.getTemplateData(this.templateId,this),this.render=function(){if(!this.hasRendered()){gm.widgets.Modal.prototype.render.apply(b),this.element=document.getElementById(this.id);var a=document.createElement("div");a.className="gm_widget_modal_bg hidden",a.setAttribute("id",this.id+"_bg"),document.getElementsByTagName("body")[0].appendChild(a),this.bg=document.getElementById(this.id+"_bg"),this.element.style.width=this.width,this.element.style.height=this.height,this.element.style.left=this.left,this.element.style.top=this.top}},gm.widgets.ModalInstances[this.id]=this},gm.widgets.Modal.prototype=Object.create(gm.widgets.Base.prototype),gm.widgets.Modal.prototype.constructor=gm.widgets.Modal,gm.widgets.Modal.prototype.show=function(){if(this.hasRendered()){this.top=""+(this.parentElement.scrollTop+this.origTopNum)+"px",this.element.style.top=this.top,this.bg.style.top=""+(parseInt(this.top)-this.bgTopDif)+"px";var a=this.bg.className;this.element.className=gm.widgets.util.modClassName(this.element.className,"hidden","remove"),this.bg.className=gm.widgets.util.modClassName(a,"hidden","remove");var b=this.id;gm.widgets.ModalInstances[b].outsideclick=function(a){gm.widgets.ModalOutsideClick(b,a)},document.addEventListener("click",gm.widgets.ModalInstances[b].outsideclick)}},gm.widgets.Modal.prototype.hide=function(){if(this.hasRendered()){var a=this.id,b=this.bg.className;this.element.className=gm.widgets.util.modClassName(this.element.className,"hidden","add"),this.bg.className=gm.widgets.util.modClassName(b,"hidden","add"),document.removeEventListener("click",gm.widgets.ModalInstances[a].outsideclick)}},gm.widgets.ModalOutsideClick=function(a,b){if(gm.widgets.ModalInstances[a]){var c=gm.widgets.ModalInstances[a],d=c.element.getElementsByClassName("firstRow")[0],e=c.element.getElementsByClassName("secondRow")[0];b&&b.target!==c.element&&b.target!==d&&b.target!==e&&b.target.parentNode!==d&&b.target.parentNode.parentNode!==d&&b.target.parentNode!==e&&b.target.parentNode.parentNode!==e&&c.hide()}},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.NumberField=function(a){var b=this,c=0;this.id=gm.widgets.IDGenerator.getId(),this.templateId="gm_widget_numberfield_template",this.defaultLabel="",this.inputElement=this.element=null,this.changeHandler={},this.parentElement=a&&a.parentElement?a.parentElement:document.getElementsByTagName("body")[0],this.disabled=a&&a.hasOwnProperty("disabled")&&(!0===a.disabled||"true"===a.disabled)?!0:!1,this.label=a&&a.label?a.label:this.defaultLabel,this.callBack=a&&a.callBack&&"function"==typeof a.callBack?a.callBack:null,this.width=a&&a.width&&0<a.width?Number(a.width):"",this.upButton=new gm.widgets.Button({label:"+",disabled:this.disabled}),this.downButton=new gm.widgets.Button({label:"-",disabled:this.disabled}),this.value=a&&a.hasOwnProperty("value")&&!isNaN(a.value)?Number(a.value):0,this.min=a&&a.hasOwnProperty("min")&&!isNaN(a.min)?Number(a.min):-999999999,this.max=a&&a.hasOwnProperty("max")&&!isNaN(a.max)?Number(a.max):999999999,this.stepNumber=a&&a.hasOwnProperty("stepNumber")&&0<a.stepNumber&&Math.abs(this.max-this.min)>=a.stepNumber?Number(a.stepNumber):1;if(this.value<this.min||this.value>this.max||this.max<=this.min)this.value=0,this.min=-999999999,this.max=999999999,this.stepNumber=1;this.defaultValue=c=this.value,this.templateOptions=gm.widgets.TemplateParams.getTemplateData(this.templateId,this),this.checkForChange=function(){c!=this.value&&(c=this.value,"function"==typeof b.callBack&&b.callBack.apply(null))},this.render=function(a){if(!this.hasRendered()){gm.widgets.NumberField.prototype.render.apply(b),this.inputElement=document.getElementById(""+this.id+"_input"),this.inputElement.setAttribute("step",this.stepNumber);var c=this.element.getElementsByClassName("inputWrapper")[0];this.upButton.parentElement=c,this.upButton.callBack=function(){b.stepUp()},this.downButton.parentElement=c,this.downButton.callBack=function(){b.stepDown()},this.upButton.render(),this.downButton.render(),this.changeHandler=new gm.widgets.InputBlurHandler({el:this.inputElement,elementId:this.inputElement.getAttribute("id"),callBack:function(){b.setInput()},disabled:this.disabled}),""!==this.width&&(this.element.style.width=this.width+"px")}"function"==typeof a&&a.apply(null)},this.disable=function(){gm.widgets.NumberField.prototype.disable.apply(b),this.hasRendered()&&(this.inputElement.setAttribute("disabled","disabled"),this.downButton.disable(),this.upButton.disable(),this.changeHandler.stop())},this.enable=function(){gm.widgets.NumberField.prototype.enable.apply(b),this.hasRendered()&&this.inputElement.getAttribute("disabled")&&(this.inputElement.removeAttribute("disabled"),this.downButton.enable(),this.upButton.enable(),this.changeHandler.start())}},gm.widgets.NumberField.prototype=Object.create(gm.widgets.Base.prototype),gm.widgets.NumberField.prototype.constructor=gm.widgets.NumberField,gm.widgets.NumberField.prototype.validateInput=function(a){var b=!1;return!isNaN(a)&&a<=this.max&&a>=this.min&&(b=!0),b},gm.widgets.NumberField.prototype.setInput=function(){var a=this.inputElement.valueAsNumber,b=this.max,c=this.min,d=this.defaultValue;isNaN(a)||(d=a<=c?c:a>=b?b:a),this.value=d,this.inputElement.value=d,this.checkForChange()},gm.widgets.NumberField.prototype.stepUp=function(){var a=Number(this.value+this.stepNumber);this.value=this.validateInput(a)?a:this.max,this.inputElement.value=this.value,this.checkForChange()},gm.widgets.NumberField.prototype.stepDown=function(){var a=Number(this.value-this.stepNumber);this.value=this.validateInput(a)?a:this.min,this.inputElement.value=this.value,this.checkForChange()},gm.widgets.NumberField.prototype.setValue=function(a){this.validateInput(a)&&(this.value=Number(a),this.inputElement.value=a,this.checkForChange())},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.Singletons=gm.widgets.Singletons||{},gm.widgets.PopUp=function(a){var b=this;return this.id=gm.widgets.IDGenerator.getId(),this.parentElement=document.getElementsByTagName("body")[0],this.templateId="gm_widget_popup_template",this.bg=this.element=null,this.width=a&&a.hasOwnProperty("width")?a.width:"100%",this.height=a&&a.hasOwnProperty("height")?a.height:"100%",this.left=a&&a.hasOwnProperty("left")?a.left:"0",this.top=a&&a.hasOwnProperty("top")?a.top:"0",this.origTopNum=parseInt(this.top),this.bgTopDif=0+parseInt(this.top),this.title=a&&a.hasOwnProperty("title")?a.title:"",this.description=a&&a.hasOwnProperty("description")?a.description:"",this.buttonsArray=a&&a.hasOwnProperty("buttonsArray")?a.buttonsArray:[],this.headerDiv=this.buttonsDiv=this.descriptionDiv=this.titleDiv=null,this.templateOptions=gm.widgets.TemplateParams.getTemplateData(this.templateId,this),this.render=function(a){if(!this.hasRendered()){var c={title:this.title,description:this.description,buttonsArray:this.buttonsArray},d=document.createElement("div");d.className="hidden",d.setAttribute("id","popup_bg"),document.getElementsByTagName("body")[0].appendChild(d),gm.widgets.PopUp.prototype.render.apply(b),this.bg=document.getElementById("popup_bg"),this.headerDiv=this.element.getElementsByClassName("gm_widget_popup_header")[0],this.titleDiv=this.element.getElementsByClassName("gm_widget_popup_title")[0],this.descriptionDiv=this.element.getElementsByClassName("gm_widget_popup_description")[0],this.buttonsDiv=this.element.getElementsByClassName("gm_widget_popup_buttons")[0],d=this.element.getElementsByClassName("gm_widget_popup_close_container")[0],(new gm.widgets.Button({callBack:function(){b.hide()},parentElement:d})).render(),this.element.style.width=this.width,this.element.style.height=this.height,this.element.style.left=this.left,this.element.style.top=this.top,this.setOptions(c),"function"==typeof a&&a.apply(null)}},gm.widgets.Singletons.PopUpInstance||(gm.widgets.Singletons.PopUpInstance=this),gm.widgets.Singletons.PopUpInstance},gm.widgets.PopUp.prototype=Object.create(gm.widgets.Base.prototype),gm.widgets.PopUp.prototype.constructor=gm.widgets.PopUp,gm.widgets.PopUp.prototype.show=function(){if(this.hasRendered()){this.top=""+(this.parentElement.scrollTop+this.origTopNum)+"px",this.element.style.top=this.top,this.bg.style.top=""+(parseInt(this.top)-this.bgTopDif)+"px";var a=this.bg.className;this.element.className=gm.widgets.util.modClassName(this.element.className,"hidden","remove"),this.bg.className=gm.widgets.util.modClassName(a,"hidden","remove"),document.addEventListener("click",gm.widgets.PopopOutsideClick)}},gm.widgets.PopUp.prototype.hide=function(){if(this.hasRendered()){var a=this.bg.className;this.element.className=gm.widgets.util.modClassName(this.element.className,"hidden","add"),this.bg.className=gm.widgets.util.modClassName(a,"hidden","add"),document.removeEventListener("click",gm.widgets.PopopOutsideClick)}},gm.widgets.PopUp.prototype.setOptions=function(a){this.title=a&&a.hasOwnProperty("title")?a.title:"",this.description=a&&a.hasOwnProperty("description")?a.description:"",this.buttonsArray=a&&a.hasOwnProperty("buttonsArray")?a.buttonsArray:[];if(this.hasRendered()){this.titleDiv.innerHTML=this.title,this.descriptionDiv.innerHTML=this.description,this.buttonsDiv.innerHTML="";for(a=0;a<this.buttonsArray.length;a++){var b=this.buttonsArray[a];b.parentElement=this.buttonsDiv,(new gm.widgets.Button(b)).render()}}},gm.widgets.PopopOutsideClick=function(a){a&&(a.preventDefault(),a.stopPropagation());if(gm.widgets.Singletons.PopUpInstance){var b=gm.widgets.Singletons.PopUpInstance;a&&a.target!==b.element&&a.target!==b.titleDiv&&a.target!==b.headerDiv&&a.target!==b.descriptionDiv&&a.target!==b.buttonsDiv?b.hide():a||b.hide()}},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.RadioButton=function(a){var b=this;this.id=gm.widgets.IDGenerator.getId(),this.templateId="gm_widget_radiobutton_template",this.defaultLabel="",this.value=null,this.parentElement=a&&a.parentElement?a.parentElement:document.getElementsByTagName("body")[0],this.disabled=a&&a.hasOwnProperty("disabled")&&(!0===a.disabled||"true"===a.disabled)?!0:!1,this.label=a&&a.label?a.label:this.defaultLabel,this.callBack=a&&a.callBack&&"function"==typeof a.callBack?a.callBack:null,this.groupName=a&&a.hasOwnProperty("groupName")?a.groupName:this.id,this.choices=a&&a.choices?a.choices:[],this.element=null,this.uiControlHash={},this.divElements=[],this.inputElements=[],this.controls=[],this.templateOptions=gm.widgets.TemplateParams.getTemplateData(this.templateId,this);var c=function(a,c,d){return function(){a.className=gm.widgets.util.modClassName(a.className,"checked","add"),d.setAttribute("checked","checked");for(var e=0,g=b.divElements,h=b.inputElements,i=g.length,j="",j="";e<i;e++)if(!c||g[e].getAttribute("id")!==c)j=g[e].className,j=gm.widgets.util.modClassName(j,"checked","remove"),g[e].className=j,h[e].removeAttribute("checked");b.value=d.getAttribute("value"),"function"==typeof b.callBack&&b.callBack.apply(null)}};this.render=function(a){if(!this.hasRendered()){var d=[],e=0;gm.widgets.RadioButton.prototype.render.apply(b),this.uiControlHash={},this.divElements=[],this.inputElements=[],this.controls=[],this.element=document.getElementById(this.id);for(d=this.element.getElementsByClassName("gm_widget_radiobutton");e<d.length;e++){var f=d[e],g=f.getAttribute("id"),h=document.getElementById(g+"_input"),i=g+"_input",j=h.getAttribute("value"),k=h.getAttribute("disabled"),l={},i=c(f,g,h,i,j),k={el:f,elementId:g,callBack:i,disabled:k};this.divElements.push(f),this.inputElements.push(h),l=new gm.widgets.ElTapHandler(k),this.controls.push(l),this.uiControlHash[g]=l,h.getAttribute("checked")&&(this.value=h.getAttribute("value"))}this.disabled&&this.disable()}"function"==typeof a&&a.apply(null)},this.disable=function(){gm.widgets.RadioButton.prototype.disable.apply(b);if(this.hasRendered())for(var a=0,c=this.divElements,d=this.inputElements,e=this.divElements.length;a<e;a++)c[a].className=gm.widgets.util.modClassName(c[a].className,"disabled","add"),d[a].setAttribute("disabled","disabled")},this.enable=function(){gm.widgets.RadioButton.prototype.enable.apply(b);if(this.hasRendered())for(var a=0,c=this.divElements,d=this.inputElements,e=this.divElements.length;a<e;a++)c[a].className=gm.widgets.util.modClassName(c[a].className,"disabled","remove"),d[a].removeAttribute("disabled")}},gm.widgets.RadioButton.prototype=Object.create(gm.widgets.Base.prototype),gm.widgets.RadioButton.prototype.constructor=gm.widgets.RadioButton,gm.widgets.RadioButton.prototype.attachEventHandles=function(){if(this.hasRendered())for(var a=0,b=this.controls.length;a<b;a++)this.controls[a].start()},gm.widgets.RadioButton.prototype.detachEventHandles=function(){if(this.hasRendered())for(var a=0,b=this.controls.length;a<b;a++)this.controls[a].stop()},gm.widgets.RadioButton.prototype.setValue=function(a){if("function"!=typeof a&&this.hasRendered())for(var b=this.inputElements,c=this.divElements,d=0,e=b.length,f;d<e;d++)f=b[d],a===f.getAttribute("value")&&(this.value=a,c[d].click())},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.SetFavorite=function(a){var b=a&&a.callBack&&"function"==typeof a.callBack?a.callBack:null,c={title:"Set Favorite",description:"",buttonsArray:[{label:"OK",callBack:gm.widgets.PopopOutsideClick}]},a=a||{},d=null,e=new gm.widgets.PopUp(c);e.render();var f=function(a){a="App is successfully set as a Favorite App at #.".replace("#",""+a),c.description=a},g=function(){c.description="Failed to set App as a Favorite"};a.label="",a.callBack=function(){"function"==typeof b&&b.apply(null),gm.ui&&gm.ui.setFavorite?gm.ui.setFavorite(f,g,{}):c.description="Set favorite application functionality currently not available",e.setOptions(c),e.show()};var h=function(){"function"==typeof d.callBack&&d.callBack.apply(null)},d=new gm.widgets.Button(a);return d.render=function(a){gm.widgets.Button.prototype.render.apply(d),d.element.className=gm.widgets.util.modClassName(d.element.className,"gm_widget_favbutton","add"),d.uiEventManager=new gm.widgets.ElTapHandler({el:d.element,elementId:d.id,callBack:h,disabled:d.disabled}),"function"==typeof a&&a.apply(null)},d},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.TextChangeHandler=function(a){var b=this;this.el=a.el,this.elementId=a.elementId,this.callBack=a.callBack,this.disabled=a.disabled;var c=function(){"function"==typeof b.callBack&&b.callBack.apply(null)},d=function(){b.el.removeEventListener("keyup",c,!1)};this.start=function(){this.disabled=!1,d(),b.el.addEventListener("keyup",c,!1)},this.stop=function(){this.disabled=!0,d()},this.disabled||this.start()},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.TextField=function(a){var b=this,c=null;this.id=gm.widgets.IDGenerator.getId(),this.templateId="gm_widget_textfield_template",this.defaultLabel="",this.inputElement=this.element=null,this.changeHandler={},this.inputType=a&&a.inputType&&("text"===a.inputType||"password"===a.inputType)?a.inputType:"text",this.parentElement=a&&a.parentElement?a.parentElement:document.getElementsByTagName("body")[0],this.disabled=a&&a.hasOwnProperty("disabled")&&(!0===a.disabled||"true"===a.disabled)?!0:!1,this.label=a&&a.label?a.label:this.defaultLabel,this.callBack=a&&a.callBack&&"function"==typeof a.callBack?a.callBack:null,this.templateOptions=gm.widgets.TemplateParams.getTemplateData(this.templateId,this),this.width=a&&a.width&&0<a.width?Number(a.width):"";var d=function(){c=b.inputElement.value,"function"==typeof b.callBack&&b.callBack.apply(null)};this.render=function(c){this.hasRendered()||(gm.widgets.TextField.prototype.render.apply(b),this.inputElement=document.getElementById(""+this.id+"_input"),this.changeHandler=new gm.widgets.TextChangeHandler({el:this.inputElement,elementId:this.id,callBack:d,disabled:this.disabled}),""!==b.width&&(b.element.style.width=b.width+"px"),a.hasOwnProperty("value")&&"string"==typeof a.value&&b.setValue(a.value)),"function"==typeof c&&c.apply(null)},this.getValue=function(){return c},this.setValue=function(a){"string"==typeof a&&(c=""+a,this.inputElement.value=c)},this.disable=function(){gm.widgets.TextField.prototype.disable.apply(b),this.hasRendered()&&this.inputElement.setAttribute("disabled","disabled")},this.enable=function(){gm.widgets.TextField.prototype.enable.apply(b),this.hasRendered()&&this.inputElement.getAttribute("disabled")&&this.inputElement.removeAttribute("disabled")}},gm.widgets.TextField.prototype=Object.create(gm.widgets.Base.prototype),gm.widgets.TextField.prototype.constructor=gm.widgets.TextField,gm.widgets.TextField.prototype.attachEventHandles=function(){this.hasRendered()&&this.changeHandler.start()},gm.widgets.TextField.prototype.detachEventHandles=function(){this.hasRendered()&&this.changeHandler.stop()},gm.widgets.PasswordField=gm.widgets.TextField,gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.TextSpinner=function(a){var b=this,c=0;this.id=gm.widgets.IDGenerator.getId(),this.templateId="gm_widget_textspinner_template",this.defaultLabel="",this.element=null,this.parentElement=a&&a.parentElement?a.parentElement:document.getElementsByTagName("body")[0],this.disabled=a&&a.hasOwnProperty("disabled")&&(!0===a.disabled||"true"===a.disabled)?!0:!1,this.label=a&&a.label?a.label:this.defaultLabel,this.callBack=a&&a.callBack&&"function"==typeof a.callBack?a.callBack:null,this.width=a&&a.width&&0<a.width?Number(a.width):"",this.upButton=new gm.widgets.Button({label:"+",disabled:this.disabled}),this.downButton=new gm.widgets.Button({label:"-",disabled:this.disabled}),this.value=a&&a.hasOwnProperty("value")?a.value:null,this.selections=a&&a.hasOwnProperty("selections")?a.selections:[],this.listElement=null,this.currentIndex=0,this.cycleThrough=a&&a.cycleThrough?a.cycleThrough:!1,this.templateOptions=gm.widgets.TemplateParams.getTemplateData(this.templateId,this),this.checkForChange=function(){c!==this.currentIndex&&(c=this.currentIndex,this.value=this.selections[this.currentIndex],"function"==typeof b.callBack&&b.callBack.apply(null))},this.render=function(a){if(!this.hasRendered()){gm.widgets.TextSpinner.prototype.render.apply(b);var c=this.element.getElementsByClassName("buttonWrapper")[0];this.upButton.parentElement=c,this.upButton.callBack=function(){b.scrollToIndex(b.currentIndex+1)},this.downButton.parentElement=c,this.downButton.callBack=function(){b.scrollToIndex(b.currentIndex-1)},this.upButton.render(),this.downButton.render(),this.listElement=this.element.getElementsByClassName("selections")[0],new gm.widgets.ElTapHandler({el:this.listElement,elementId:"na",callBack:function(){return!1}}),""!==this.width&&(this.element.style.width=this.width+"px"),null!==this.value&&this.setValue(this.value),this.value=this.selections[this.currentIndex]}"function"==typeof a&&a.apply(null)},this.disable=function(){gm.widgets.TextSpinner.prototype.disable.apply(b),this.hasRendered()&&(this.downButton.disable(),this.upButton.disable())},this.enable=function(){gm.widgets.TextSpinner.prototype.enable.apply(b),this.hasRendered()&&(this.downButton.enable(),this.upButton.enable())}},gm.widgets.TextSpinner.prototype=Object.create(gm.widgets.Base.prototype),gm.widgets.TextSpinner.prototype.constructor=gm.widgets.TextSpinner,gm.widgets.TextSpinner.prototype.scrollToIndex=function(a){var b=this.listElement,c=window.getComputedStyle(b).height,d=this.selections.length,c=Math.round(parseInt(c)/d),e=a,f="";this.cycleThrough?0==this.currentIndex&&0>a?e=d-1:this.currentIndex==d-1&&a>d-1&&(e=0):0>=a?e=0:a>=d-1&&(e=d-1),f=-1*c*this.currentIndex,b.style.marginTop=f+"px",e!==this.currentIndex&&(this.currentIndex=e,b.style.marginTop=""+ -1*c*e+"px",this.checkForChange())},gm.widgets.TextSpinner.prototype.setValue=function(a){for(var b=0,c=this.selections,d=c.length;b<d;b++)""+c[b]==""+a&&this.scrollToIndex(b)},gm.widgets.TextSpinner.prototype.setSelections=function(a){for(var b="",c=this.selections,d=0;d<a.length;d++)b+='<li id="'+this.id+"_option_"+(""+d)+'">'+(""+a[d])+"</li>";this.listElement.innerHTML=b,this.selections=a,gm.widgets.util.isInList(this.selections,this.value)?this.setValue(this.value):this.currentIndex>=c.length-1||this.currentIndex>=this.selections.length-1?this.scrollToIndex(this.selections.length-1):this.scrollToIndex(0)},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.TimePicker=function(a){var b=this,c=function(){var a=b.timeString;b.timeString=""+b.hour+":"+(""+b.minute)+":"+(""+b.second)+" "+b.timeofday.toUpperCase(),a!==b.timeString&&"function"==typeof b.callBack&&b.callBack.apply(null),b.inputField.setValue(b.timeString)};this.parentElement=a&&a.parentElement?a.parentElement:document.getElementsByTagName("body")[0],this.disabled=a&&a.hasOwnProperty("disabled")&&(!0===a.disabled||"true"===a.disabled)?!0:!1,this.defaultLabel="",this.label=a&&a.label?a.label:this.defaultLabel,this.callBack=a&&a.callBack&&"function"==typeof a.callBack?a.callBack:null,this.width=a&&a.width&&0<a.width?Number(a.width):"",this.language=a&&a.language?a.language:"",this.hours="12,01,02,03,04,05,06,07,08,09,10,11".split(","),this.minutes=[];for(var d=0;60>d;d++)this.minutes.push(1==(""+d).length?"0"+d:""+d);this.seconds=this.minutes.concat(),this.timesofday=["AM","PM"],this.defaultHour="12",this.defaultSecond=this.defaultMinute="00",this.defaultTimeOfDay="AM",this.hourMin=0,this.hourMax=12,this.minuteMin=0,this.minuteMax=59,this.secondMin=0,this.secondMax=59;var d=a&&a.hour&&!isNaN(a.hour)&&Number(a.hour)>=this.hourMin&&Number(a.hour)<=this.hourMax,e=a&&a.minute&&!isNaN(a.minute)&&Number(a.minute)>=this.minuteMin&&Number(a.minute)<=this.minuteMax,f=a&&a.second&&!isNaN(a.second)&&Number(a.second)>=this.secondMin&&Number(a.second)<=this.secondMax,g=a&&a.timeofday&&("AM"==a.timeofday.toUpperCase()||"PM"==a.timeofday.toUpperCase());d&&g?(this.hour=a.hour,this.minute=e?a.minute:this.defaultMinute,this.second=f?a.second:this.defaultSecond,this.timeofday=a.timeofday.toUpperCase()):(this.hour=this.defaultHour,this.minute=this.defaultMinute,this.second=this.defaultSecond,this.timeofday=this.defaultTimeOfDay),this.formatTime(),this.timeString=""+this.hour+":"+(""+this.minute)+":"+(""+this.second)+" "+b.timeofday.toUpperCase(),this.modalDisplayed=!1,this.inputField=new gm.widgets.TextField({parentElement:this.parentElement,label:this.label,value:this.timeString,width:this.width}),this.modal=new gm.widgets.Modal,this.hourPicker=new gm.widgets.TextSpinner({label:"Hour",callBack:function(){b.hour=b.hourPicker.value,c()},selections:this.hours,cycleThrough:!0}),this.minutePicker=new gm.widgets.TextSpinner({label:"Minute",callBack:function(){b.minute=b.minutePicker.value,c()},selections:this.minutes,cycleThrough:!0}),this.secondPicker=new gm.widgets.TextSpinner({label:"Second",callBack:function(){b.second=b.secondPicker.value,c()},selections:this.seconds,cycleThrough:!0}),this.dayTimePicker=new gm.widgets.TextSpinner({label:"AM/PM",callBack:function(){b.timeofday=b.dayTimePicker.value,c()},selections:this.timesofday,cycleThrough:!1}),this.okBtn=new gm.widgets.Button({label:"Ok",callBack:function(){b.hideTimePicker()},width:120,height:90}),this.inputEventHandler=null},gm.widgets.TimePicker.prototype.render=function(a){if(!this.inputField.hasRendered()){var b=this;this.inputField.render(),this.inputField.element.onkeypress=function(){return!1},this.modal.render();var c=this.modal.element.getElementsByClassName("firstRow")[0],d=this.modal.element.getElementsByClassName("secondRow")[0];this.hourPicker.parentElement=c,this.minutePicker.parentElement=c,this.secondPicker.parentElement=c,this.dayTimePicker.parentElement=c,this.okBtn.parentElement=d,this.hourPicker.render(),this.minutePicker.render(),this.secondPicker.render(),this.dayTimePicker.render(),this.okBtn.render(),this.inputEventHandler=new gm.widgets.ElTapHandler({el:this.inputField.element,elementId:this.inputField.id,callBack:function(){b.showTimePicker()},disabled:this.disabled})}"function"==typeof a&&a.apply(null)},gm.widgets.TimePicker.prototype.disable=function(){this.modal.hide(),this.inputField.disable(),this.inputEventHandler.stop()},gm.widgets.TimePicker.prototype.enable=function(){this.inputField.enable(),this.inputEventHandler.start()},gm.widgets.TimePicker.prototype.showTimePicker=function(){this.modal.show(),this.hourPicker.setValue(this.hour),this.minutePicker.setValue(this.minute),this.secondPicker.setValue(this.second),this.dayTimePicker.setValue(this.timeofday)},gm.widgets.TimePicker.prototype.hideTimePicker=function(){this.modal.hide()},gm.widgets.TimePicker.prototype.setValue=function(a){var b=a&&a.hour&&!isNaN(a.hour)&&Number(a.hour)>=this.hourMin&&Number(a.hour)<=this.hourMax,c=a&&a.minute&&!isNaN(a.minute)&&Number(a.minute)>=this.minuteMin&&Number(a.minute)<=this.minuteMax,d=a&&a.second&&!isNaN(a.second)&&Number(a.second)>=this.secondMin&&Number(a.second)<=this.secondMax,e=a&&a.timeofday&&("AM"==a.timeofday.toUpperCase()||"PM"==a.timeofday.toUpperCase());b&&e&&(this.hour=a.hour,this.minute=c?a.minute:this.defaultMinute,this.second=d?a.second:this.defaultSecond,this.timeofday=a.timeofday.toUpperCase(),this.formatTime(),this.timeString=""+this.hour+":"+(""+this.minute)+":"+(""+this.second)+" "+this.timeofday.toUpperCase(),this.hourPicker.setValue(this.hour),this.minutePicker.setValue(this.minute),this.secondPicker.setValue(this.second),this.dayTimePicker.setValue(this.timeofday),this.inputField.setValue(this.timeString))},gm.widgets.TimePicker.prototype.formatTime=function(){this.hour=1<(""+this.hour).length?""+this.hour:"0"+this.hour,this.minute=1<(""+this.minute).length?""+this.minute:"0"+this.minute,this.second=1<(""+this.second).length?""+this.second:"0"+this.second},gm.widgets.TimePicker.prototype.hasRendered=function(){return this.inputField.hasRendered()},gm.widgets.TimePicker.prototype.getValue=function(){return{hour:this.hour,minute:this.minute,second:this.second,timeofday:this.timeofday}},gm.widgets.TimePicker.prototype.destroy=function(){this.inputEventHandler.stop(),this.inputField.destroy(),this.hourPicker.destroy(),this.minutePicker.destroy(),this.secondPicker.destroy(),this.dayTimePicker.destroy(),this.modal.destroy()},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.dateUtil={cachedMonthsData:{}},gm.widgets.dateUtil.MonthLabels={en_US:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),fr_CA:"Janvier,Février,Mars,Avril,Mai,Juin,Juillet,Août,Septembre,Octobre,Novembre,Décembre".split(","),es_US:"Enero,Febrero,Marzo,Abril,Mayo,Junio,Julio,Agosto,Septiembre,Octubre,Noviembre,Diciembre".split(",")},gm.widgets.dateUtil.DateFormats={en_US:["month","day","year"],fr_CA:["day","month","year"],es_US:["month","day","year"]},gm.widgets.dateUtil.DefaultLanguageCode="en_US",gm.widgets.dateUtil.SelectedMonthLabels=[],gm.widgets.dateUtil.DateFormat=[],gm.widgets.dateUtil.setMonthLabels=function(a){var b=gm.widgets.LANG?gm.widgets.LANG:gm.widgets.dateUtil.DefaultLanguageCode,a=a?a:b;gm.widgets.dateUtil.SelectedMonthLabels=gm.widgets.dateUtil.MonthLabels[a]||gm.widgets.dateUtil.MonthLabels[gm.widgets.dateUtil.DefaultLanguageCode],gm.widgets.dateUtil.DateFormat=gm.widgets.dateUtil.DateFormats[a]||gm.widgets.dateUtil.DateFormats[gm.widgets.dateUtil.DefaultLanguageCode]},gm.widgets.dateUtil.isLeapYear=function(a){var b=!1;if(0===a%4&&0!=a%100||0===a%4&&0===a%100&&0===a%400)b=!0;return b},gm.widgets.dateUtil.generateMonthsObjects=function(a){var b=gm.widgets.dateUtil.SelectedMonthLabels;return[{name:b[0],number:1,index:0,lastDay:"31"},{name:b[1],number:2,index:1,lastDay:gm.widgets.dateUtil.isLeapYear(a)?"29":"28"},{name:b[2],number:3,index:2,lastDay:"31"},{name:b[3],number:4,index:3,lastDay:"30"},{name:b[4],number:5,index:4,lastDay:"31"},{name:b[5],number:6,index:5,lastDay:"30"},{name:b[6],number:7,index:6,lastDay:"31"},{name:b[7],number:8,index:7,lastDay:"31"},{name:b[8],number:9,index:8,lastDay:"30"},{name:b[9],number:10,index:9,lastDay:"31"},{name:b[10],number:11,index:10,lastDay:"30"},{name:b[11],number:12,index:11,lastDay:"31"}]},gm.widgets.dateUtil.getMonthsData=function(a){if(!gm.widgets.dateUtil.cachedMonthsData[a]){for(var b=0,c=gm.widgets.dateUtil.generateMonthsObjects(a),d=c.length,e=[];b<d;b++)e=gm.widgets.dateUtil.createDaysRange(c[b].lastDay),c[b].daysRange=e;gm.widgets.dateUtil.cachedMonthsData[a]=c}return gm.widgets.dateUtil.cachedMonthsData[a]},gm.widgets.dateUtil.createDaysRange=function(a){for(var b=[],c=0,a=Number(a);c<a;c++)b.push(""+(c+1));return b},gm.widgets.dateUtil.getDaysInMonth=function(a,b){var c=[];if(isNaN(Number(a)))for(var d=0;d<b.length;d++)b[d].name===a&&(c=b[d].daysRange);else c=b[Number(a)].daysRange||[];return c},gm.widgets.dateUtil.getMonthNames=function(){return gm.widgets.dateUtil.SelectedMonthLabels},gm.widgets.dateUtil.getYears=function(a,b){for(var c=new Date,c=a?a:c.getFullYear(),d=0,e=b&&0<b?b:200,f=[];d<e;d++)f.push(d+Number(c));return f},gm.widgets.dateUtil.isValidMonth=function(a){var b=!1;if(isNaN(Number(a)))for(var c=gm.widgets.dateUtil.getMonthNames(),d=0,e=c.length;d<e;d++)c[d].toLowerCase()===a.toLowerCase()&&(b=!0);else b=0<Number(a)&&12>=Number(a);return b},gm.widgets.DateHelper=function(a){return gm.widgets.dateUtil.setMonthLabels(a&&a.language?a.language:""),gm.widgets.dateUtil},gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.templates=[],gm.widgets.templates[0]='<script type="text/html" id="gm_widget_base_template" style="display:none;"><div id="<%=id%>"><p><%=label%></p></div></script>',gm.widgets.templates[1]='<script type="text/html" id="gm_widget_button_template" style="display:none;"><button class="gm_widget_button" id="<%=id%>" tabindex="0" <%= ( disabled ? "disabled = \'disabled\'" : "" ) %>><%=label%></button></script>',gm.widgets.templates[2]='<script type="text/html" id="gm_widget_checkbox_template" style="display:none;"><div class="gm_widget_checkbox<%= ( disabled? " disabled" : "" ) %><%= ( checked? " checked" : "" ) %>" id="<%=id%>"><input tabindex="0" type="checkbox" id="<%=id + "_input"%>" <%= ( disabled ? "disabled = \'disabled\'" : "" ) %><%= ( checked ? "checked = \'checked\'" : "" ) %> value="<%= ( value? value:" ") %>" ></input><label class="radiocontrol" for="<%=id + "_input" %>"><%=label%></label></div></script>',gm.widgets.templates[3]='<script type="text/html" id="gm_widget_radiobutton_template" style="display:none;"><div class="gm_widget_radiobutton_set" id="<%=id%>"><label><%=label%></label><% for ( var i = 0; i < choices.length; i++ ) { %><div class="gm_widget_radiobutton<%= ( choices[i].disabled? " disabled" : "" ) %><%= ( choices[i].checked? " checked" : "" ) %>" id="<%=id + "_" + i%>"><input type="radio"  id="<%=id + "_" + i + "_input"%>" name="<%= groupName %>" value="<%= choices[i].value? choices[i].value: String(i) %>" <%= ( choices[i].disabled ? "disabled = \'disabled\'" : "" ) %><%= ( choices[i].checked ? "checked = \'checked\'" : "" ) %>></input><label class="radiocontrol" for="<%=id + "_input_" + i%>" ><%= choices[i].label %></label></div><% } %></div></script>',gm.widgets.templates[4]='<script type="text/html" id="gm_widget_textfield_template" style="display:none;"><div id="<%=id%>" class="gm_widget_textfield"><label for="<%=id + \'_input\'%>"><%=label%></label><input type="<%= inputType %>" id="<%=id + \'_input\'%>" tabindex="0" <%= ( disabled ? "disabled = \'disabled\'" : "" ) %>></input></div></script>',gm.widgets.templates[5]='<script type="text/html" id="gm_widget_numberfield_template" style="display:none;"><div id="<%=id%>" class="gm_widget_numberfield"><label for="<%=id + \'_input\'%>"><%=label%></label><div class="inputWrapper"><input type="number" id="<%=id + \'_input\'%>" tabindex="0" <%= ( disabled ? "disabled = \'disabled\'" : "" ) %>value="<%= value? value: "0" %>" max="<%= max? max: "9999999999" %>" min="<%= min? min: "-9999999999" %>" ></input></div></div></script>',gm.widgets.templates[6]='<script type="text/html" id="gm_widget_textspinner_template" style="display:none;"><div id="<%=id%>" class="gm_widget_textspinner" ><label><%=label%></label><div class="selectionWrapper"><ul class="selections"><% for ( var i = 0; i < selections.length; i++ ) { %><li id="<%=id + \'_option_\' + String(i) %>"><%=selections[i]%></li><% } %></ul></div><div class="buttonWrapper"></div></div></script>',gm.widgets.templates[7]='<script type="text/html" id="gm_widget_popup_template" style="display:none;"><div id="<%=id%>" class="gm_widget_popup hidden" ><div class="gm_widget_popup_header"><div class="gm_widget_popup_title"></div><div class="gm_widget_popup_close_container"></div></div><div class="gm_widget_popup_description"></div><div class="gm_widget_popup_buttons"></div></div></script>',gm.widgets.templates[8]='<script type="text/html" id="gm_widget_modal_template" style="display:none;"><div id="<%=id%>" class="gm_widget_modal hidden" ><div class="firstRow"></div><div class="secondRow"></div></div></script>',gm.widgets.templateOptionsHash={gm_widget_base_template:["id","label"],gm_widget_button_template:["id","label","disabled"],gm_widget_checkbox_template:["id","label","checked","disabled","value"],gm_widget_radiobutton_template:["id","label","groupName","choices"],gm_widget_textfield_template:["id","label","disabled","inputType"],gm_widget_numberfield_template:"id,label,disabled,value,max,min".split(","),gm_widget_textspinner_template:["id","label","disabled","value","selections"],gm_widget_popup_template:["id"],gm_widget_modal_template:["id"]},gm.widgets.TemplateParams=function(){return{getTemplateData:function(a,b){for(var c=gm.widgets.templateOptionsHash[a]||[],d=0,e=c.length,f={};d<e;d++)f[c[d]]=b[c[d]]||"";return f}}}(),function(){for(var a=0,b=gm.widgets.templates.length;a<b;a++)document.write(gm.widgets.templates[a])}(),gm=gm||{},gm.widgets=gm.widgets||{},gm.widgets.IDGenerator=function(){var a=0;return{getId:function(){return a++,"gm_widget_autogen_"+a}}}(),gm.widgets.util={trimString:function(a){return a.replace(/^\s+|\s+$/g,"")},isInList:function(a,b){for(var c=0,d=a.length;c<d;c++)if(""+a[c]==""+b)return!0;return!1},isInName:function(a,b){var c=gm.widgets.util.trimString(a).split(" ");return gm.widgets.util.isInList(c,b)},modClassName:function(a,b,c){a=gm.widgets.util.trimString(a),a.split(" ");var d=""===a,e=gm.widgets.util.isInName(a,b);switch(c){case"add":e||(a=d?b:a+(" "+b));break;case"remove":e&&(a=a.replace(b,""))}return gm.widgets.util.trimString(a)}},gm.widgets.KBConstants={REGULAR_KEYBOARD_TYPE:1,EMAIL_KEYBOARD_TYPE:2},gm.widgets.Keyboard=function(a){gm.widgets.Keyboard.instance=this,this.opts=a,gm.widgets.Keyboard.watchspeed=a.watchSpeed,gm.widgets.Keyboard.theme=a.Theme;switch(this.opts.language){case"en-US":this.keys=2===this.opts.kbType?en_us_email.keys:en_us.keys,this.buttons=en_us.buttons;break;case"fr-CA":this.keys=2===this.opts.kbType?en_us_email.keys:fr_CA.keys,this.buttons=fr_CA.buttons;break;case"fr-FR":this.keys=2===this.opts.kbType?en_us_email.keys:fr_FR.keys,this.buttons=fr_FR.buttons;break;case"ar-WW":this.keys=2===this.opts.kbType?en_us_email.keys:ar_ww.keys,this.buttons=ar_ww.buttons;break;case"es-US":this.keys=2===this.opts.kbType?en_us_email.keys:es_US.keys,this.buttons=es_US.buttons;break;case"es-ES":this.keys=2===this.opts.kbType?en_us_email.keys:es_ES.keys,this.buttons=es_ES.buttons;break;case"zh-CN":this.keys=2===this.opts.kbType?en_us_email.keys:zh_CN.keys,this.buttons=zh_CN.buttons;break;default:this.keys=2===this.opts.kbType?en_us_email.keys:en_us.keys,this.buttons=en_us.buttons}this.cells=[],this.doneText="",this.doneText=this.opts.doneText?this.opts.doneText:this.buttons.doneButton,this.keyboardContainer=this.shiftButton=this.capsButton=this.cancelButton=this.doneButton=this.delButton=this.currentInputElement=null,this.inputElements=[],this.inputLabels=[],this.widgetStatus=0,this.visibleCellsArray=[],this.currentCellID=0,this.prevElement=this.currentCellElement=null,this.visibleTopRowButtons=[],this.visibleBottomButtons=[],"number"!=typeof this.opts.feedbackMode&&(this.opts.feedbackMode=0),this.opts.sender?(this.currentInputIndex=null,this.inputLabels=[],this.inputElements=[],this.savedInput=[],this.initInputs()):this.renderKeyboard(),this.watchId=null},gm.widgets.Keyboard.prototype.initInputs=function(){for(var a=document.getElementById(this.opts.sender).getElementsByTagName("INPUT"),b=0;b<a.length;b++)a[b].setAttribute("onmousedown","gm.widgets.Keyboard.instance.renderKeyboard(this);"),this.inputElements[b]=a[b];a=document.getElementById(this.opts.sender).getElementsByClassName("inputLabel");for(b=0;b<a.length;b++)this.inputLabels[b]=a[b].innerHTML},gm.widgets.Keyboard.prototype.renderKeyboard=function(a){var b;if(a){if(this.currentInputIndex=this.inputElements.indexOf(a),b=this.inputLabels[this.currentInputIndex],this.keyboardContainer){this.show();return}}else b=this.opts.placeholder;this.shiftBool=this.capsBool=this.capsLockBool=!1,this.keyboardContainer=document.createElement("div"),this.keyboardContainer.id="keyboardContainer",this.keyboardContainer.className="gm-theme-"+gm.widgets.Keyboard.theme+" gm-hidden",this.keyboardContainer.setAttribute("align","center"),this.keyboardContainer.style.zIndex=9999,this.keyboardContainer.style.width="100%",this.keyboardContainer.style.height="400px",this.keyboardContainer.style.left="0px",this.keyboardContainer.style.position="fixed",this.keyboardContainer.setAttribute("onmouseup","gm.widgets.Keyboard.instance.onMouseUp()"),a=document.createElement("div"),a.id="KBDiv",a.setAttribute("align","center");var c;c=document.createElement("table"),c.className="keyboardtable",c.style.borderSpacing="4px 2px",c.setAttribute("border","0"),c.setAttribute("bordercolor","0"),c.width="700px",c.setAttribute("height","50px"),a.appendChild(c),this.keyboardContainer.appendChild(a),a=document.createElement("tr"),c.appendChild(a),c=document.createElement("td"),c.id="LEFTBT",c.width="10%",c.className="ui-keyboard-button",1===this.opts.feedbackMode&&(c.className+=" cssActive"),c.setAttribute("onmousedown","gm.widgets.Keyboard.instance.onLeftButton(this)"),c.innerHTML="&lt;",a.appendChild(c),this.visibleTopRowButtons.push(c),c=document.createElement("td"),c.id="RIGHTBT",c.width="10%",c.className="ui-keyboard-button",1===this.opts.feedbackMode&&(c.className+=" cssActive"),c.setAttribute("onmousedown","gm.widgets.Keyboard.instance.onRightButton(this)"),c.innerHTML="&gt;",a.appendChild(c),this.visibleTopRowButtons.push(c),c=document.createElement("td"),c.className="textAreaTD",c.width="53%",c.height="100%",this.currentInputElement=document.createElement("input"),this.currentInputElement.id="userText",this.currentInputElement.style.fontSize="1em",this.currentInputElement.style.width="348px",this.currentInputElement.style.height="46px",this.currentInputElement.style.paddingLeft="4px",this.currentInputElement.setAttribute("placeholder",b),a.appendChild(this.currentInputElement),c=document.createElement("td"),c.className="ui-keyboard-button",1===this.opts.feedbackMode&&(c.className+=" cssActive"),c.id="DEL",c.setAttribute("onmousedown","gm.widgets.Keyboard.instance.onDelete(this)"),c.width="13%",b=document.createElement("div"),b.id="delImage",c.appendChild(b),a.appendChild(c),this.visibleTopRowButtons.push(c),this.doneButton=document.createElement("td"),this.doneButton.className="ui-keyboard-button",1===this.opts.feedbackMode&&(this.doneButton.className+=" cssActive"),this.doneButton.id="DONE.CONT",this.doneButton.width="15%",this.doneButton.setAttribute("onclick","gm.widgets.Keyboard.instance.onDone(this)"),this.doneButton.innerHTML=this.doneText,a.appendChild(this.doneButton),this.visibleTopRowButtons.push(this.doneButton);for(a=0;a<this.keys.length;a++){b=document.createElement("table"),b.className="keyboardtable",b.setAttribute("border","0"),b.style.borderSpacing="4px 2px",b.setAttribute("bordercolor","0"),c=70*this.keys[a].length,c=c.toString()+"px",b.setAttribute("width",c),b.setAttribute("height","50px"),b.setAttribute("table-layout","fixed"),this.keyboardContainer.appendChild(b),c=b.insertRow(0);for(b=this.keys[a].length-1;0<=b;b--){var d=c.insertCell(0);d.id=this.keys[a][b],d.setAttribute("onmousedown","gm.widgets.Keyboard.instance.keyClick(this)"),d.className="ui-keyboard-button",1===this.opts.feedbackMode&&(d.className+=" cssActive"),d.width=100/this.keys[a].length+"%",this.cells.push(d)}}1===this.opts.kbType?(a=document.createElement("table"),a.className="keyboardtable",a.setAttribute("border","0"),a.style.borderSpacing="4px 2px",a.setAttribute("bordercolor","0"),a.setAttribute("width","430px"),a.setAttribute("height","50px"),c=document.createElement("tr"),a.appendChild(c),this.keyboardContainer.appendChild(a),a=document.createElement("td"),a.className="ui-keyboard-button",1===this.opts.feedbackMode&&(a.className+=" cssActive"),a.id="Cancel",a.setAttribute("onclick","gm.widgets.Keyboard.instance.onCancel()"),a.innerHTML=this.buttons.cancelButton,a.width="20%",c.appendChild(a),this.visibleBottomButtons.push(a),a=document.createElement("td"),a.className="ui-keyboard-button",1===this.opts.feedbackMode&&(a.className+=" cssActive"),a.id="SPACE",a.setAttribute("onmousedown","gm.widgets.Keyboard.instance.onSpace(this)"),a.innerHTML=this.buttons.spaceButton,a.width="50%",c.appendChild(a),this.visibleBottomButtons.push(a),this.capsButton=document.createElement("td"),this.capsButton.className="ui-keyboard-button",1===this.opts.feedbackMode&&(this.capsButton.className+=" cssActive"),this.capsButton.id="CAPS",this.capsButton.setAttribute("onmousedown","gm.widgets.Keyboard.instance.toggleCaps(this)"),this.capsButton.innerHTML="&uArr;",this.capsButton.width="15%",c.appendChild(this.capsButton),this.visibleBottomButtons.push(this.capsButton),this.shiftButton=document.createElement("td"),this.shiftButton.className="ui-keyboard-button",1===this.opts.feedbackMode&&(this.shiftButton.className+=" cssActive"),this.shiftButton.id="SHIFT",this.shiftButton.width="15%",this.shiftButton.setAttribute("onmousedown","gm.widgets.Keyboard.instance.toggleShift(this)"),this.shiftButton.innerHTML="+=;",c.appendChild(this.shiftButton),this.visibleBottomButtons.push(this.shiftButton)):2==this.opts.kbType&&(a=document.createElement("table"),a.className="keyboardtable",a.style.borderSpacing="4px 2px",a.setAttribute("border","0"),a.setAttribute("bordercolor","0"),a.setAttribute("width","430px"),a.setAttribute("height","50px"),c=document.createElement("tr"),a.appendChild(c),this.keyboardContainer.appendChild(a),a=document.createElement("td"),a.className="ui-keyboard-button",1===this.opts.feedbackMode&&(a.className+=" cssActive"),a.id="comBt",a.width="17%",a.setAttribute("onmousedown","gm.widgets.Keyboard.instance.keyClick(this)"),a.innerHTML=".COM",c.appendChild(a),this.visibleBottomButtons.push(a),a=document.createElement("td"),a.className="ui-keyboard-button",1===this.opts.feedbackMode&&(a.className+=" cssActive"),a.id="_",a.width="10%",a.setAttribute("onmousedown","gm.widgets.Keyboard.instance.keyClick(this)"),a.innerHTML="_",c.appendChild(a),a=document.createElement("td"),a.className="ui-keyboard-button",1===this.opts.feedbackMode&&(a.className+=" cssActive"),a.id="@",a.width="10%",a.setAttribute("onmousedown","gm.widgets.Keyboard.instance.keyClick(this)"),a.innerHTML="@",c.appendChild(a),this.visibleBottomButtons.push(a),a=document.createElement("td"),a.className="ui-keyboard-button",1===this.opts.feedbackMode&&(a.className+=" cssActive"),a.id="-",a.width="10%",a.setAttribute("onmousedown","gm.widgets.Keyboard.instance.keyClick(this)"),a.innerHTML="-",c.appendChild(a),this.visibleBottomButtons.push(a),a=document.createElement("td"),a.className="ui-keyboard-button",1===this.opts.feedbackMode&&(a.className+=" cssActive"),a.id="Cancel",a.width="17%",a.setAttribute("onclick","gm.widgets.Keyboard.instance.onCancel()"),a.innerHTML=this.buttons.cancelButton,c.appendChild(a),this.visibleBottomButtons.push(a)),this.renderKeys(),this.show()},gm.widgets.Keyboard.prototype.renderKeys=function(){for(var a=0;a<this.cells.length;a++)""==this.cells[a].id.substring(0,1)?this.cells[a].style.visibility="hidden":(this.cells[a].style.visibility="visible",this.cells[a].innerHTML=this.cells[a].id.substring(0,1),this.visibleCellsArray.push(this.cells[a]));this.visibleCellsArray.reverse(),this.visibleCellsArray=this.visibleTopRowButtons.concat(this.visibleCellsArray),this.visibleCellsArray=this.visibleCellsArray.concat(this.visibleBottomButtons)},gm.widgets.Keyboard.prototype.toggleCaps=function(){this.capsLockBool?(this.capsBool=this.capsLockBool=!1,this.capsButton.style.background="",this.capsButton.style.color="",this.capsButton.style.textDecoration=""):this.capsBool?(this.capsLockBool=!0,this.capsButton.style.textDecoration="underline"):(this.capsBool=!0,this.capsButton.style.background="white",this.capsButton.style.color="black")},gm.widgets.Keyboard.prototype.toggleShift=function(){if(this.shiftBool)this.shiftBool=!1,gm.widgets.Util.removeClass(this.shiftButton,"active"),this.renderKeys(),this.keyboardContainer.childNodes.item(4).style.display="";else{gm.widgets.Util.addClass(this.shiftButton,"active");for(var a=0;a<this.cells.length;a++)""!=this.cells[a].id.substring(2,3)&&(this.cells[a].innerHTML=this.cells[a].id.substring(2,3));this.shiftBool=!0,this.keyboardContainer.childNodes.item(4).style.display="none"}this.currentCellElement=null,this.currentCellID=0},gm.widgets.Keyboard.prototype.keyClick=function(a){var b=this.getCaretPosition(),c=this.currentInputElement.value.substring(0,b),d=this.currentInputElement.value.substring(b,this.currentInputElement.value.length);switch(a.innerHTML){case"&amp;":this.currentInputElement.value=c+"&"+d,b+=1;break;case"&gt;":this.currentInputElement.value=c+">"+d,b+=1;break;case"&lt;":this.currentInputElement.value=c+"<"+d,b+=1;break;case".COM":this.currentInputElement.value=c+".com"+d,b+=4;break;default:var e=a.innerHTML;2==this.opts.kbType?e=e.toLowerCase():this.capsLockBool||(this.capsBool?(this.capsBool=!1,this.capsButton.style.background="",this.capsButton.style.color=""):this.shiftBool||(e=a.id.substring(1,2))),this.currentInputElement.value=c+e+d,b+=1}this.currentInputElement.selectionStart=b,this.currentInputElement.selectionEnd=b},gm.widgets.Keyboard.prototype.getCaretPosition=function(){var a=0;if(document.selection)a=document.selection.createRange(),a.moveStart("character",-this.currentInputElement.value.length),a=a.text.length;else if(this.currentInputElement.selectionStart||"0"==this.currentInputElement.selectionStart)a=this.currentInputElement.selectionStart;return a},gm.widgets.Keyboard.prototype.setCaretPosition=function(a){if(this.currentInputElement.setSelectionRange)this.currentInputElement.setSelectionRange(a,a);else if(this.currentInputElement.createTextRange){var b=this.currentInputElement.createTextRange();b.collapse(!0),b.moveEnd("character",a),b.moveStart("character",a),b.select()}},gm.widgets.Keyboard.prototype.onMouseUp=function(){this.currentInputElement.focus()},gm.widgets.Keyboard.prototype.onSpace=function(){this.currentInputElement.value+=" "},gm.widgets.Keyboard.prototype.onDelete=function(){var a=this.getCaretPosition(),b=this.currentInputElement.value.substring(0,a),c=this.currentInputElement.value.substring(a,this.currentInputElement.value.length);this.currentInputElement.value=b.substring(0,b.length-1)+c,a-=1,this.currentInputElement.selectionStart=a,this.currentInputElement.selectionEnd=a},gm.widgets.Keyboard.prototype.onRightButton=function(){this.setCaretPosition(this.getCaretPosition()+1)},gm.widgets.Keyboard.prototype.onLeftButton=function(){this.setCaretPosition(this.getCaretPosition()-1)},gm.widgets.Keyboard.prototype.onDone=function(){if(this.opts.sender)if(this.savedInput[this.currentInputIndex]=this.currentInputElement.value,this.currentInputIndex++,this.currentInputIndex<this.inputElements.length)this.currentInputElement.placeholder=this.inputLabels[this.currentInputIndex],this.currentInputElement.value=this.savedInput[this.currentInputIndex]||"",this.currentInputIndex===this.inputElements.length-1&&(this.doneButton.innerHTML=this.doneText);else{for(var a=0;a<this.inputElements.length;a++)"string"==typeof this.savedInput[a]&&(this.inputElements[a].value=this.savedInput[a]);"function"==typeof this.opts.onDone&&this.opts.onDone({value:this.currentInputElement.value}),this.hide()}else"function"==typeof this.opts.onDone&&this.opts.onDone({value:this.currentInputElement.value}),this.hide();gm.widgets.Keyboard.prototype.unRegisterWidgetFromRotaryEvent(gm.widgets.Keyboard.instance)},gm.widgets.Keyboard.prototype.onCancel=function(){"function"==typeof this.opts.onCancel&&this.opts.onCancel(),this.hide(),gm.widgets.Keyboard.prototype.unRegisterWidgetFromRotaryEvent(gm.widgets.Keyboard.instance)},gm.widgets.Keyboard.prototype.hide=function(){gm.widgets.Util.addClass(this.keyboardContainer,"gm-hidden");try{document.body.removeChild(this.keyboardContainer)}catch(a){console.log(a)}-1<gm.widgets.Keyboard.watchId&&gm.vehicle.clearSpeed(gm.widgets.Keyboard.watchId),gm.widgets.Keyboard.watchId=-1,this.widgetStatus=0};var Isalert=!1;gm.widgets.Keyboard.prototype.show=function(){gm.widgets.Keyboard.watchId="function"==typeof gm.widgets.Keyboard.watchspeed?gm.widgets.Keyboard.watchspeed():-1,console.log("In Keyboard -> watchSpeed ID-->"+gm.widgets.Keyboard.watchId);if("number"==typeof this.currentInputIndex){this.currentInputElement.value=this.inputElements[this.currentInputIndex].value,this.currentInputElement.placeholder=this.inputLabels[this.currentInputIndex],this.currentInputIndex<this.inputElements.length-1&&(this.doneButton.innerHTML=this.buttons.nextButton);for(var a=0;a<this.inputElements.length;a++)this.savedInput[a]=this.inputElements[a].value}gm.widgets.Util.removeClass(this.keyboardContainer,"gm-hidden"),document.body.appendChild(this.keyboardContainer),this.widgetStatus=1,gm.widgets.Keyboard.prototype.registerWidgetToRotaryEvent(gm.widgets.Keyboard.instance)},gm.widgets.Keyboard.prototype.destroy=function(){console.log("killing speed watcher -> "+gm.widgets.Keyboard.watchId),-1<gm.widgets.Keyboard.watchId&&gm.vehicle.clearSpeed(gm.widgets.Keyboard.watchId),gm.widgets.Keyboard.watchId=-1,this.keyboardContainer.parentNode&&document.body.removeChild(this.keyboardContainer),delete gm.widgets.Keyboard.instance},gm.widgets.Keyboard.prototype.processSuccessfulRotaryEvent=function(a){if(1==this.widgetStatus){switch(a){case"RC_CW":this.focus_next();break;case"RC_CCW":this.focus_prev();break;case"RC_SELECT":this.press_enter()}return!0}return!1},gm.widgets.Keyboard.prototype.setFocus=function(a){null!=a&&gm.widgets.Util.addClass(a,"active")},gm.widgets.Keyboard.prototype.setBlur=function(a){null!=a&&gm.widgets.Util.removeClass(a,"active")},gm.widgets.Keyboard.prototype.focus_next=function(){this.currentCellID==this.visibleCellsArray.length-1&&(gm.widgets.Keyboard.prototype.setBlur(this.visibleCellsArray[this.currentCellID]),this.currentCellElement=this.visibleCellsArray[0],this.currentCellID=0),gm.widgets.Keyboard.prototype.setBlur(this.visibleCellsArray[this.currentCellID]),this.currentCellID++,this.currentCellElement=this.visibleCellsArray[this.currentCellID],gm.widgets.Keyboard.prototype.setFocus(this.currentCellElement)},gm.widgets.Keyboard.prototype.focus_prev=function(){0==this.currentCellID&&(gm.widgets.Keyboard.prototype.setBlur(this.visibleCellsArray[this.currentCellID]),this.currentCellElement=this.visibleCellsArray[this.visibleCellsArray.length-1],this.currentCellID=this.visibleCellsArray.length-1),gm.widgets.Keyboard.prototype.setBlur(this.visibleCellsArray[this.currentCellID]),this.currentCellID--,this.currentCellElement=this.visibleCellsArray[this.currentCellID],gm.widgets.Keyboard.prototype.setFocus(this.currentCellElement)},gm.widgets.Keyboard.prototype.press_enter=function(){var a=document.createEvent("MouseEvent");a.initEvent("mousedown",!1,!1),this.visibleCellsArray[this.currentCellID].dispatchEvent(a)},gm.widgets.Keyboard.prototype.unRegisterWidgetFromRotaryEvent=function(a){try{gm.system._unRegisterActiveWidget(a)}catch(b){console.log(b)}this.widgetStatus=0},gm.widgets.Keyboard.prototype.registerWidgetToRotaryEvent=function(a){try{gm.system._registerActiveWidget(a)}catch(b){console.log(b)}this.widgetStatus=1},"undefined"==typeof gm.widgets.lang&&(gm.widgets.lang={}),gm.widgets.lang.ar_WW={normal:{keyboard:[[{standard:{display:"ض"},shift:[{display:"ض"}],classname:""},{standard:{display:"ص"},shift:[{display:"ص"}],classname:""},{standard:{display:"ث"},shift:[{display:"ث"}],classname:""},{standard:{display:"ق"},shift:[{display:"ق"}],classname:""},{standard:{display:"ف"},shift:[{display:"ف"}],classname:""},{standard:{display:"غ"},shift:[{display:"غ"}],classname:""},{standard:{display:"ع"},shift:[{display:"ع"}],classname:""},{standard:{display:"خ"},shift:[{display:"خ"}],classname:""},{standard:{display:"ح"},shift:[{display:"ح"}],classname:""},{standard:{display:"ج"},shift:[{display:"ج"}],classname:""},{standard:{display:"ة"},shift:[{display:"ة"}],classname:""}],[{standard:{display:"ش"},shift:[{display:"ش"}],classname:""},{standard:{display:"س"},shift:[{display:"س"}],classname:""},{standard:{display:"ي"},shift:[{display:"ى"}],classname:""},{standard:{display:"ب"},shift:[{display:"ب"}],classname:""},{standard:{display:"ل"},shift:[{display:"ل"}],classname:""},{standard:{display:"ا"},shift:[{display:"آ"}],classname:""},{standard:{display:"ت"},shift:[{display:"ت"}],classname:""},{standard:{display:"ن"},shift:[{display:"ن"}],classname:""},{standard:{display:"م"},shift:[{display:"م"}],classname:""},{standard:{display:"ك"},shift:[{display:"ك"}],classname:""}],[{standard:{display:"ظ"},shift:[{display:"ظ"}],classname:""},{standard:{display:"ط"},shift:[{display:"ط"}],classname:""},{standard:{display:"ذ"},shift:[{display:"ئ"}],classname:""},{standard:{display:"د"},shift:[{display:"ء"}],classname:""},{standard:{display:"ز"},shift:[{display:"أ"}],classname:""},{standard:{display:"ر"},shift:[{display:"إ"}],classname:""},{standard:{display:"و"},shift:[{display:"ؤ"}],classname:""}],[{standard:{display:"cancel",code:gm.widgets.Keyboard.CANCEL},shift:[{display:"cancel",code:gm.widgets.Keyboard.CANCEL}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"shift",code:gm.widgets.Keyboard.SHIFT},shift:[{display:"shift",code:gm.widgets.Keyboard.SHIFT}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"space",code:" "},shift:[{display:"space",code:" "}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"done",code:gm.widgets.Keyboard.DONE},shift:[{display:"done",code:gm.widgets.Keyboard.DONE}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"...",code:gm.widgets.Keyboard.MORE},shift:[{display:"...",code:gm.widgets.Keyboard.MORE}],classname:gm.widgets.Keyboard.SP_KEY_CLASS}]]},more:{keyboard:[[{standard:{display:"1"},shift:[{display:"!"}],classname:""},{standard:{display:"2"},shift:[{display:"@"}],classname:""},{standard:{display:"3"},shift:[{display:"#"}],classname:""},{standard:{display:"4"},shift:[{display:"$"}],classname:""},{standard:{display:"5"},shift:[{display:"%"}],classname:""},{standard:{display:"6"},shift:[{display:"^"}],classname:""},{standard:{display:"7"},shift:[{display:"&"}],classname:""},{standard:{display:"8"},shift:[{display:"*"}],classname:""},{standard:{display:"9"},shift:[{display:"("}],classname:""},{standard:{display:"0"},shift:[{display:")"}],classname:""}],[{standard:{display:"`"},shift:[{display:"~"}],classname:""},{standard:{display:"-"},shift:[{display:"_"}],classname:""},{standard:{display:"="},shift:[{display:"+"}],classname:""},{standard:{display:"["},shift:[{display:"{"}],classname:""},{standard:{display:"]"},shift:[{display:"}"}],classname:""},{standard:{display:"\\"},shift:[{display:"|"}],classname:""},{standard:{display:";"},shift:[{display:":"}],classname:""},{standard:{display:"'"},shift:[{display:'"'}],classname:""},{standard:{display:"/"},shift:[{display:"?"}],classname:""}],[{standard:{display:","},shift:[{display:"<"}],classname:""},{standard:{display:"."},shift:[{display:">"}],classname:""},{standard:{display:"€"},shift:[{display:"₣"}],classname:""},{standard:{display:"ه"},shift:[{display:"ه"}],classname:""},{standard:{display:"ـ"},shift:[{display:"ـ"}],classname:""}],[{standard:{display:"shift",code:gm.widgets.Keyboard.SHIFT},shift:[{display:"shift",code:gm.widgets.Keyboard.SHIFT}],classname:"gm-keyboard-shift gm-keyboard-specialkey"},{standard:{display:"back",code:gm.widgets.Keyboard.BACK},shift:[{display:"back",code:gm.widgets.Keyboard.BACK}],classname:"gm-keyboard-back gm-keyboard-specialkey"},{standard:{display:"done",code:gm.widgets.Keyboard.DONE},shift:[{display:"done",code:gm.widgets.Keyboard.DONE}],classname:"gm-keyboard-done gm-keyboard-specialkey"}]]}},"undefined"==typeof gm.widgets.lang&&(gm.widgets.lang={}),gm.widgets.lang.de_DE={normal:{keyboard:[[{standard:{display:"q"},shift:[{display:"Q"}],classname:""},{standard:{display:"w"},shift:[{display:"W"}],classname:""},{standard:{display:"e"},shift:[{display:"E"}],classname:""},{standard:{display:"r"},shift:[{display:"R"}],classname:""},{standard:{display:"t"},shift:[{display:"T"}],classname:""},{standard:{display:"y"},shift:[{display:"Y"}],classname:""},{standard:{display:"u"},shift:[{display:"U"}],classname:""},{standard:{display:"i"},shift:[{display:"I"}],classname:""},{standard:{display:"o"},shift:[{display:"O"}],classname:""},{standard:{display:"p"},shift:[{display:"P"}],classname:""}],[{standard:{display:"a"},shift:[{display:"A"}],classname:""},{standard:{display:"s"},shift:[{display:"S"}],classname:""},{standard:{display:"d"},shift:[{display:"D"}],classname:""},{standard:{display:"f"},shift:[{display:"F"}],classname:""},{standard:{display:"g"},shift:[{display:"G"}],classname:""},{standard:{display:"h"},shift:[{display:"H"}],classname:""},{standard:{display:"j"},shift:[{display:"J"}],classname:""},{standard:{display:"k"},shift:[{display:"K"}],classname:""},{standard:{display:"l"},shift:[{display:"L"}],classname:""},{standard:{display:"-"},shift:[{display:":"}],classname:""},{standard:{display:"'"},shift:[{display:'"'}],classname:""}],[{standard:{display:"z"},shift:[{display:"Z"}],classname:""},{standard:{display:"x"},shift:[{display:"X"}],classname:""},{standard:{display:"c"},shift:[{display:"C"}],classname:""},{standard:{display:"v"},shift:[{display:"V"}],classname:""},{standard:{display:"b"},shift:[{display:"B"}],classname:""},{standard:{display:"n"},shift:[{display:"N"}],classname:""},{standard:{display:"m"},shift:[{display:"M"}],classname:""},{standard:{display:","},shift:[{display:"<"}],classname:""},{standard:{display:"."},shift:[{display:">"}],classname:""},{standard:{display:"/"},shift:[{display:"?"}],classname:""}],[{standard:{display:"cancel",code:gm.widgets.Keyboard.CANCEL},shift:[{display:"cancel",code:gm.widgets.Keyboard.CANCEL}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"shift",code:gm.widgets.Keyboard.SHIFT},shift:[{display:"shift",code:gm.widgets.Keyboard.SHIFT}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"space",code:" "},shift:[{display:"space",code:" "}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"done",code:gm.widgets.Keyboard.DONE},shift:[{display:"done",code:gm.widgets.Keyboard.DONE}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"...",code:gm.widgets.Keyboard.MORE},shift:[{display:"...",code:gm.widgets.Keyboard.MORE}],classname:gm.widgets.Keyboard.SP_KEY_CLASS}]]},more:{keyboard:[[{standard:{display:"1"},shift:[{display:"!"}],classname:""},{standard:{display:"2"},shift:[{display:"@"}],classname:""},{standard:{display:"3"},shift:[{display:"#"}],classname:""},{standard:{display:"4"},shift:[{display:"$"}],classname:""},{standard:{display:"5"},shift:[{display:"%"}],classname:""},{standard:{display:"6"},shift:[{display:"^"}],classname:""},{standard:{display:"7"},shift:[{display:"&"}],classname:""},{standard:{display:"8"},shift:[{display:"*"}],classname:""},{standard:{display:"9"},shift:[{display:"("}],classname:""},{standard:{display:"0"},shift:[{display:")"}],classname:""}],[{standard:{display:"`"},shift:[{display:"~"}],classname:""},{standard:{display:"-"},shift:[{display:"_"}],classname:""},{standard:{display:"="},shift:[{display:"+"}],classname:""},{standard:{display:"["},shift:[{display:"{"}],classname:""},{standard:{display:"]"},shift:[{display:"}"}],classname:""},{standard:{display:"\\"},shift:[{display:"|"}],classname:""},{standard:{display:";"},shift:[{display:":"}],classname:""},{standard:{display:","},shift:[{display:"<"}],classname:""},{standard:{display:"."},shift:[{display:">"}],classname:""},{standard:{display:"€"},shift:[{display:"₣"}],classname:""}],[{standard:{display:"ä"},shift:[{display:"Ä"}],classname:""},{standard:{display:"ö"},shift:[{display:"Ö"}],classname:""},{standard:{display:"ü"},shift:[{display:"Ü"}],classname:""},{standard:{display:"ß"},shift:[{display:"ẞ"}],classname:""}],[{standard:{display:"shift",code:gm.widgets.Keyboard.SHIFT},shift:[{display:"shift",code:gm.widgets.Keyboard.SHIFT}],classname:"gm-keyboard-shift gm-keyboard-specialkey"},{standard:{display:"back",code:gm.widgets.Keyboard.BACK},shift:[{display:"back",code:gm.widgets.Keyboard.BACK}],classname:"gm-keyboard-back gm-keyboard-specialkey"},{standard:{display:"done",code:gm.widgets.Keyboard.DONE},shift:[{display:"done",code:gm.widgets.Keyboard.DONE}],classname:"gm-keyboard-done gm-keyboard-specialkey"}]]}},"undefined"==typeof gm.widgets.lang&&(gm.widgets.lang={}),gm.widgets.lang.en_US={normal:{keyboard:[[{standard:{display:"q"},shift:[{display:"Q"}],classname:""},{standard:{display:"w"},shift:[{display:"W"}],classname:""},{standard:{display:"e"},shift:[{display:"E"}],classname:""},{standard:{display:"r"},shift:[{display:"R"}],classname:""},{standard:{display:"t"},shift:[{display:"T"}],classname:""},{standard:{display:"y"},shift:[{display:"Y"}],classname:""},{standard:{display:"u"},shift:[{display:"U"}],classname:""},{standard:{display:"i"},shift:[{display:"I"}],classname:""},{standard:{display:"o"},shift:[{display:"O"}],classname:""},{standard:{display:"p"},shift:[{display:"P"}],classname:""}],[{standard:{display:"a"},shift:[{display:"A"}],classname:""},{standard:{display:"s"},shift:[{display:"S"}],classname:""},{standard:{display:"d"},shift:[{display:"D"}],classname:""},{standard:{display:"f"},shift:[{display:"F"}],classname:""},{standard:{display:"g"},shift:[{display:"G"}],classname:""},{standard:{display:"h"},shift:[{display:"H"}],classname:""},{standard:{display:"j"},shift:[{display:"J"}],classname:""},{standard:{display:"k"},shift:[{display:"K"}],classname:""},{standard:{display:"l"},shift:[{display:"L"}],classname:""},{standard:{display:"-"},shift:[{display:":"}],classname:""},{standard:{display:"'"},shift:[{display:'"'}],classname:""}],[{standard:{display:"z"},shift:[{display:"Z"}],classname:""},{standard:{display:"x"},shift:[{display:"X"}],classname:""},{standard:{display:"c"},shift:[{display:"C"}],classname:""},{standard:{display:"v"},shift:[{display:"V"}],classname:""},{standard:{display:"b"},shift:[{display:"B"}],classname:""},{standard:{display:"n"},shift:[{display:"N"}],classname:""},{standard:{display:"m"},shift:[{display:"M"}],classname:""},{standard:{display:","},shift:[{display:"<"}],classname:""},{standard:{display:"."},shift:[{display:">"}],classname:""},{standard:{display:"/"},shift:[{display:"?"}],classname:""}],[{standard:{display:"cancel",code:gm.widgets.Keyboard.CANCEL},shift:[{display:"cancel",code:gm.widgets.Keyboard.CANCEL}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"shift",code:gm.widgets.Keyboard.SHIFT},shift:[{display:"shift",code:gm.widgets.Keyboard.SHIFT}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"space",code:" "},shift:[{display:"space",code:" "}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"done",code:gm.widgets.Keyboard.DONE},shift:[{display:"done",code:gm.widgets.Keyboard.DONE}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"...",code:gm.widgets.Keyboard.MORE},shift:[{display:"...",code:gm.widgets.Keyboard.MORE}],classname:gm.widgets.Keyboard.SP_KEY_CLASS}]]},more:{keyboard:[[{standard:{display:"1"},shift:[{display:"!"}],classname:""},{standard:{display:"2"},shift:[{display:"@"}],classname:""},{standard:{display:"3"},shift:[{display:"#"}],classname:""},{standard:{display:"4"},shift:[{display:"$"}],classname:""},{standard:{display:"5"},shift:[{display:"%"}],classname:""},{standard:{display:"6"},shift:[{display:"^"}],classname:""},{standard:{display:"7"},shift:[{display:"&"}],classname:""},{standard:{display:"8"},shift:[{display:"*"}],classname:""},{standard:{display:"9"},shift:[{display:"("}],classname:""},{standard:{display:"0"},shift:[{display:")"}],classname:""}],[{standard:{display:"`"},shift:[{display:"~"}],classname:""},{standard:{display:"-"},shift:[{display:"_"}],classname:""},{standard:{display:"="},shift:[{display:"+"}],classname:""},{standard:{display:"["},shift:[{display:"{"}],classname:""},{standard:{display:"]"},shift:[{display:"}"}],classname:""},{standard:{display:"\\"},shift:[{display:"|"}],classname:""},{standard:{display:";"},shift:[{display:":"}],classname:""},{standard:{display:","},shift:[{display:"<"}],classname:""},{standard:{display:"."},shift:[{display:">"}],classname:""},{standard:{display:"€"},shift:[{display:"₣"}],classname:""}],[{standard:{display:"shift",code:gm.widgets.Keyboard.SHIFT},shift:[{display:"shift",code:gm.widgets.Keyboard.SHIFT}],classname:"gm-keyboard-shift gm-keyboard-specialkey"},{standard:{display:"back",code:gm.widgets.Keyboard.BACK},shift:[{display:"back",code:gm.widgets.Keyboard.BACK}],classname:"gm-keyboard-back gm-keyboard-specialkey"},{standard:{display:"done",code:gm.widgets.Keyboard.DONE},shift:[{display:"done",code:gm.widgets.Keyboard.DONE}],classname:"gm-keyboard-done gm-keyboard-specialkey"}]]}},"undefined"==typeof gm.widgets.lang&&(gm.widgets.lang={}),gm.widgets.lang.en_US_emailurl={normal:{keyboard:[[{standard:{display:"q"},shift:[{display:"Q"}],classname:""},{standard:{display:"w"},shift:[{display:"W"}],classname:""},{standard:{display:"e"},shift:[{display:"E"}],classname:""},{standard:{display:"r"},shift:[{display:"R"}],classname:""},{standard:{display:"t"},shift:[{display:"T"}],classname:""},{standard:{display:"y"},shift:[{display:"Y"}],classname:""},{standard:{display:"u"},shift:[{display:"U"}],classname:""},{standard:{display:"i"},shift:[{display:"I"}],classname:""},{standard:{display:"o"},shift:[{display:"O"}],classname:""},{standard:{display:"p"},shift:[{display:"P"}],classname:""}],[{standard:{display:"a"},shift:[{display:"A"}],classname:""},{standard:{display:"s"},shift:[{display:"S"}],classname:""},{standard:{display:"d"},shift:[{display:"D"}],classname:""},{standard:{display:"f"},shift:[{display:"F"}],classname:""},{standard:{display:"g"},shift:[{display:"G"}],classname:""},{standard:{display:"h"},shift:[{display:"H"}],classname:""},{standard:{display:"j"},shift:[{display:"J"}],classname:""},{standard:{display:"k"},shift:[{display:"K"}],classname:""},{standard:{display:"l"},shift:[{display:"L"}],classname:""},{standard:{display:"-"},shift:[{display:":"}],classname:""}],[{standard:{display:"z"},shift:[{display:"Z"}],classname:""},{standard:{display:"x"},shift:[{display:"X"}],classname:""},{standard:{display:"c"},shift:[{display:"C"}],classname:""},{standard:{display:"v"},shift:[{display:"V"}],classname:""},{standard:{display:"b"},shift:[{display:"B"}],classname:""},{standard:{display:"n"},shift:[{display:"N"}],classname:""},{standard:{display:"m"},shift:[{display:"M"}],classname:""},{standard:{display:"@"},shift:[{display:"@"}],classname:""},{standard:{display:"."},shift:[{display:"."}],classname:""}],[{standard:{display:"cancel",code:gm.widgets.Keyboard.CANCEL},shift:[{display:"cancel",code:gm.widgets.Keyboard.CANCEL}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"shift",code:gm.widgets.Keyboard.SHIFT},shift:[{display:"shift",code:gm.widgets.Keyboard.SHIFT}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:".com",code:gm.widgets.Keyboard.DOT_COM},shift:[{display:".com",code:gm.widgets.Keyboard.DOT_COM}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"done",code:gm.widgets.Keyboard.DONE},shift:[{display:"done",code:gm.widgets.Keyboard.DONE}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"...123",code:gm.widgets.Keyboard.MORE},shift:[{display:"...123",code:gm.widgets.Keyboard.MORE}],classname:gm.widgets.Keyboard.SP_KEY_CLASS}]]},more:{keyboard:[[{standard:{display:"1"},shift:[{display:"1"}],classname:""},{standard:{display:"2"},shift:[{display:"2"}],classname:""},{standard:{display:"3"},shift:[{display:"3"}],classname:""},{standard:{display:"4"},shift:[{display:"4"}],classname:""},{standard:{display:"5"},shift:[{display:"5"}],classname:""},{standard:{display:"6"},shift:[{display:"6"}],classname:""},{standard:{display:"7"},shift:[{display:"7"}],classname:""},{standard:{display:"8"},shift:[{display:"8"}],classname:""},{standard:{display:"9"},shift:[{display:"9"}],classname:""},{standard:{display:"0"},shift:[{display:"0"}],classname:""}],[{standard:{display:"shift",code:gm.widgets.Keyboard.SHIFT},shift:[{display:"shift",code:gm.widgets.Keyboard.SHIFT}],classname:"gm-keyboard-shift gm-keyboard-specialkey"},{standard:{display:"back",code:gm.widgets.Keyboard.BACK},shift:[{display:"back",code:gm.widgets.Keyboard.BACK}],classname:"gm-keyboard-back gm-keyboard-specialkey"},{standard:{display:"done",code:gm.widgets.Keyboard.DONE},shift:[{display:"done",code:gm.widgets.Keyboard.DONE}],classname:"gm-keyboard-done gm-keyboard-specialkey"}]]}},"undefined"==typeof gm.widgets.lang&&(gm.widgets.lang={}),gm.widgets.lang.fr_FR={normal:{keyboard:[[{standard:{display:"a"},shift:[{display:"A"}],classname:""},{standard:{display:"z"},shift:[{display:"Z"}],classname:""},{standard:{display:"e"},shift:[{display:"E"}],classname:""},{standard:{display:"r"},shift:[{display:"R"}],classname:""},{standard:{display:"t"},shift:[{display:"T"}],classname:""},{standard:{display:"y"},shift:[{display:"Y"}],classname:""},{standard:{display:"u"},shift:[{display:"U"}],classname:""},{standard:{display:"i"},shift:[{display:"I"}],classname:""},{standard:{display:"o"},shift:[{display:"O"}],classname:""},{standard:{display:"p"},shift:[{display:"P"}],classname:""}],[{standard:{display:"q"},shift:[{display:"A"}],classname:""},{standard:{display:"s"},shift:[{display:"S"}],classname:""},{standard:{display:"d"},shift:[{display:"D"}],classname:""},{standard:{display:"f"},shift:[{display:"F"}],classname:""},{standard:{display:"g"},shift:[{display:"G"}],classname:""},{standard:{display:"h"},shift:[{display:"H"}],classname:""},{standard:{display:"j"},shift:[{display:"J"}],classname:""},{standard:{display:"k"},shift:[{display:"K"}],classname:""},{standard:{display:"l"},shift:[{display:"L"}],classname:""},{standard:{display:"m"},shift:[{display:"M"}],classname:""},{standard:{display:"'"},shift:[{display:'"'}],classname:""}],[{standard:{display:"w"},shift:[{display:"W"}],classname:""},{standard:{display:"x"},shift:[{display:"X"}],classname:""},{standard:{display:"c"},shift:[{display:"C"}],classname:""},{standard:{display:"v"},shift:[{display:"V"}],classname:""},{standard:{display:"b"},shift:[{display:"B"}],classname:""},{standard:{display:"n"},shift:[{display:"N"}],classname:""},{standard:{display:"-"},shift:[{display:":"}],classname:""},{standard:{display:","},shift:[{display:"<"}],classname:""},{standard:{display:"."},shift:[{display:">"}],classname:""},{standard:{display:"/"},shift:[{display:"?"}],classname:""}],[{standard:{display:"annuler",code:gm.widgets.Keyboard.CANCEL},shift:[{display:"annuler",code:gm.widgets.Keyboard.CANCEL}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"maj",code:gm.widgets.Keyboard.SHIFT},shift:[{display:"maj",code:gm.widgets.Keyboard.SHIFT}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"espace",code:" "},shift:[{display:"espace",code:" "}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"finir",code:gm.widgets.Keyboard.DONE},shift:[{display:"finir",code:gm.widgets.Keyboard.DONE}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"...",code:gm.widgets.Keyboard.MORE},shift:[{display:"...",code:gm.widgets.Keyboard.MORE}],classname:gm.widgets.Keyboard.SP_KEY_CLASS}]]},more:{keyboard:[[{standard:{display:"1"},shift:[{display:"!"}],classname:""},{standard:{display:"2"},shift:[{display:"@"}],classname:""},{standard:{display:"3"},shift:[{display:"#"}],classname:""},{standard:{display:"4"},shift:[{display:"$"}],classname:""},{standard:{display:"5"},shift:[{display:"%"}],classname:""},{standard:{display:"6"},shift:[{display:"^"}],classname:""},{standard:{display:"7"},shift:[{display:"&"}],classname:""},{standard:{display:"8"},shift:[{display:"*"}],classname:""},{standard:{display:"9"},shift:[{display:"("}],classname:""},{standard:{display:"0"},shift:[{display:")"}],classname:""},{standard:{display:"€"},shift:[{display:"₣"}],classname:""}],[{standard:{display:"à"},shift:[{display:"À"}],classname:""},{standard:{display:"â"},shift:[{display:"Â"}],classname:""},{standard:{display:"æ"},shift:[{display:"Æ"}],classname:""},{standard:{display:"ç"},shift:[{display:"Ç"}],classname:""},{standard:{display:"è"},shift:[{display:"È"}],classname:""},{standard:{display:"é"},shift:[{display:"É"}],classname:""},{standard:{display:"ê"},shift:[{display:"Ê"}],classname:""},{standard:{display:"ë"},shift:[{display:"Ë"}],classname:""},{standard:{display:"î"},shift:[{display:"Î"}],classname:""},{standard:{display:"ï"},shift:[{display:"Ï"}],classname:""},{standard:{display:"ô"},shift:[{display:"Ô"}],classname:""}],[{standard:{display:"ù"},shift:[{display:"Ù"}],classname:""},{standard:{display:"û"},shift:[{display:"Û"}],classname:""},{standard:{display:"ü"},shift:[{display:"Ü"}],classname:""},{standard:{display:"œ"},shift:[{display:"Œ"}],classname:""},{standard:{display:"`"},shift:[{display:"~"}],classname:""},{standard:{display:"-"},shift:[{display:"_"}],classname:""},{standard:{display:"="},shift:[{display:"+"}],classname:""},{standard:{display:"["},shift:[{display:"{"}],classname:""},{standard:{display:"]"},shift:[{display:"}"}],classname:""},{standard:{display:"\\"},shift:[{display:"|"}],classname:""},{standard:{display:";"},shift:[{display:":"}],classname:""}],[{standard:{display:"maj",code:gm.widgets.Keyboard.SHIFT},shift:[{display:"maj",code:gm.widgets.Keyboard.SHIFT}],classname:"gm-keyboard-shift gm-keyboard-specialkey"},{standard:{display:"arriere",code:gm.widgets.Keyboard.BACK},shift:[{display:"arriere",code:gm.widgets.Keyboard.BACK}],classname:"gm-keyboard-back gm-keyboard-specialkey"},{standard:{display:"finir",code:gm.widgets.Keyboard.DONE},shift:[{display:"finir",code:gm.widgets.Keyboard.DONE}],classname:"gm-keyboard-done gm-keyboard-specialkey"}]]}},"undefined"==typeof gm.widgets.lang&&(gm.widgets.lang={}),gm.widgets.lang.fr_FR_emailurl={normal:{keyboard:[[{standard:{display:"a"},shift:[{display:"A"}],classname:""},{standard:{display:"z"},shift:[{display:"Z"}],classname:""},{standard:{display:"e"},shift:[{display:"E"}],classname:""},{standard:{display:"r"},shift:[{display:"R"}],classname:""},{standard:{display:"t"},shift:[{display:"T"}],classname:""},{standard:{display:"y"},shift:[{display:"Y"}],classname:""},{standard:{display:"u"},shift:[{display:"U"}],classname:""},{standard:{display:"i"},shift:[{display:"I"}],classname:""},{standard:{display:"o"},shift:[{display:"O"}],classname:""},{standard:{display:"p"},shift:[{display:"P"}],classname:""}],[{standard:{display:"q"},shift:[{display:"A"}],classname:""},{standard:{display:"s"},shift:[{display:"S"}],classname:""},{standard:{display:"d"},shift:[{display:"D"}],classname:""},{standard:{display:"f"},shift:[{display:"F"}],classname:""},{standard:{display:"g"},shift:[{display:"G"}],classname:""},{standard:{display:"h"},shift:[{display:"H"}],classname:""},{standard:{display:"j"},shift:[{display:"J"}],classname:""},{standard:{display:"k"},shift:[{display:"K"}],classname:""},{standard:{display:"l"},shift:[{display:"L"}],classname:""},{standard:{display:"m"},shift:[{display:"M"}],classname:""}],[{standard:{display:"w"},shift:[{display:"W"}],classname:""},{standard:{display:"x"},shift:[{display:"X"}],classname:""},{standard:{display:"c"},shift:[{display:"C"}],classname:""},{standard:{display:"v"},shift:[{display:"V"}],classname:""},{standard:{display:"b"},shift:[{display:"B"}],classname:""},{standard:{display:"n"},shift:[{display:"N"}],classname:""},{standard:{display:"@"},shift:[{display:"@"}],classname:""},{standard:{display:"."},shift:[{display:"."}],classname:""}],[{standard:{display:"annuler",code:gm.widgets.Keyboard.CANCEL},shift:[{display:"annuler",code:gm.widgets.Keyboard.CANCEL}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"maj",code:gm.widgets.Keyboard.SHIFT},shift:[{display:"maj",code:gm.widgets.Keyboard.SHIFT}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:".com",code:gm.widgets.Keyboard.DOT_COM},shift:[{display:".com",code:gm.widgets.Keyboard.DOT_COM}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"finir",code:gm.widgets.Keyboard.DONE},shift:[{display:"finir",code:gm.widgets.Keyboard.DONE}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"...123",code:gm.widgets.Keyboard.MORE},shift:[{display:"...123",code:gm.widgets.Keyboard.MORE}],classname:gm.widgets.Keyboard.SP_KEY_CLASS}]]},more:{keyboard:[[{standard:{display:"1"},shift:[{display:"1"}],classname:""},{standard:{display:"2"},shift:[{display:"2"}],classname:""},{standard:{display:"3"},shift:[{display:"3"}],classname:""},{standard:{display:"4"},shift:[{display:"4"}],classname:""},{standard:{display:"5"},shift:[{display:"5"}],classname:""},{standard:{display:"6"},shift:[{display:"6"}],classname:""},{standard:{display:"7"},shift:[{display:"7"}],classname:""},{standard:{display:"8"},shift:[{display:"8"}],classname:""},{standard:{display:"9"},shift:[{display:"9"}],classname:""},{standard:{display:"0"},shift:[{display:"0"}],classname:""}],[{standard:{display:"maj",code:gm.widgets.Keyboard.SHIFT},shift:[{display:"maj",code:gm.widgets.Keyboard.SHIFT}],classname:"gm-keyboard-shift gm-keyboard-specialkey"},{standard:{display:"arriere",code:gm.widgets.Keyboard.BACK},shift:[{display:"arriere",code:gm.widgets.Keyboard.BACK}],classname:"gm-keyboard-back gm-keyboard-specialkey"},{standard:{display:"finir",code:gm.widgets.Keyboard.DONE},shift:[{display:"finir",code:gm.widgets.Keyboard.DONE}],classname:"gm-keyboard-done gm-keyboard-specialkey"}]]}},"undefined"==typeof gm.widgets.lang&&(gm.widgets.lang={}),gm.widgets.lang.ru_RU={normal:{keyboard:[[{standard:{display:"й"},shift:[{display:"Й"}],classname:""},{standard:{display:"ц"},shift:[{display:"Ц"}],classname:""},{standard:{display:"у"},shift:[{display:"У"}],classname:""},{standard:{display:"к"},shift:[{display:"К"}],classname:""},{standard:{display:"е"},shift:[{display:"Е"}],classname:""},{standard:{display:"н"},shift:[{display:"Н"}],classname:""},{standard:{display:"г"},shift:[{display:"Г"}],classname:""},{standard:{display:"ш"},shift:[{display:"Ш"}],classname:""},{standard:{display:"щ"},shift:[{display:"Щ"}],classname:""},{standard:{display:"х"},shift:[{display:"Х"}],classname:""}],[{standard:{display:"ф"},shift:[{display:"Ф"}],classname:""},{standard:{display:"ы"},shift:[{display:"Ы"}],classname:""},{standard:{display:"в"},shift:[{display:"В"}],classname:""},{standard:{display:"а"},shift:[{display:"А"}],classname:""},{standard:{display:"п"},shift:[{display:"П"}],classname:""},{standard:{display:"р"},shift:[{display:"Р"}],classname:""},{standard:{display:"о"},shift:[{display:"О"}],classname:""},{standard:{display:"л"},shift:[{display:"Л"}],classname:""},{standard:{display:"д"},shift:[{display:"Д"}],classname:""},{standard:{display:"ж"},shift:[{display:"Ж"}],classname:""},{standard:{display:"э"},shift:[{display:"Э"}],classname:""}],[{standard:{display:"я"},shift:[{display:"Я"}],classname:""},{standard:{display:"ч"},shift:[{display:"Ч"}],classname:""},{standard:{display:"с"},shift:[{display:"С"}],classname:""},{standard:{display:"м"},shift:[{display:"М"}],classname:""},{standard:{display:"и"},shift:[{display:"И"}],classname:""},{standard:{display:"т"},shift:[{display:"Т"}],classname:""},{standard:{display:"ь"},shift:[{display:"Ь"}],classname:""},{standard:{display:"б"},shift:[{display:"Б"}],classname:""},{standard:{display:"ю"},shift:[{display:"Ю"}],classname:""}],[{standard:{display:"cancel",code:gm.widgets.Keyboard.CANCEL},shift:[{display:"cancel",code:gm.widgets.Keyboard.CANCEL}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"shift",code:gm.widgets.Keyboard.SHIFT},shift:[{display:"shift",code:gm.widgets.Keyboard.SHIFT}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"space",code:" "},shift:[{display:"space",code:" "}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"done",code:gm.widgets.Keyboard.DONE},shift:[{display:"done",code:gm.widgets.Keyboard.DONE}],classname:gm.widgets.Keyboard.SP_KEY_CLASS},{standard:{display:"...",code:gm.widgets.Keyboard.MORE},shift:[{display:"...",code:gm.widgets.Keyboard.MORE}],classname:gm.widgets.Keyboard.SP_KEY_CLASS}]]},more:{keyboard:[[{standard:{display:"1"},shift:[{display:"!"}],classname:""},{standard:{display:"2"},shift:[{display:"@"}],classname:""},{standard:{display:"3"},shift:[{display:"#"}],classname:""},{standard:{display:"4"},shift:[{display:"$"}],classname:""},{standard:{display:"5"},shift:[{display:"%"}],classname:""},{standard:{display:"6"},shift:[{display:"^"}],classname:""},{standard:{display:"7"},shift:[{display:"&"}],classname:""},{standard:{display:"8"},shift:[{display:"*"}],classname:""},{standard:{display:"9"},shift:[{display:"("}],classname:""},{standard:{display:"0"},shift:[{display:")"}],classname:""}],[{standard:{display:"`"},shift:[{display:"~"}],classname:""},{standard:{display:"-"},shift:[{display:"_"}],classname:""},{standard:{display:"="},shift:[{display:"+"}],classname:""},{standard:{display:"["},shift:[{display:"{"}],classname:""},{standard:{display:"]"},shift:[{display:"}"}],classname:""},{standard:{display:"\\"},shift:[{display:"|"}],classname:""},{standard:{display:";"},shift:[{display:":"}],classname:""},{standard:{display:"'"},shift:[{display:'"'}],classname:""},{standard:{display:"/"},shift:[{display:"?"}],classname:""}],[{standard:{display:"ё"},shift:[{display:"Ё"}],classname:""},{standard:{display:"з"},shift:[{display:"З"}],classname:""},{standard:{display:"ъ"},shift:[{display:"Ъ"}],classname:""},{standard:{display:","},shift:[{display:"<"}],classname:""},{standard:{display:"."},shift:[{display:">"}],classname:""},{standard:{display:"€"},shift:[{display:"₣"}],classname:""}],[{standard:{display:"shift",code:gm.widgets.Keyboard.SHIFT},shift:[{display:"shift",code:gm.widgets.Keyboard.SHIFT}],classname:"gm-keyboard-shift gm-keyboard-specialkey"},{standard:{display:"back",code:gm.widgets.Keyboard.BACK},shift:[{display:"back",code:gm.widgets.Keyboard.BACK}],classname:"gm-keyboard-back gm-keyboard-specialkey"},{standard:{display:"done",code:gm.widgets.Keyboard.DONE},shift:[{display:"done",code:gm.widgets.Keyboard.DONE}],classname:"gm-keyboard-done gm-keyboard-specialkey"}]]}};var en_us={keys:["11!,22@,33#,44$,55%,66^,77&,88*,99(,00)".split(","),"Qq- Ww= Ee[ Rr] Tt; Yy' Uu, Ii. Oo/ Pp|".split(" "),'Aa_,Ss+,Dd{,Ff},Gg:,Hh",Jj<,Kk>,Ll?'.split(","),"Zz,Xx,Cc,Vv,Bb,Nn,Mm,..".split(",")],buttons:{clearButton:"Clear",cancelButton:"Cancel",spaceButton:"Space",doneButton:"Done",nextButton:"Next",delButton:"Del",okButton:"OK"}},fr_CA={keys:["11!,22@,33#,44$,55%,66^,77&,88*,99(,00)".split(","),"Qq- Ww= Ee[ Rr] Tt; Yy' Uu, Ii. Oo/ Pp|".split(" "),'Aa_,Ss+,Dd{,Ff},Gg:,Hh",Jj<,Kk>,Ll?'.split(","),"Zz,Xx,Cc,Vv,Bb,Nn,Mm,..".split(",")],buttons:{clearButton:"Enlever",cancelButton:"Annuler",spaceButton:"Espace",doneButton:"Terminé",nextButton:"Suivant",delButton:"Effacer",okButton:"OK"}},fr_FR={keys:["11!,22@,33#,44$,55%,66^,77&,88*,99(,00)".split(","),"Qq- Ww= Ee[ Rr] Tt; Yy' Uu, Ii. Oo/ Pp|".split(" "),'Aa_,Ss+,Dd{,Ff},Gg:,Hh",Jj<,Kk>,Ll?'.split(","),"Zz,Xx,Cc,Vv,Bb,Nn,Mm,..".split(",")],buttons:{clearButton:"Enlever",cancelButton:"Annuler",spaceButton:"Espace",doneButton:"Terminé",nextButton:"Suivant",delButton:"Effacer",okButton:"OK"}},es_US={keys:["11!,22@,33#,44$,55%,66^,77&,88*,99(,00)".split(","),"Qq- Ww= Ee[ Rr] Tt; Yy' Uu, Ii. Oo/ Pp|".split(" "),'Aa_,Ss+,Dd{,Ff},Gg:,Hh",Jj<,Kk>,Ll?'.split(","),"Zz,Xx,Cc,Vv,Bb,Nn,Mm,..".split(",")],buttons:{clearButton:"Borrar",cancelButton:"Cancelar",spaceButton:"Espacio",doneButton:"Hecho",nextButton:"Proximo",delButton:"Borrar",okButton:"Aceptar"}},es_ES={keys:["11!,22@,33#,44$,55%,66^,77&,88*,99(,00)".split(","),"Qq- Ww= Ee[ Rr] Tt; Yy' Uu, Ii. Oo/ Pp|".split(" "),'Aa_,Ss+,Dd{,Ff},Gg:,Hh",Jj<,Kk>,Ll?'.split(","),"Zz,Xx,Cc,Vv,Bb,Nn,Mm,..".split(",")],buttons:{clearButton:"Borrar",cancelButton:"Cancelar",spaceButton:"Espacio",doneButton:"Hecho",nextButton:"Proximo",delButton:"Borrar",okButton:"Aceptar"}},ar_ww={keys:["ضض1!,صص2@,ثث3#,قق4$,فف5%,غغ6^,عع7&amp;,ةه0),خخ8*,حح9(,جج0)".split(","),"شش-_ سس=+ يى[{ بب[{ لل]} اا;: تت'&quot; نن,&lt; مم.&gt; كك/? @#€₣".split(" "),"ظظ طط ذئ دء زأ رإ وؤ '' ,, ..".split(" ")],buttons:{clearButton:"تفريغ",cancelButton:"إلغاء",spaceButton:"مسافة",doneButton:"انتهى",nextButton:"استمرار",delButton:"حذف",okButton:"انتهى"}},zh_CN={keys:["11!,22@,33#,44$,55%,66^,77&,88*,99(,00)".split(","),"Qq- Ww= Ee[ Rr] Tt; Yy' Uu, Ii. Oo/ Pp|".split(" "),'Aa_,Ss+,Dd{,Ff},Gg:,Hh",Jj<,Kk>,Ll?'.split(","),"Zz,Xx,Cc,Vv,Bb,Nn,Mm,..".split(",")],buttons:{clearButton:"删除",cancelButton:"取消",spaceButton:"空格",doneButton:"完成",nextButton:"下面",delButton:"Del",okButton:"OK"}},en_us_email={keys:["1,2,3,4,5,6,7,8,9,0".split(","),"Q,W,E,R,T,Y,U,I,O,P".split(","),"A,S,D,F,G,H,J,K,L".split(","),"Z,X,C,V,B,N,M,.".split(",")]};gm.widgets.LightBox=function(){var a=gm.widgets.LightBox.instance;if(a!=null)return a;this.container=null},gm.widgets.LightBox.prototype.render=function(){var a;this.container=a=document.createElement("div"),a.className="gm-lightbox gm-hidden",document.body.appendChild(a)},gm.widgets.LightBox.prototype.show=function(){x$(this.container).removeClass("gm-hidden")},gm.widgets.LightBox.prototype.hide=function(){x$(this.container).addClass("gm-hidden")},gm.widgets.LightBox.prototype.destroy=function(){this.container.parentNode.removeChild(this.container),delete gm.widgets.LightBox.instance,gm.widgets.LightBox.instance=null},gm.widgets.LightBox.getInstance=function(){return gm.widgets.LightBox.instance},document.write('<script type="text/html" id="gm_list_selector_template" style="display:none;"><div class="gm-list-selector-container">\t<label><%= label %></label>\t<div class="gm-handle"><span class="gm-listbox-text"><%= initial %></span><div class="gm-listbox-arrow"></div>\t\t<div class="gm-listbox-drawer gm-hidden">\t\t\t<div class="gm-listbox-label"><%= label %></div>\t\t\t<div class="gm-sb-container"></div>   \t\t<div class="gm-listbox">\t   \t\t\t<ul id="<%= id %>_draggable">\t   \t\t\t<% for ( var i = 0; i < listItems.length; i++ ) { %>\t\t\t    \t<li>\t\t\t    \t\t<input type="radio" value="<%= listItems[i].value %>" id="<%= id %>_<%= i %>" name="<%= id %>" <%= ( listItems[i].selected ? "checked" : "" ) %> class="gm-hidden" />\t\t\t    \t\t<div><span><label for="<%= id %>_<%= i %>"><%= listItems[i].display %></label></span></div>\t\t\t    \t</li>\t\t\t    <% } %>\t\t\t    </ul>\t\t   </div>\t\t\t<div class="gm-listbox-select-button">\t\t\t\t<div>\t\t\t\t\t<span><%= label %></span>\t\t\t\t\t<p class="gm-listbox-selected-value">Stuff</p>\t\t\t\t</div>\t\t\t\t<button>Done</button>\t\t\t</div>\t\t</div>\t</div></div></script>'),gm.widgets.ListSelector=function(a){this.options=gm.widgets.Util.merge(a,{}),this.container=null,this.disabled=this.options.disabled||!1,this.name=this.id=null,this.listVisible=!1,this.value=this.options.value||null,this.selectedLabel=this.scroller=this.xDrawer=null,this.data=[],this.radioName=null,this.lookup={},this.CONTAINER_CLASS="gm-list-selector",this.TEMPLATE_ID="gm_list_selector_template",this.onchange=new gm.widgets.Channel("change"),typeof this.options.onchange=="function"&&this.onchange.subscribe(this.options.onchange),this.onshow=new gm.widgets.Channel("show"),typeof this.options.onshow=="function"&&this.onshow.subscribe(this.options.onshow),this.onhide=new gm.widgets.Channel("hide"),typeof this.options.onhide=="function"&&this.onhide.subscribe(this.options.onhide)},gm.widgets.ListSelector.prototype.render=function(a){var b=null,c=null;if(typeof this.options.data=="object")this.data=this.options.data;else{b=x$(this).find("option");for(c=0;c<b.length;c++)this.data.push({value:b[c].value,display:b[c].innerHTML,checked:b[c].selected}),b[c].selected&&(this.value=b[c].value,this.options.value=this.value)}b=!1;for(c=0;c<this.data.length;c++)this.lookup[this.data[c].value]=this.data[c].display,this.data[c].value==this.options.value?b=this.data[c].selected=!0:this.data[c].selected=!1;b||(this.data[0].selected=!0);var a=x$(a)[0],d=null;(({SELECT:"innerText"}))[a.nodeName]!=null&&(d=document.createElement("div"),this.name=this.id=a.id||this.options.id||(new Date).getTime(),d.id=this.id,d.name=a.name||this.options.name,d.className=this.CONTAINER_CLASS,c=x$("label[for="+a.id+"]")[0],b={id:this.id,listItems:this.data,initial:this.value?this.lookup[this.value]||"":"",label:this.options.label?this.options.label:c?c.innerHTML:""},d.innerHTML=tmpl(this.TEMPLATE_ID,b),a.parentNode.replaceChild(d,a),c!=null&&c.parentNode.removeChild(c),this.container=d,this.xDrawer=x$(d).find(".gm-listbox-drawer"),a=document.getElementById(this.container.id+"_draggable"),this.scroller=new gm.widgets.Scroller(a,{scrollbar:this.xDrawer.find(".gm-sb-container")[0]}),this.updateValueDisplay(),this.attachEvents())},gm.widgets.ListSelector.prototype.attachEvents=function(){var a=x$(this.container),b=this;x$(document).on("mouseup",function(){}),a.find(".gm-handle .gm-listbox-text, .gm-handle .gm-listbox-arrow").on("click",function(){b.disabled||b.show()}),a.find(".gm-listbox-select-button button").on("click",function(){b.hide()}),a.find("input").on("change",function(c){var c=c.target.value,d=b.lookup[c];b.value=c,a.find(".gm-handle span.gm-listbox-text").html(d),b.updateValueDisplay(),b.onchange.fire({target:b,value:c,label:d})})},gm.widgets.ListSelector.prototype.updateValueDisplay=function(){var a=this.xDrawer.find(".gm-listbox input:checked + div label")[0].innerHTML;this.xDrawer.find(".gm-listbox-selected-value").inner(a),this.selectedLabel=a},gm.widgets.ListSelector.prototype.getValue=function(){return this.value},gm.widgets.ListSelector.prototype.setValue=function(a){for(var b=x$(this.container),c=b.find("input:checked"),d=b.find("input"),e=0;e<d.length;e++)if(d[e].value==a)return c.checked=!1,d[e].checked=!0,b.find(".gm-handle span.gm-listbox-text").html(this.lookup[a]),!0;return!1},gm.widgets.ListSelector.prototype.getName=function(){return this.name},gm.widgets.ListSelector.prototype.detachEvents=function(){var a=x$(this.container);a.find(".gm-handle").un("click"),a.find("input").un("click")},gm.widgets.ListSelector.prototype.show=function(){this.xDrawer.removeClass("gm-hidden"),this.listVisible=!0;var a=this.xDrawer.find(".gm-list-selector input:checked + div")[0],b=a.offsetTop,b=b-this.xDrawer.find(".gm-list-selector ul")[0].offsetTop;this.scroller.scrollTo(-b+a.offsetHeight+Math.floor(a.offsetHeight/2)),this.onshow.fire({target:this,value:this.value})},gm.widgets.ListSelector.prototype.hide=function(){this.xDrawer.addClass("gm-hidden"),this.listVisible=!1,this.onhide.fire({target:this,value:this.value})},gm.widgets.ListSelector.prototype.disable=function(){this.listVisible&&this.hide();for(var a=x$(this.container),b=a.find("input"),c=0;c<b.length;c++)b[c].disabled=!0;this.disabled=!0,a.addClass("disabled")},gm.widgets.ListSelector.prototype.enable=function(){for(var a=x$(this.container),b=a.find("input"),c=0;c<b.length;c++)b[c].disabled=!1;this.disabled=!1,a.removeClass("disabled")},gm.widgets.ListSelector.prototype.destroy=function(){this.detachEvents(),this.container.parentNode.removeChild(this.container),this.container=null},gm.widgets.ListSelector.prototype.processSuccessfulRotaryEvent=function(){return!1},gm.widgets.Numberpad=function(a){gm.widgets.Numberpad.instance=this,this.opts=a;switch(this.opts.language){case"en-US":this.buttons=en_us.buttons;break;case"fr-CA":this.buttons=fr_CA.buttons;break;case"fr-FR":this.buttons=fr_FR.buttons;break;case"ar-WW":this.buttons=ar_ww.buttons;break;case"es-US":this.buttons=es_US.buttons;break;case"es-ES":this.buttons=es_ES.buttons;break;case"zh-CN":this.buttons=zh_CN.buttons;break;default:this.buttons=en_us.buttons}this.opts.hintText||(this.opts.hintText=""),this.numpadContainer=this.cancelButton=this.OKButton=this.clearButton=this.delButton=this.currentInputLabel=this.currentInputElement=null,this.opts.sender?(this.currentInputIndex=null,this.inputLabels=[],this.inputElements=[],this.savedInput=[],this.initInputs()):this.renderNumpad()},gm.widgets.Numberpad.prototype.initInputs=function(){for(var a=document.getElementById(this.opts.sender).getElementsByTagName("INPUT"),b=0;b<a.length;b++)a[b].setAttribute("onclick","gm.widgets.Numberpad.instance.renderNumpad(this);"),this.inputElements[b]=a[b],this.inputLabels[b]=a[b].placeholder;a=document.getElementById(this.opts.sender).getElementsByClassName("inputLabel");for(b=0;b<a.length;b++)this.inputLabels[b]=a[b].innerHTML},gm.widgets.Numberpad.prototype.renderNumpad=function(a){if(this.opts.sender)for(var b=document.getElementById(this.opts.sender).getElementsByClassName("inputLabel"),c=0;c<b.length;c++)this.inputLabels[c]=b[c].innerHTML;if(a){this.currentInputIndex=this.inputElements.indexOf(a),b=this.inputLabels[this.currentInputIndex];if(this.numpadContainer){this.show();return}}else b=this.opts.placeholder;this.numpadContainer=document.createElement("div"),this.numpadContainer.className="gm-hidden gm-numpad-content gm-theme-"+gm.widgets.THEME,this.numpadContainer.setAttribute("id","gm-numberpad-container"),this.numpadContainer.style.width="100%",this.numpadContainer.style.height="400px",this.numpadContainer.style.left="0px",this.numpadContainer.style.position="fixed",a=document.createElement("div"),a.id="numpad";for(var d,c=1;c<10;c++)d=document.createElement("a"),d.href="javascript: void(0)",d.className="num",d.innerHTML=c,d.setAttribute("onclick","gm.widgets.Numberpad.instance.numClick(this.innerHTML);"),a.appendChild(d);this.delButton=document.createElement("a"),this.delButton.href="javascript: void(0)",this.delButton.className="num",this.delButton.id="delBtn",c=document.createElement("div"),c.id="numpadDelImage",this.delButton.appendChild(c),this.delButton.setAttribute("onclick","gm.widgets.Numberpad.instance.backSpace();"),a.appendChild(this.delButton),d=document.createElement("a"),d.href="javascript: void(0)",d.className="num",d.innerHTML=0,d.setAttribute("onclick","gm.widgets.Numberpad.instance.numClick(this.innerHTML);"),a.appendChild(d),this.clearButton=document.createElement("a"),this.clearButton.href="javascript: void(0)",this.clearButton.className="num",this.clearButton.id="clrBtn",this.clearButton.innerHTML=this.buttons.clearButton,this.clearButton.setAttribute("onclick","gm.widgets.Numberpad.instance.clearInput();"),a.appendChild(this.clearButton),this.numpadContainer.appendChild(a),a=document.createElement("div"),a.id="gm-numpad-control",this.currentInputLabel=document.createElement("div"),this.currentInputLabel.id="pinLabel",this.currentInputLabel.innerHTML=b,a.appendChild(this.currentInputLabel),c=document.createElement("div"),c.id="pin",c.className="pinInput",a.appendChild(c),this.currentInputElement=document.createElement("input"),this.currentInputElement.id="numpad_pinText",this.currentInputElement.placeholder=this.opts.hintText,c.appendChild(this.currentInputElement),c=document.createElement("div"),c.id="numpadControlButtons",c.style.textAlign="center",c.style.marginBottom="5px",c.style.lineHeight="35px",a.appendChild(c),this.OKButton=document.createElement("a"),this.OKButton.href="javascript: void(0)",this.OKButton.className="theme-btn",this.OKButton.id="okBtn",this.OKButton.innerHTML=this.buttons.okButton,this.OKButton.setAttribute("onclick","gm.widgets.Numberpad.instance.onDone();"),c.appendChild(this.OKButton),this.cancelButton=document.createElement("a"),this.cancelButton.href="javascript: void(0)",this.cancelButton.className="theme-btn",this.cancelButton.id="cancelBtn",this.cancelButton.innerHTML=this.buttons.cancelButton,this.cancelButton.setAttribute("onclick","gm.widgets.Numberpad.instance.onCancel();"),c.appendChild(this.cancelButton),this.numpadContainer.appendChild(a),document.body.appendChild(this.numpadContainer),this.show()},gm.widgets.Numberpad.prototype.numClick=function(a){this.currentInputElement.focus(),this.currentInputElement.value=this.currentInputElement.value+a},gm.widgets.Numberpad.prototype.clearInput=function(){this.currentInputElement.focus(),this.currentInputElement.value=""},gm.widgets.Numberpad.prototype.backSpace=function(){var a=this.currentInputElement.selectionStart-1;a!=-1&&(this.currentInputElement.value=this.currentInputElement.value.substring(0,a)+this.currentInputElement.value.substring(a+1,this.currentInputElement.value.length),this.currentInputElement.setSelectionRange(a,a))},gm.widgets.Numberpad.prototype.show=function(){if(typeof this.currentInputIndex=="number"){this.currentInputElement.value=this.inputElements[this.currentInputIndex].value,this.currentInputLabel.innerHTML=this.inputLabels[this.currentInputIndex],this.currentInputIndex<this.inputElements.length-1&&(this.OKButton.innerHTML=this.buttons.nextButton);for(var a=0;a<this.inputElements.length;a++)this.savedInput[a]=this.inputElements[a].value}this.registerWidgetToRotaryEvent(gm.widgets.Numberpad.instance),numberpadElements=document.body.getElementsByTagName("a"),document.body.appendChild(this.numpadContainer),gm.widgets.Util.removeClass(this.numpadContainer,"gm-hidden"),this.widgetStatus=1},gm.widgets.Numberpad.prototype.hide=function(){this.widgetStatus=0;try{document.body.removeChild(this.numpadContainer)}catch(a){console.log(a)}gm.widgets.Util.addClass(this.numpadContainer,"gm-hidden")},gm.widgets.Numberpad.prototype.onCancel=function(){this.hide(),typeof this.opts.onCancel=="function"&&this.opts.onCancel(),gm.widgets.Numberpad.prototype.unRegisterWidgetFromRotaryEvent(gm.widgets.Numberpad.instance)},gm.widgets.Numberpad.prototype.onDone=function(){if(this.opts.sender){this.savedInput[this.currentInputIndex]=this.currentInputElement.value,this.currentInputIndex++;if(this.currentInputIndex<this.inputElements.length)this.currentInputLabel.innerHTML=this.inputLabels[this.currentInputIndex],this.currentInputElement.value=this.savedInput[this.currentInputIndex]===""?this.opts.hintText:this.savedInput[this.currentInputIndex]||"",this.currentInputIndex===this.inputElements.length-1&&(this.OKButton.innerHTML=this.buttons.okButton);else{for(var a=0;a<this.inputElements.length;a++)typeof this.savedInput[a]=="string"&&(this.inputElements[a].value=this.savedInput[a]);typeof this.opts.onDone=="function"&&this.opts.onDone(this.currentInputElement.value),this.hide()}}else typeof this.opts.onDone=="function"&&this.opts.onDone(this.currentInputElement.value),this.hide();gm.widgets.Numberpad.prototype.unRegisterWidgetFromRotaryEvent(gm.widgets.Numberpad.instance)},gm.widgets.Numberpad.prototype.destroy=function(){try{document.body.removeChild(this.numpadContainer)}catch(a){console.log(a)}gm.widgets.Numberpad.prototype.unRegisterWidgetFromRotaryEvent(gm.widgets.Numberpad.instance),delete gm.widgets.Numberpad.instance};var numberpadElements=[],currentButtonIndex=0,currentElement;gm.widgets.Numberpad.prototype.focus_next=function(){currentButtonIndex==numberpadElements.length-1?(currentElement=numberpadElements[0],currentButtonIndex=0):currentButtonIndex++,currentElement=numberpadElements[currentButtonIndex],numberpadElements[currentButtonIndex].focus()},gm.widgets.Numberpad.prototype.focus_prev=function(){currentButtonIndex==0?(currentElement=numberpadElements[numberpadElements.length-1],currentButtonIndex=numberpadElements.length-1):currentButtonIndex--,currentElement=numberpadElements[currentButtonIndex],numberpadElements[currentButtonIndex].focus()},gm.widgets.Numberpad.prototype.press_enter=function(){currentElement.click(),currentElement.focus()},gm.widgets.Numberpad.prototype.processSuccessfulRotaryEvent=function(a){if(this.widgetStatus==1){switch(a){case"RC_CW":this.focus_next();break;case"RC_CCW":this.focus_prev();break;case"RC_SELECT":this.press_enter()}return!0}return!1},gm.widgets.Numberpad.prototype.unRegisterWidgetFromRotaryEvent=function(a){try{gm.system._unRegisterActiveWidget(a)}catch(b){console.log(b)}this.widgetStatus=0},gm.widgets.Numberpad.prototype.registerWidgetToRotaryEvent=function(a){try{gm.system._registerActiveWidget(a)}catch(b){console.log(b)}this.widgetStatus=1},gm.widgets.PageFlicker=function(a){this.options=gm.widgets.Util.merge(a,{}),this.options.fullscreen==1&&(this.options.width=window.innerWidth,this.options.height=window.innerHeight,x$(document.body).css({margin:"0px"})),this.width=this.options.width||window.innerWidth,this.height=this.options.height||window.innerHeight,this.disabled=this.options.disabled||!1,this.viewCount=this.draggable=this.container=null,this.currentPage=0,this.CONTAINER_CLASS="gm-page-flicker-container",this.onflick=new gm.widgets.Channel("flick"),typeof this.options.onflick=="function"&&this.onflick.subscribe(this.options.onflick)},gm.widgets.PageFlicker.prototype.render=function(a){var a=x$(a),b=a[0],c=document.createElement("div");c.className=this.CONTAINER_CLASS,c.id=b.id,b.id=b.id+"_draggable",b.parentNode.replaceChild(c,b),c.appendChild(b),this.container=c,this.viewCount=a.find("div.gm-view").length,this.width=this.options.width,this.height=this.options.height,a.css({width:this.width*this.viewCount+"px",height:this.height+"px"}),x$(".gm-page-flicker-container div.gm-view").css({width:this.width+"px",height:this.height+"px"}),x$(c).css({width:this.width+"px",height:this.height+"px"}),a=new GloveBox(b),a.scrollX=!0,a.scrollY=!1,a.snap={x:this.width},this.gloveBox=a,this.options.initialViewIndex&&this.flickTo(this.options.initialViewIndex),this.attachEvents(),this.disabled==1&&this.disable()},gm.widgets.PageFlicker.prototype.attachEvents=function(){var a=this;x$(this.gloveBox.element).on("finished",function(b){b=Math.abs(b.params.x/a.width),b!=a.currentPage&&(a.currentPage=b,a.onflick.fire({page:a.currentPage}))}),x$(document).on("mouseup",function(b){a.gloveBox.isDragging&&a.gloveBox.touchend(b)})},gm.widgets.PageFlicker.prototype.detachEvents=function(){this.gloveBox.removeTouchListeners(),x$(this.gloveBox.element).un("finished"),x$(document).un("mouseup")},gm.widgets.PageFlicker.prototype.flickTo=function(a){a>0&&a<this.viewCount&&a!=this.currentPage&&this.gloveBox.setPos(-1*a*this.width,0)},gm.widgets.PageFlicker.prototype.enable=function(){this.disabled=this.gloveBox.disabled=!1},gm.widgets.PageFlicker.prototype.disable=function(){this.disabled=this.gloveBox.disabled=!0},gm.widgets.PageFlicker.prototype.destroy=function(){this.detachEvents(),this.container.parentNode.removeChild(this.container),this.container=null},gm.widgets.PageFlicker.prototype.processSuccessfulRotaryEvent=function(){return!1},gm.widgets.Scroller=function(a,b){b=b||{},this.MIN_SCROLLBAR_HANDLE_HEIGHT=10,this.draggable=a,document.addEventListener("touchmove",function(a){a.preventDefault()}),this.iscroll=new iScroll(a,{desktopCompatibility:!0,vScrollbar:!1}),this.useScrollbar=b.scrollbar?!0:!1,this.onScrollbarChanged=new gm.widgets.Channel("scrollChanged"),typeof b.onScrollbarChanged=="function"&&this.onScrollbarChanged.subscribe(b.onScrollbarChanged),this.useScrollbar&&this.initScrollbar(b.scrollbar)},gm.widgets.Scroller.prototype.initScrollbar=function(a){function b(a){f.iscroll.scrollTo(0,a),f.onScrollbarChanged.fire({x:0,y:a,viewHeight:g})}function c(a){if(a.target.className==e[0].className||a.target.parentNode.className==e[0].className){var c=parseInt(k.style.top.substring(0,k.style.top.indexOf("px")))||0;a.offsetY<c?b(f.iscroll.y+g):a.offsetY>c+j&&b(f.iscroll.y-g)}}var d=x$(this.draggable),a=x$(a);a.html('<button class="gm-sb-up gm-button"><span class="button-icon"></span></button><div class="gm-sb">\t<div class="gm-sb-bar"></div>\t<div class="gm-sb-handle"></div></div><button class="gm-sb-down gm-button"><span class="button-icon"></span></button>');var e=a.find(".gm-sb"),f=this,g=d[0].parentNode.offsetHeight,h=d[0].offsetHeight,i=e[0].clientHeight,j=g/h*i;j<this.MIN_SCROLLBAR_HANDLE_HEIGHT&&(j=this.MIN_SCROLLBAR_HANDLE_HEIGHT),e.find("div.gm-sb-handle").css({height:Math.round(j)+"px",top:"0px"});var k=e.find("div.gm-sb-handle")[0],d=a.find(".gm-sb-up"),l=a.find(".gm-sb-down"),m=a.find(".gm-sb-bar"),n=Math.round(g/2);d.on("click",function(){b(f.iscroll.y+n)}),l.on("click",function(){b(f.iscroll.y-n)}),e.on("click",c),m.on("click",c);var o=null,p=!1;x$(k).on("mousedown",function(a){o=a.y,p=!0}),e.on("mousemove",function(a){if(p){var c=a.y-o;return o=a.y,b(f.iscroll.y-h/i*c),!1}}),x$(document).on("mouseup",function(){p=!1}),this.iscroll.onPositionChanged=function(a){var b=a.y/h,b=Math.abs(Math.round(b*i));x$(k).css({top:b+"px"}),b=(-a.y-j)/h,b=Math.round((b>1?1:b)*100),b<0&&(b=0),m.css({height:b+"%"})}},gm.widgets.Scroller.prototype.scrollTo=function(a){this.iscroll.scrollTo(0,a)},gm.widgets.Scroller.prototype.refresh=function(){this.iscroll.refresh()},gm.widgets.Scroller.prototype.destroy=function(){this.iscroll.destroy()},document.write('<script type="text/html" id="gm_scrolling_selector_template" style="display:none;"><% if (viewTemplate != "") { %>\t<div class="gm-item-view"></div><% } %><div class="gm-header">\t<div class="gm-action-left"></div><div class="gm-title"><%= label %></div><div class="gm-action-right"></div></div><div class="gm-categories">\t<ul><% for ( var j = 0; j < categories.length; j++ ) { %> \t\t<li><%= categories[j] %></li>\t<% } %></ul></div><div class="gm-scroll-container"><ul id="<%= id %>_draggable"><% for ( var i = 0; i < listItems.length; i++ ) { %>\t<li id="<%= listItems[i].itemId %>_li" class="<%= ( listItems[i].selected ? "checked" : "" ) %>">   <input type="<%= (multiselect ? "checkbox" : "radio") %>"  \t\tvalue="<%= listItems[i].value %>"       id="<%= listItems[i].itemId %>"         name="<%= name %>"         <%= ( listItems[i].selected ? "checked" : "" ) %>         class="gm-hidden">\t<label for="<%= listItems[i].itemId %>">\t\t<%= listItems[i].display %><div class="button-icon"></div>\t</label>\t<% } %></ul><% if (listItems.length == 0) { %>\t<div class="gm-empty-list"><%= emptyText %></div><% } %></div><div class="gm-sb-container"></div><div class="gm-overlay"><div class="gm-overlay-content"></div></div><style type="text/css"><% if (icon != "") { %>\t#<%= id %> li label { background-image:url(<%= icon %>); padding-left:30px; }<% } if (selectedIcon != "") { %>   #<%= id %> li input:checked + label { background-image:url(<%= selectedIcon %>); padding-left:30px; }<% } if (activeIcon != "") { %>   #<%= id %> li input:active + label { background-image:url(<%= activeIcon %>); padding-left:30px; }<% } if (buttonIcon != "") { %>   .button-icon { background-image:url(<%= buttonIcon %>); }<% } %></style></script>'),gm.widgets.ScrollingSelector=function(a){this.options=gm.widgets.Util.merge(a,{theme:gm.widgets.THEME}),this.container=null,this.disabled=this.options.disabled||!1,this.id=null,this.data=[],this.radioName=null,this.selectedItems=[],this.lookup={},this.label="",this.currentItemIndex=0,this.TOUCH_SCROLL=!0,this.TEMPLATE_ID="gm_scrolling_selector_template",this.CONTAINER_CLASS="gm-scrolling-selector",this.onselect=new gm.widgets.Channel("select"),typeof this.options.onselect=="function"&&this.onselect.subscribe(this.options.onselect),this.onclick=new gm.widgets.Channel("click"),typeof this.options.onclick=="function"&&this.onclick.subscribe(this.options.onclick),this.onItemAction=new gm.widgets.Channel("itemAction"),typeof this.options.onItemAction=="function"&&this.onItemAction.subscribe(this.options.onItemAction),this.onLeftAction=new gm.widgets.Channel("leftAction"),typeof this.options.onLeftAction=="function"&&this.onLeftAction.subscribe(this.options.onLeftAction),this.onRightAction=new gm.widgets.Channel("rightAction"),typeof this.options.onRightAction=="function"&&this.onRightAction.subscribe(this.options.onRightAction),this.renderView=null,typeof this.options.viewTemplate!="undefined"&&(this.renderView=tmpl(this.options.viewTemplate))};var ALPHABET="abcdefghijklmnopqrstuvwxyz";gm.widgets.ScrollingSelector.prototype.render=function(a){if(typeof this.options.data!="object")for(var b=x$(a).find("option"),c=0;c<b.length;c++)this.data.push({value:b[c].value,display:b[c].innerHTML,selected:b[c].selected});else this.data=this.options.data.slice();a=x$(a)[0],this.id=a.id||this.options.id||(new Date).getTime(),this.radioName=this.options.name||a.name||"gm-radio-button-"+(new Date).getTime(),this.sortData(),this.resetLookup(),this.options.categories=[];for(c=0;c<ALPHABET.length;c++)this.options.categories.push(ALPHABET.charAt(c));c=x$("label[for='"+a.id+"']")[0],this.label=this.options.label||(c?c.innerHTML:null),c&&c.parentNode.removeChild(c),c=document.createElement("div"),c.id=this.id,c.className=this.CONTAINER_CLASS+" gm-theme-"+this.options.theme,a.parentNode.replaceChild(c,a),this.renderMarkup(c),this.attachEvents()},gm.widgets.ScrollingSelector.prototype.renderMarkup=function(a){o={id:a.id,name:this.radioName,listItems:this.data||[],categories:this.options.categories||[],icon:this.options.icon||"",selectedIcon:this.options.selectedIcon||"",activeIcon:this.options.activeIcon||"",buttonIcon:this.options.buttonIcon||"",label:this.label||"",leftActionIcon:this.options.leftActionIcon||"",rightActionIcon:this.options.rightActionIcon||"",multiselect:this.options.multiselect||!1,viewTemplate:this.options.viewTemplate||"",emptyText:this.options.emptyText||""},a.innerHTML=tmpl(this.TEMPLATE_ID,o),xel=x$(a),this.container=a,this.options.width>0&&xel.css({width:this.options.width+"px"}),this.options.height>0&&xel.css({height:this.options.height+"px"}),xel.find(".gm-scroll-container"),this.options.leftActionIcon&&x$(a).find(".gm-action-left").css({"background-image":"url("+this.options.leftActionIcon+")"}),this.options.rightActionIcon&&x$(a).find(".gm-action-right").css({"background-image":"url("+this.options.rightActionIcon+")"});var a=document.getElementById(a.id+"_draggable"),b=this;this.TOUCH_SCROLL?(xel.find(".gm-scroll-container").css({"overflow-y":"hidden"}),this.scroller=new gm.widgets.Scroller(a,{scrollbar:xel.find(".gm-sb-container")[0],onScrollbarChanged:function(a){b.showZoomBubble(a)}})):(xel.find(".gm-scroll-container").css({"overflow-y":"scroll"}),xel.find(".gm-sb-container").css({display:"none"})),a=x$(".gm-categories ul")[0],this.TOUCH_SCROLL?(xel.find(".gm-categories").css({"overflow-y":"hidden"}),new gm.widgets.Scroller(a,{})):xel.find(".gm-categories").css({"overflow-y":"scroll"}),this.options.disabled&&this.disable()},gm.widgets.ScrollingSelector.prototype.sortData=function(){this.options.alphasort&&this.data.sort(function(a,b){return a.display.toLowerCase()>b.display.toLowerCase()?1:-1})},gm.widgets.ScrollingSelector.prototype.resetLookup=function(){for(var a=0;a<this.data.length;a++)this.data[a].itemId=this.id+"_item_"+a,this.lookup[this.data[a].value]=this.data[a]},gm.widgets.ScrollingSelector.prototype.attachEvents=function(){var a=this;x$(this.container).find("input").on("change",function(b){var c=a.lookup[b.target.value];if(a.options.multiselect){if(b.target.checked)a.selectedItems.push(b.target.value),x$(b.target.parentNode).addClass("selected");else{for(var d=0;d<a.selectedItems.length;d++)if(a.selectedItems[d]==b.target.value){a.selectedItems.splice(d,1);break}x$(b.target.parentNode).removeClass("selected")}a.onselect.fire({target:a,value:b.target.value,data:c,selectedItems:a.selectedItems})}else a.selectedItems=[b.target.value],x$(this.container).find(".gm-scroll-container li").removeClass("selected"),x$(b.target.parentNode).addClass("selected"),a.onselect.fire({target:a,value:b.target.value,data:c});b.target.checked&&typeof a.renderView=="function"&&x$(a.container).find(".gm-item-view").html(a.renderView(c))}),x$(this.container).find("label").on("click",function(b){var b=x$("#"+b.target.htmlFor)[0],c=a.lookup[b.value];c.element=b,a.onclick.fire({target:a,value:b.value,data:c,selectedItems:a.selectedItems})}),x$(this.container).find("div.button-icon").on("click",function(b){b.preventDefault&&b.preventDefault(),b.stopPropogation&&b.stopPropogation(),b.cancelBubble=!0,b=x$(b.target.parentNode.parentNode).find("input")[0].value,a.onItemAction.fire({target:a,value:b,type:"itemAction"})}),x$(this.container).find(".gm-action-left").on("click",function(){a.onLeftAction.fire({target:a,type:"leftAction"})}),x$(this.container).find(".gm-action-right").on("click",function(){a.onRightAction.fire({target:a,type:"rightAction"})}),x$(this.container).find(".gm-categories li").on("click",function(b){a.scrollToString(b.target.innerHTML)}),x$(this.container).find(".gm-title").on("click",function(){a.scroller.iscroll.scrollTo(0,0)}),this.widgetStatus=1;try{gm.system._registerActiveWidget(a)}catch(b){}},gm.widgets.ScrollingSelector.prototype.detachEvents=function(){this.widgetStatus=0;try{gm.system._unRegisterActiveWidget(this)}catch(a){}x$(this.container).find("input").un("change"),x$(this.container).find("label").un("click"),x$(this.container).find("div.button-icon").un("click"),x$(this.container).find(".gm-action-left").un("click"),x$(this.container).find(".gm-action-right").un("click"),x$(this.container).find(".gm-categories li").un("click"),this.scroller&&this.scroller.destroy()},gm.widgets.ScrollingSelector.prototype.refresh=function(){this.detachEvents(),this.sortData(),this.resetLookup(),this.renderMarkup(this.container),this.attachEvents(),this.scroller.refresh()},gm.widgets.ScrollingSelector.prototype.showZoomBubble=function(a){var b=x$(this.container).find(".gm-scroll-container li")[0].offsetHeight,a=Math.floor(Math.abs((a.y-a.viewHeight/2)/b));a<0?a=0:a>=this.data.length&&(a=this.data.length-1);var a=this.data[a].display.charAt(0),c=x$(this.container),d=c.find(".gm-overlay"),b=c.find(".gm-overlay-content"),c=c.find(".gm-scroll-container");b.html(a.toUpperCase()),d.css({display:"block",width:c[0].clientWidth+"px",height:c[0].clientHeight+"px"}),this.zoomTimer&&clearTimeout(this.zoomTimer),this.zoomTimer=setTimeout(function(){d.css({display:"none"})},1e3)},gm.widgets.ScrollingSelector.prototype.scrollToString=function(a){for(var a=a.toLowerCase(),b=0,b=0;b<this.data.length-1;b++)if(this.data[b].display.toLowerCase().substring(0,a.length)>=a)break;this.scroller.iscroll.scrollToElement("#"+(this.data[b].itemId+"_li"),"400ms")},gm.widgets.ScrollingSelector.prototype.fitCategories=function(a,b){var c=.8*(b/this.options.categories.length);c>20&&(c=20),a.find(".gm-categories ul").css({"font-size":Math.round(c)+"px"})},gm.widgets.ScrollingSelector.prototype.selectValue=function(a){var b=x$("#"+(this.id+"_"+a));b.length>0&&(this.options.multiselect?b[0].checked||this.selectedItems.push(a):this.selectedItems=[a],b[0].checked=!0)},gm.widgets.ScrollingSelector.prototype.clearSelection=function(){for(var a=x$(this.container).find("input:checked"),b=0;b<a.length;b++)a[0].checked=!1;this.selectedItems=[]},gm.widgets.ScrollingSelector.prototype.getSelectedData=function(){for(var a=[],b=0;b<this.selectedItems.length;b++)a.push(this.lookup[this.selectedItems[b]]);return a},gm.widgets.ScrollingSelector.prototype.deleteValues=function(a){for(var b=0;b<a.length;b++){var c=a[b];delete this.lookup[c];for(var d=0;d<this.data.length;d++)if(this.data[d].value==c){this.data.splice(d,1);break}}this.refresh()},gm.widgets.ScrollingSelector.prototype.add=function(a){a.itemId=this.id+"_item_"+this.data.length,this.lookup[a.value]=a,this.data.push(a),this.refresh()},gm.widgets.ScrollingSelector.prototype.disable=function(){this.glovebox&&this.glovebox.disable();for(var a=document.getElementsByName(this.radioName),b=0;b<a.length;b++)a[b].disabled=!0;x$(this.container).addClass("disabled"),this.widgetStatus=0},gm.widgets.ScrollingSelector.prototype.enable=function(){this.glovebox&&this.glovebox.enable();for(var a=document.getElementsByName(this.radioName),b=0;b<a.length;b++)a[b].disabled=!1;x$(this.container).removeClass("disabled"),this.widgetStatus=1},gm.widgets.ScrollingSelector.prototype.destroy=function(){this.detachEvents(),this.scroller&&this.scroller.destroy(),this.container.parentNode.removeChild(this.container),this.container=null},gm.widgets.ScrollingSelector.prototype.focusItem=function(a){var b=this.currentItemIndex,c=x$(this.container).find(".gm-scroll-container li").length-1,d=x$(this.container).find(".gm-scroll-container li")[this.currentItemIndex],e=x$(this.container).find(".gm-scroll-container input")[this.currentItemIndex];gm.widgets.Util.addClass(d,"active"),e.focus();if(!this.hasRunRotaryFocus)return this.hasRunRotaryFocus=!0;switch(a){case"next":this.currentItemIndex=this.currentItemIndex+1,this.currentItemIndex<=c?(d=x$(this.container).find(".gm-scroll-container li")[this.currentItemIndex],a=x$(this.container).find(".gm-scroll-container li")[this.currentItemIndex-1],e=x$(this.container).find(".gm-scroll-container input")[this.currentItemIndex],e.focus(),gm.widgets.Util.addClass(d,"active"),gm.widgets.Util.removeClass(a,"active")):(this.currentItemIndex=b,d=x$(this.container).find(".gm-scroll-container li")[this.currentItemIndex],e=x$(this.container).find(".gm-scroll-container input")[this.currentItemIndex],gm.widgets.Util.removeClass(d,"active"),e.blur(),this.currentItemIndex=0,this.hasRunRotaryFocus=!1);break;case"prev":this.currentItemIndex=this.currentItemIndex-1,this.currentItemIndex>=0?(d=x$(this.container).find(".gm-scroll-container li")[this.currentItemIndex],a=x$(this.container).find(".gm-scroll-container li")[this.currentItemIndex+1],e=x$(this.container).find(".gm-scroll-container input")[this.currentItemIndex],e.focus(),gm.widgets.Util.addClass(d,"active"),gm.widgets.Util.removeClass(a,"active")):(this.currentItemIndex=0,d=x$(this.container).find(".gm-scroll-container li")[this.currentItemIndex],e=x$(this.container).find(".gm-scroll-container input")[this.currentItemIndex],gm.widgets.Util.removeClass(d,"active"),e.blur(),this.hasRunRotaryFocus=!1);break;case"enter":d=x$(this.container).find(".gm-scroll-container li")[this.currentItemIndex],gm.widgets.Util.removeClass(d,"active"),x$(this.container).find(".gm-scroll-container li label")[this.currentItemIndex].click()}},gm.widgets.ScrollingSelector.prototype.processSuccessfulRotaryEvent=function(a){if(this.widgetStatus==1){switch(a){case"RC_CW":this.focusItem("next");break;case"RC_CCW":this.focusItem("prev");break;case"RC_SELECT":this.focusItem("enter")}return!0}return!1},document.write('<script type="text/html" id="gm_toggle_button_template" style="display:none;">   <input id="<%= id %>" type="checkbox" class="gm-hidden gm-toggle-button" />\t<div id="<%= id %>_label" for="<%= id %>" class="draggable">\t\t<div><%= on %></div>\t\t<div class="button"></div>\t\t<div><%= off %></div>\t</div></script>'),gm.widgets.ToggleButton=function(a){this.options=gm.widgets.Util.merge(a,{width:160,height:80,on:"on",off:"off"}),this.element=this.container=null,this.enabled=!0,this.moving=this.checked=!1,this.width=this.options.width,this.height=this.options.height,this.halfWidth=Math.round(this.width/2),this.CONTAINER_CLASS="gm-toggle-button-container",this.TEMPLATE_ID="gm_toggle_button_template",this.onclick=new gm.widgets.Channel("click"),typeof this.options.onclick=="function"&&this.onclick.subscribe(this.options.onclick),this.oncheck=new gm.widgets.Channel("check"),typeof this.options.oncheck=="function"&&this.oncheck.subscribe(this.options.oncheck),this.onuncheck=new gm.widgets.Channel("uncheck"),typeof this.options.onuncheck=="function"&&this.onuncheck.subscribe(this.options.onuncheck),this.onchange=new gm.widgets.Channel("change"),typeof this.options.onchange=="function"&&this.onchange.subscribe(this.options.onchange)};for(var item in gm.widgets.EventTarget)gm.widgets.ToggleButton.prototype[item]=gm.widgets.EventTarget[item];gm.widgets.ToggleButton.prototype.render=function(a){var a=x$(a)[0],b=this.options,c,d=null;if(a!=null){b.on=this.options.on,b.off=this.options.off,b.id=a.id,b.id!=null&&b.id!=""&&(c=x$("label[for="+b.id+"]")[0]);switch(a.nodeName){case"INPUT":b.label=c!=null?c.innerHTML:a.value||this.options.label||"";break;case"BUTTON":b.label=a.innerText||this.options.label||""}d=document.createElement("div"),d.className=this.CONTAINER_CLASS,d.style.width=this.width+"px",d.style.height=this.height+"px",d.innerHTML=tmpl(this.TEMPLATE_ID,b),x$(d).find(".draggable").css({width:Math.round(1.5*this.width)+"px"}),x$(d).find(".draggable div").css({width:this.halfWidth+"px","line-height":this.height+"px"}),this.container=d,this.element=x$(d).find("input")[0],this.checked=this.options.checked||a.checked||!1,c!=null&&c.parentNode.removeChild(c),a.parentNode.replaceChild(d,a),c=x$(this.container).find(".draggable")[0],a=new GloveBox(c),a.scrollX=!0,a.scrollY=!1,a.snap={x:this.halfWidth},this.gloveBox=a,c.gloveBox=a,this.attachEvents(),this.checked?(this.element.checked=!0,this.gloveBox.x=0):(this.element.checked=!1,this.gloveBox.x=-this.halfWidth),this.options.disabled==1&&this.disable()}},gm.widgets.ToggleButton.prototype.attachEvents=function(){var a=x$(this.container);a.find(".draggable");var b=this,c=function(){var a=b.element;a.checked&&(b.checked=!0,b.oncheck.fire({target:b,checked:!0,type:"check"}),b.onchange.fire({target:b,checked:!0,type:"change"})),a.checked||(b.checked=!1,b.onuncheck.fire({target:b,checked:!1,type:"uncheck"}),b.onchange.fire({target:b,checked:!1,type:"change"}))};a.find("input").on("change",c),x$(this.gloveBox.element).on("finished",function(a){b.moving==1?b.moving=!1:Math.abs(a.params.startX-a.params.endX)<10?(b.onclick.fire({target:b,checked:b.element.checked,type:"click"}),b.element.click(),b.moving=!0,b.gloveBox.x=b.checked?0:-(b.width/2)):b.gloveBox.x<0&&b.checked?(b.uncheck(),c()):b.gloveBox.x==0&&b.checked==0&&(b.check(),c())})},gm.widgets.ToggleButton.prototype.detachEvents=function(){var a=x$(this.container);this.container.unswipe(),a.find("input").un("change"),a.find("label").un("click")},gm.widgets.ToggleButton.prototype.check=function(){this.moving=this.checked=this.element.checked=!0,this.gloveBox.x=0},gm.widgets.ToggleButton.prototype.uncheck=function(){this.checked=this.element.checked=!1,this.moving=!0,this.gloveBox.x=-this.halfWidth},gm.widgets.ToggleButton.prototype.enable=function(){this.disabled=this.element.disabled=!1,x$(this.container).removeClass("disabled")},gm.widgets.ToggleButton.prototype.disable=function(){this.disabled=this.element.disabled=!0,x$(this.container).addClass("disabled")},gm.widgets.ToggleButton.prototype.destroy=function(){this.detachEvents(),this.container.parentNode.removeChild(this.container),this.container=null},gm.widgets.ToggleButton.prototype.processSuccessfulRotaryEvent=function(){return!1},gm.widgets.Util={merge:function(a,b){var c,b=b||{};for(c in a)a.hasOwnProperty(c)&&typeof a[c]!="undefined"&&(b[c]=a[c]);return b},bind:function(a,b,c){return null==c?function(){return b.apply(a,arguments)}:function(){return b.apply(a,c)}},hasClass:function(a,b){return RegExp("(\\s|^)"+b+"(\\s|$)").test(a.className)},addClass:function(a,b){this.hasClass(a,b)||(a.className=a.className+((a.className?" ":"")+b))},removeClass:function(a,b){this.hasClass(a,b)&&(a.className=a.className.replace(RegExp("(\\s|^)"+b+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))}}