gm.comm={},gm.comm._connectionTypeFilter={PHONE:"phone",INTERNET:"internet"},gm.comm._watchNetworkConnectivityLastStatus=null,gm.comm._watchNetworkConnectivityWatchID=null,gm.comm._watchNetworkConnectivityHandler=function(a){var b=gm.hmi.getNetworkConnectivity();b!=gm.comm._watchNetworkConnectivityLastStatus&&a(b),gm.comm._watchNetworkConnectivityLastStatus=b},gm.comm.watchNetworkConnectivity=function(){var a,b,c,d=gm.system._getSig(arguments);if(gm.system._matchesSig(d,"ffs"))a=arguments[0],b=arguments[1],c=arguments[2];else if(gm.system._matchesSig(d,"ff"))a=arguments[0],b=arguments[1],c="";else if(gm.system._matchesSig(d,"f"))a=arguments[0],b=gm.system._optionalMethod,c="";else if(gm.system._matchesSig(d,"fs"))a=arguments[0],b=gm.system._optionalMethod,c=arguments[1];else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return typeof gm.comm._watchNetworkConnectivityWatchID=="number"&&gm.comm.clearNetworkConnectivity(gm.comm._watchNetworkConnectivityWatchID),gm.hmi.watchNetworkConnectivity(a,b)},gm.comm.getNetworkConnectivity=function(){var a,b,c,d=gm.system._getSig(arguments);if(gm.system._matchesSig(d,"ffs"))a=arguments[0],b=arguments[1],c=arguments[2];else if(gm.system._matchesSig(d,"ff"))a=arguments[0],b=arguments[1],c="";else if(gm.system._matchesSig(d,"f"))a=arguments[0],b=gm.system._optionalMethod,c="";else if(gm.system._matchesSig(d,"fs"))a=arguments[0],b=gm.system._optionalMethod,c=arguments[1];else{if(gm.system._matchesSig(d,""))return gm.hmi.getNetworkConnectivity();throw gm.system._EXCEPTIONS.INVALID_SIGNATURE}if(c==gm.comm._connectionTypeFilter.INTERNET||c==""){var e=gm.hmi.getNetworkConnectivity();a(e)}else c==gm.comm._connectionTypeFilter.PHONE?gm.system._send(gm.system._PROTOCOL.APP3_WATCH_NETWORK_CONNECTIVITY,function(b){var c=b.data.connectivity;a(c)},b):b()},gm.comm.clearNetworkConnectivity=function(){var a,b=gm.system._getSig(arguments);if(gm.system._matchesSig(b,"n"))a=arguments[0];else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;gm.hmi.clearNetworkConnectivity(a),clearInterval(a)},gm.comm.sendFile=function(a,b,c){var a,b,c,d=gm.system._getSig(arguments);if(gm.system._matchesSig(d,"ffo"))a=arguments[0],b=arguments[1],c=arguments[2];else if(gm.system._matchesSig(d,"fo"))a=arguments[0],c=arguments[1];else if(gm.system._matchesSig(d,"o"))a=gm.system._optionalMethod,b=gm.system._optionalMethod,c=arguments[0];else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return gm.communication.sendFile(a,b,c)},gm.comm.watchForData=function(){var a,b,c=gm.system._getSig(arguments);if(gm.system._matchesSig(c,"ff"))a=arguments[0],b=arguments[1];else if(gm.system._matchesSig(c,"f"))a=arguments[0],b=gm.system._optionalMethod;else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return gm.system._watchForDataCallback=function(c){console.log("Got success callback from app0 watch. :: "+JSON.stringify(c)),gm._dataIsValid(c)?(console.log("Data is valid"),a(c)):(console.log("Data is NOT valid."),b(gm.system._EXCEPTIONS.FORBIDDEN_CONTENT),gm.util&&gm.util.logEvent("SECURITY_EXCEPTION","Forbidden content"))},gm.communication.watchForData(a,b)},gm.comm.clearWatchForData=function(a){gm.communication.clearWatchForData(a),gm.system._watchForDataCallback=function(){};return},gm.comm.sendToPhone=function(){var a,b,c,d,e=gm.system._getSig(arguments);if(gm.system._matchesSig(e,"ffsn"))a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3];else if(gm.system._matchesSig(e,"fsn"))a=arguments[0],b=gm.system._optionalMethod,c=arguments[1],d=arguments[2];else if(gm.system._matchesSig(e,"sn"))a=gm.system._optionalMethod,b=gm.system._optionalMethod,c=arguments[0],d=arguments[1];else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return gm.communication.sendToPhone(a,b,c,d)},gm.comm.webServiceRequest=function(){var a,b,c,d=gm.system._getSig(arguments);if(gm.system._matchesSig(d,"ffo"))a=arguments[0],b=arguments[1],c=arguments[2];else if(gm.system._matchesSig(d,"fo"))a=arguments[0],b=gm.system._optionalMethod,c=arguments[1];else if(gm.system._matchesSig(d,"of"))c=arguments[0],a=arguments[1],b=gm.system._optionalMethod;else if(gm.system._matchesSig(d,"off"))c=arguments[0],a=arguments[1],b=arguments[2];else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;gm.comm.getNetworkConnectivity(function(d){if(d==0){b();return}if(typeof c.headers=="object"){var e=["GET","POST","PUT","DELETE","OPTIONS","CONNECT"],f=new XMLHttpRequest,g=c.url,h;if(typeof c.method!="undefined"){var i=e;for(var j in i)if(c.method.toLowerCase()===i[j].toLowerCase()){h=i[j];break}}typeof h=="undefined"&&(typeof c.parameters=="undefined"?h="GET":h="POST");var k="";for(var l in c.parameters){var m=c.parameters[l];k+=encodeURIComponent(l)+"=",typeof c.parameters[l]=="object"?k+=encodeURIComponent(JSON.stringify(m))+"&":k+=encodeURIComponent(m)+"&"}k.length>0&&(k=k.slice(0,-1)),f.onreadystatechange=function(){f.readyState===4&&(f.status===200?gm._dataIsValid(f.responseText)?a(f.responseText):(b(gm.system._EXCEPTIONS.FORBIDDEN_CONTENT),gm.util&&gm.util.logEvent("SECURITY_EXCEPTION_WS_RESPONSE_CONTENT",c)):b(f))},h!=="POST"&&(g+=g.indexOf("?")<0?"?":"&",g+=k),f.open(h,g,!0);for(var n in c.headers)f.setRequestHeader(n,c.headers[n]);h==="POST"?(f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(k)):f.send(null)}else gm.vehicle.webServiceRequest(function(d){gm._dataIsValid(d)?a(d):(b(gm.system._EXCEPTIONS.FORBIDDEN_CONTENT),gm.util&&gm.util.logEvent("SECURITY_EXCEPTION_WS_RESPONSE_CONTENT",c))},b,c)},b,"internet")},gm.comm.sendToApp=function(){var a,b,c,d,e=gm.system._getSig(arguments);if(gm.system._matchesSig(e,"nnso"))a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3];else if(gm.system._matchesSig(e,"nns"))a=arguments[0],b=arguments[1],c=arguments[2],d={};else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return gm.communication.sendToApp(a,b,c,d)}