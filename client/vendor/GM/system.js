typeof gm=="undefined"&&(gm=parent.gm||{}),gm.system={},gm.system._APP0_VERSION=1,gm.system._API_VERSION=1,gm.system._REQUEST_ID=0,gm.system._CALLBACKS=[],gm.system.RotaryCALLBACKS=[],gm.system._APP3_ID=3,gm.system._BLACKLIST=/(<script|<\/script|javascript\s*:|eval\s*\(|window\s*\.\s*attachEvent|window\s*\.\s*createRequest|window\s*\.\s*document|window\s*\.\s*frame|window\s*\.\s*location|window\s*\.\s*open|window\s*\.\s*setInterval|window\s*\.\s*setTimeout|<applet|<form|<\/form|<object|function\(|function\s.*\(|document\.\S|text\/javascript)/gim,gm.system._CACHED_VERSION_DISPLAY_TEXT="n/a",gm.system._CACHED_MY_VERSION_TEXT="n/a",gm.system._EXCEPTIONS={NOT_SUPPORTED:1,NOT_INITIALIZED:2,FORBIDDEN_CONTENT:3,INVALID_SIGNATURE:0},gm.system._POLLING={HIGH:1e3,MEDIUM:5e3,LOW:1e4},gm.system._PROTOCOL={APP3_GET_AID:"APP3_GET_AID",APP3_APP_RESTART:"APP3_APP_RESTART",APP3_APP_UPDATE_THEN_RESTART:"APP3_APP_UPDATE_THEN_RESTART",APP3_GET_SYS_INFO:"APP3_GET_SYS_INFO",APP3_LOG_EVENT:"APP3_LOG_EVENT",APP3_GET_AUTO_START:"APP3_GET_AUTO_START",APP3_WRITE_BINARY_FILE:"APP3_WRITE_BINARY_FILE",APP3_WATCH_NETWORK_CONNECTIVITY:"APP3_WATCH_NETWORK_CONNECTIVITY",APP3_CLEAR_NETWORK_CONNECTIVITY:"APP3_CLEAR_NETWORK_CONNECTIVITY",APP3_GET_MY_VERSION:"APP3_GET_MY_VERSION",APP3_GET_VERSION_DISPLAY_TEXT:"APP3_GET_VERSION_DISPLAY_TEXT",APP3_GET_ACCESS_TOKEN:"APP3_GET_ACCESS_TOKEN",APP3_ENCRYPT:"APP3_ENCRYPT",APP3_DECRYPT:"APP3_DECRYPT",SYNC:"SYNC",APP0_GET_AID_RESULT:"APP0_GET_AID_RESULT",APP0_WATCH_NETWORK_CONNECTIVITY_RESULT:"APP0_WATCH_NETWORK_CONNECTIVITY_RESULT",APP0_GET_MY_VERSION:"APP0_GET_MY_VERSION",APP0_GET_VERSION_DISPLAY_TEXT:"APP0_GET_VERSION_DISPLAY_TEXT",APP0_GET_ACCESS_TOKEN_RESULT:"APP0_GET_ACCESS_TOKEN_RESULT",APP0_LOG_EVENT_RESULT:"APP0_LOG_EVENT_RESULT",APP0_ENCRYPT_RESULT:"APP0_ENCRYPT_RESULT",APP0_DECRYPT_RESULT:"APP0_DECRYPT_RESULT"},gm.system._watchForDataCallback=function(){},gm.system._handleOptionalMethod=function(a){return typeof a=="function"?a:function(){}},gm.system._handleSendToAppResponse=function(a,b){switch(a){case 0:gm.system._log("sendToApp success",b);break;case 1:gm.system._log("sendToApp failed:  App not installed",b);break;case 2:gm.system._log("sendToApp failed:  App not started",b);break;case 3:gm.system._log("sendToApp failed:  Invalid data",b);break;case 4:gm.system._log("sendToApp failed:  App not watching for data",b)}},gm.system._send=function(a,b,c,d){d=d||{},d.request_id=gm.system._REQUEST_ID,b=gm.system._handleOptionalMethod(b),c=gm.system._handleOptionalMethod(c);var e=JSON.stringify({command:a,data:d});gm.system._CALLBACKS[gm.system._REQUEST_ID]={success:b,failure:c},gm.system._REQUEST_ID++;var f=gm.communication.sendToApp(gm.system._APP3_ID,e.length,e);gm.system._handleSendToAppResponse(f,e),f&&c()},gm.system._handleWatchForData=function(a){var b;try{b=JSON.parse(a.data)}catch(c){b=a.data}var d=!1;for(var e in gm.system._PROTOCOL)if(b.command==e){d=!0;if(b.data.error&&gm.system._CALLBACKS[b.data.request_id]!=undefined){gm.system._CALLBACKS[b.data.request_id].failure(b);break}if(gm.system._CALLBACKS[b.data.request_id]!=undefined){gm.system._CALLBACKS[b.data.request_id].success(b);break}}if(d)return;gm.system._watchForDataCallback(a)};var activeWidgetsArray=[],allInputTags=[],allInputTagsCurrentIndex=0,currentInputTagElement,allTagsInBody=[];gm.system._handleWatchForRotary=function(a){if(activeWidgetsArray.length>0)for(var b=0;b<activeWidgetsArray.length;b++){var c=activeWidgetsArray[b];if(activeWidgetsArray[b].processSuccessfulRotaryEvent(a))break;continue}else if(gm.system.RotaryCALLBACKSCounter===1){allTagsInBody=document.body.getElementsByTagName("*");if(allTagsInBody.length>1)for(var b=0;b<allTagsInBody.length;b++)if(allTagsInBody[b].tagName=="A"&&allTagsInBody[b].getAttribute("href")!="#"||allTagsInBody[b].tagName=="INPUT"||allTagsInBody[b].tagName=="BUTTON"||allTagsInBody[b].tagName=="TEXTAREA"||allTagsInBody[b].hasAttribute("onclick")||allTagsInBody[b].hasAttribute("onmouseup")||allTagsInBody[b].hasAttribute("onmousedown"))allTagsInBody[b].hasAttribute("class")?allTagsInBody[b].style.visibility=="hidden"||allTagsInBody[b].getAttribute("class").indexOf("hidden")>-1||allTagsInBody[b].style.display=="none"||allInputTags.push(allTagsInBody[b]):allTagsInBody[b].style.visibility!="hidden"&&allTagsInBody[b].style.display!="none"&&allInputTags.push(allTagsInBody[b]);if(allInputTags.length>0)if(a===gm.constants.button.RC_CW)allInputTagsCurrentIndex==allInputTags.length-1?allInputTagsCurrentIndex=0:allInputTagsCurrentIndex+=1,allInputTags[allInputTagsCurrentIndex].focus(),currentInputTagElement=allInputTags[allInputTagsCurrentIndex];else if(a===gm.constants.button.RC_CCW)allInputTagsCurrentIndex==0?allInputTagsCurrentIndex=allInputTags.length-1:allInputTagsCurrentIndex-=1,allInputTags[allInputTagsCurrentIndex].focus(),currentInputTagElement=allInputTags[allInputTagsCurrentIndex];else if(a===gm.constants.button.RC_SELECT){currentInputTagElement.focus();if(currentInputTagElement.hasAttribute("onmouseup")){var d=document.createEvent("MouseEvent");d.initEvent("mouseup",!1,!1),currentInputTagElement.dispatchEvent(d)}else if(currentInputTagElement.hasAttribute("onmousedown")){var d=document.createEvent("MouseEvent");d.initEvent("mousedown",!1,!1),currentInputTagElement.dispatchEvent(d)}else{var d=document.createEvent("MouseEvent");d.initEvent("click",!1,!1),currentInputTagElement.dispatchEvent(d)}}}},gm.system._registerActiveWidget=function(a){activeWidgetsArray.push(a)},gm.system._unRegisterActiveWidget=function(a){for(var b=0;b<activeWidgetsArray.length;b++)a===activeWidgetsArray[b]&&activeWidgetsArray.splice(b,1)},gm.system.init=function(){gm.system._log("App 0 >> Init.");var a=function(){gm.system._log("App 0 >> FAILURE initializing.")};activeWidgetsArray=[],gm.system.RotaryCALLBACKSCounter=1,gm.info.watchRotaryControl(gm.system._handleWatchForRotary,a),gm.vehicle.getVehicleConfiguration(function(b){gm.system._API_VERSION=parseFloat(b.apiVersion),gm.communication.watchForData(gm.system._handleWatchForData,a);if(!document.getElementById("themeTag")){var c=document.createElement("link");c.id="themeTag",c.type="text/css";var d="gmc";b.theme&&(d=b.theme.toLowerCase());if(d==="chevrolet"||d.indexOf("chevy")>-1)d="chevrolet";else if(d==="buick"||d.indexOf("buick")>-1)d="buick";else if(d==="cadillac"||d.indexOf("cadillac")>-1)d="cadillac";else if(d==="gmc"||d.indexOf("gmc")>-1)d="gmc";c.href="GMLIB/themes/"+d+"/theme.css",c.rel="stylesheet",document.head.appendChild(c)}typeof gm.info.getVersionDisplayText=="function"&&(gm.info.getVersionDisplayText(function(a){gm.system._CACHED_VERSION_DISPLAY_TEXT=a},function(){gm.system._log("App 0 >> Failed to cache versionDisplayText.")}),gm.info.getMyVersion(function(a){gm.system._CACHED_MY_VERSION_TEXT=a},function(){gm.system._log("App 0 >> Failed to cache myVersion.")}))},a)},gm.system._log=function(){var a=[];for(var b=0;b<arguments.length;b++)a.push(JSON.stringify(arguments[b]));var c=a.join(", ");console.log("APP0 >> "+c)},gm.system.watchFocus=function(){var a,b,c,d=gm.system._getSig(arguments);if(gm.system._matchesSig(d,"ff"))a=arguments[0],b=arguments[1];else if(gm.system._matchesSig(d,"f"))a=arguments[0],b=gm.system._optionalMethod;else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return typeof gm.appmanager.watchFocus=="function"?gm.appmanager.watchFocus(function(c){c==0||c==1?a(c):b()},b):(b(),gm.system._EXCEPTIONS.NOT_SUPPORTED)},gm.system.clearFocus=function(a){if(typeof gm.appmanager.clearFocus=="function")gm.appmanager.clearFocus(a);else return gm.system._EXCEPTIONS.NOT_SUPPORTED},gm.system.watchSpeed=function(){var a,b,c=gm.system._getSig(arguments);if(gm.system._matchesSig(c,"ff"))a=arguments[0],b=arguments[1];else if(gm.system._matchesSig(c,"f"))a=arguments[0],b=gm.system._optionalMethod;else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;try{gm.system.clearSpeed()}catch(d){}return gm.vehicle.watchSpeed(a,b)},gm.system.getSpeed=function(){return gm.vehicle.getSpeed()},gm.system.clearSpeed=function(){var a,b=gm.system._getSig(arguments);if(gm.system._matchesSig(b,"n"))a=arguments[0];else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;gm.vehicle.clearSpeed(a)},gm.system.restartApp=function(){gm.appmanager.closeApp(function(){gm.system._log("Failed to close app.")}),gm.system._send(gm.system._PROTOCOL.APP3_APP_RESTART)},gm.system.updateThenRestartApp=function(){gm.system._send(gm.system._PROTOCOL.APP3_APP_UPDATE_THEN_RESTART)},gm.system.dataIsValid=function(){var a,b=gm.system._getSig(arguments);if(gm.system._matchesSig(b,"s")||gm.system._matchesSig(b,"n"))a=arguments[0];else if(gm.system._matchesSig(b,"o"))a=JSON.stringify(arguments[0]);else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return gm._dataIsValid(a)},gm._dataIsValid=function(a){if(typeof a=="string")return a.match(gm.system._BLACKLIST)?!1:!0;if(typeof a=="object"){for(var b in a){var c=gm.system.dataIsValid(a[b]);if(c==0)return!1}return!0}},gm.system.requestFocus=function(){var a,b,c=gm.system._getSig(arguments);if(gm.system._matchesSig(c,"ff"))a=arguments[0],b=arguments[1];else if(gm.system._matchesSig(c,"f"))a=arguments[0],b=gm.system._optionalMethod;else if(gm.system._matchesSig(c,""))a=gm.system._optionalMethod,b=gm.system._optionalMethod;else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return gm.appmanager.requestFocus(a,b)},gm.system.closeApp=function(){var a,b=gm.system._getSig(arguments);if(gm.system._matchesSig(b,"f"))a=arguments[0];else if(gm.system._matchesSig(b,""))a=gm.system._optionalMethod;else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return gm.appmanager.closeApp(a)},gm.system.setShutdown=function(){var a,b,c=gm.system._getSig(arguments);if(gm.system._matchesSig(c,"ff"))a=arguments[0],b=arguments[1];else if(gm.system._matchesSig(c,"f"))a=arguments[0],b=gm.system._optionalMethod;else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return gm.appmanager.setShutdown(a,b)},gm.system._isFunction=function(a){return typeof a=="function"},gm.system._isObject=function(a){return typeof a=="object"},gm.system._isNumber=function(a){return typeof a=="number"},gm.system._isString=function(a){return typeof a=="string"},gm.system._isUndefined=function(a){return typeof a=="undefined"},gm.system._isBoolean=function(a){return a===!0||a===!1},gm.system._getSig=function(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];gm.system._isFunction(d)?b.push("f"):gm.system._isObject(d)?b.push("o"):gm.system._isNumber(d)?b.push("n"):gm.system._isString(d)?b.push("s"):gm.system._isBoolean(d)?b.push("b"):gm.system._isUndefined(d)&&b.push("u")}return b.join("")},gm.system._matchesSig=function(a,b){return a==b},gm.system._optionalMethod=function(){gm.system._log("App 0 >> Optional, unprovided callback executed.",arguments)},gm.system.getDTCTableEntry=function(){var a,b=gm.system._getSig(arguments);if(gm.system._matchesSig(b,"o"))a=arguments[0];else if(gm.system._matchesSig(b,""))a={};else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return gm.vehicle.getDTCTableEntry(a)},gm.system.watchDTCTableEntry=function(){var a,b,c,d=gm.system._getSig(arguments);if(gm.system._matchesSig(d,"ffo"))a=arguments[0],b=arguments[1],c=arguments[2];else if(gm.system._matchesSig(d,"ff"))a=arguments[0],b=arguments[1],c={};else if(gm.system._matchesSig(d,"fo"))a=arguments[0],b=gm.system._optionalMethod,c=arguments[1];else if(gm.system._matchesSig(d,"f"))a=arguments[0],b=gm.system._optionalMethod,c={};else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return gm.vehicle.watchDTCTableEntry(a,b,c)},gm.system.clearDTCTableWatch=function(){var a,b=gm.system._getSig(arguments);if(gm.system._matchesSig(b,"n"))a=arguments[0];else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return gm.vehicle.clearDTCTableWatch(a)},gm.system.releaseFocus=function(){var a,b,c=gm.system._getSig(arguments);if(gm.system._matchesSig(c,"ff"))a=arguments[0],b=arguments[1];else if(gm.system._matchesSig(c,"f"))a=arguments[0],b=gm.system._optionalMethod;else if(gm.system._matchesSig(c,""))a=gm.system._optionalMethod,b=gm.system._optionalMethod;else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return gm.appmanager.releaseFocus(a,b)},gm.system.changeFriendlyName=function(){var a,b,c=gm.system._getSig(arguments);if(gm.system._matchesSig(c,"sf"))a=arguments[0],b=arguments[1];else if(gm.system._matchesSig(c,"s"))a=arguments[0],b=gm.system._optionalMethod;else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return gm.appmanager.changeFriendlyName(a,b)},gm.system.changeIcon=function(){var a,b,c=gm.system._getSig(arguments);if(gm.system._matchesSig(c,"sf"))a=arguments[0],b=arguments[1];else if(gm.system._matchesSig(c,"s"))a=arguments[0],b=gm.system._optionalMethod;else throw gm.system._EXCEPTIONS.INVALID_SIGNATURE;return gm.appmanager.changeIcon(a,b)}